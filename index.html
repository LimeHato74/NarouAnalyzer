<!DOCTYPE html>
<html lang="ja" data-theme="winter">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
    <meta name="theme-color" content="#3b82f6">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <title>Narou Analyzer Ultra3.2 - Created by ãƒšãƒ³ã‚®ãƒ³ã®æ¾ã‚Šæ±</title>
    <meta name="description" content="Webå°èª¬åŸ·ç­†è€…å‘ã‘é«˜ç²¾åº¦åˆ†æãƒ„ãƒ¼ãƒ«ã€‚æ‹æ„›ã€ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ã€SFãªã©ã‚¸ãƒ£ãƒ³ãƒ«åˆ¥ã«è©•ä¾¡">
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@3.9.4/dist/full.css" rel="stylesheet" type="text/css" />
    <script>
        // Tailwind CDNè­¦å‘Šã‚’éè¡¨ç¤º
        (function() {
            const originalWarn = console.warn;
            console.warn = function(...args) {
                if (args[0] && args[0].includes && args[0].includes('cdn.tailwindcss.com')) {
                    return;
                }
                originalWarn.apply(console, args);
            };
        })();
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=BIZ+UDGothic:wght@400;700&family=Zen+Maru+Gothic:wght@500;700&display=swap');
        
        /* ===== BASE STYLES ===== */
        * {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }
        
        html {
            font-size: 16px;
            -webkit-text-size-adjust: 100%;
            -moz-text-size-adjust: 100%;
            text-size-adjust: 100%;
        }
        
        body { 
            font-family: 'Zen Maru Gothic', sans-serif; 
            transition: background-color 0.3s, color 0.3s;
            overscroll-behavior-y: none;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .font-mono-jp { 
            font-family: 'BIZ UDGothic', monospace; 
            line-height: 1.8; 
        }
        
        [v-cloak] { display: none; }
        
        /* ===== GLASS PANEL - RESPONSIVE ===== */
        .glass-panel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        [data-theme="night"] .glass-panel {
            background: rgba(15, 23, 42, 0.85);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* ãƒ¢ãƒã‚¤ãƒ«ã§ã®ã‚¬ãƒ©ã‚¹ãƒ‘ãƒãƒ«æœ€é©åŒ– */
        @media (max-width: 768px) {
            .glass-panel {
                backdrop-filter: blur(8px);
                -webkit-backdrop-filter: blur(8px);
            }
        }
        
        /* ===== ANIMATIONS ===== */
        .animate-fade-in-up { animation: fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes fadeInUp { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        .animate-bounce-in { animation: bounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55); }
        @keyframes bounceIn { 
            0% { transform: scale(0.5); opacity: 0; } 
            100% { transform: scale(1); opacity: 1; } 
        }
        
        .pulse-ring { animation: pulseRing 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulseRing { 
            0%, 100% { opacity: 1; } 
            50% { opacity: 0.5; } 
        }
        
        .fixed-button-bar {
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        @keyframes slideUp { 
            from { transform: translateY(100%); } 
            to { transform: translateY(0); } 
        }
        
        /* ===== TOUCH OPTIMIZATIONS ===== */
        button, a, label, select, textarea, input {
            touch-action: manipulation;
        }
        
        /* ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚µã‚¤ã‚ºã®ç¢ºä¿ï¼ˆæœ€å°44x44pxï¼‰ */
        .btn, button, a {
            min-height: 44px;
            min-width: 44px;
        }
        
        @media (max-width: 640px) {
            .btn-sm {
                min-height: 40px;
                min-width: 40px;
            }
        }
        
        /* ===== DROPDOWN IMPROVEMENTS ===== */
        @media (max-width: 640px) {
            .dropdown-content {
                max-width: calc(100vw - 2rem);
                max-height: 70vh;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }
        }
        
        /* ===== RESPONSIVE TYPOGRAPHY ===== */
        @media (max-width: 640px) {
            html { font-size: 14px; }
            h1 { font-size: 1.25rem !important; }
            h2 { font-size: 1.1rem !important; }
            h3 { font-size: 1rem !important; }
        }
        
        @media (min-width: 641px) and (max-width: 1024px) {
            html { font-size: 15px; }
        }
        
        @media (min-width: 1921px) {
            html { font-size: 18px; }
        }
        
        /* ===== CARD & PANEL SPACING ===== */
        @media (max-width: 640px) {
            .card-body {
                padding: 1rem !important;
            }
        }
        
        @media (min-width: 641px) and (max-width: 1024px) {
            .card-body {
                padding: 1.25rem !important;
            }
        }
        
        /* ===== SCROLLBAR STYLING ===== */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }
        
        [data-theme="night"] ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }
        
        [data-theme="night"] ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        /* ===== TEXTAREA RESPONSIVE ===== */
        textarea {
            font-size: 1rem;
            resize: vertical;
        }
        
        @media (max-width: 640px) {
            textarea {
                font-size: 0.9rem;
                line-height: 1.6;
            }
        }
        
        /* ===== SELECT RESPONSIVE ===== */
        select {
            background-position: right 0.75rem center;
            padding-right: 2.5rem;
        }
        
        @media (max-width: 640px) {
            select {
                font-size: 0.95rem;
            }
        }
        
        /* ===== CHART CONTAINERS ===== */
        .chart-container {
            position: relative;
            width: 100%;
            overflow: hidden;
        }
        
        @media (max-width: 640px) {
            .chart-container {
                margin-left: -0.5rem;
                margin-right: -0.5rem;
            }
        }
        
        /* ===== BADGE RESPONSIVE ===== */
        @media (max-width: 640px) {
            .badge {
                font-size: 0.7rem;
                padding: 0.25rem 0.5rem;
            }
        }
        
        /* ===== GRID IMPROVEMENTS ===== */
        @media (max-width: 640px) {
            .grid {
                gap: 0.75rem !important;
            }
        }
        
        /* ===== SAFE AREA INSETS (for iPhone notch) ===== */
        @supports (padding: env(safe-area-inset-bottom)) {
            .fixed-button-bar {
                padding-bottom: calc(1rem + env(safe-area-inset-bottom));
            }
        }
        
        /* ===== MODAL IMPROVEMENTS ===== */
        @media (max-width: 640px) {
            .modal-box {
                max-width: calc(100vw - 2rem);
                max-height: calc(100vh - 4rem);
                margin: 1rem;
            }
        }
        
        /* ===== PERFORMANCE: GPU ACCELERATION ===== */
        .card, .glass-panel, .btn {
            transform: translateZ(0);
            will-change: transform;
        }
        
        /* ===== RESPONSIVE IMAGES ===== */
        img {
            max-width: 100%;
            height: auto;
        }
        
        /* ===== FLEX IMPROVEMENTS ===== */
        @media (max-width: 768px) {
            .flex-col-mobile {
                flex-direction: column !important;
            }
            
            .w-full-mobile {
                width: 100% !important;
            }
        }
        
        /* ===== ACCESSIBILITY ===== */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* ===== FOCUS STYLES ===== */
        button:focus-visible, a:focus-visible, select:focus-visible, 
        textarea:focus-visible, input:focus-visible {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
        
        /* ===== LANDSCAPE MODE OPTIMIZATIONS ===== */
        @media (max-height: 500px) and (orientation: landscape) {
            .navbar {
                padding-top: 0.5rem;
                padding-bottom: 0.5rem;
            }
            
            .fixed-button-bar {
                position: relative;
                bottom: auto;
            }
        }
        
        /* ===== TABLE RESPONSIVE ===== */
        @media (max-width: 640px) {
            table {
                font-size: 0.85rem;
            }
            
            th, td {
                padding: 0.5rem 0.25rem !important;
            }
        }
        
        /* ===== STAT CARDS ===== */
        @media (max-width: 640px) {
            .stat {
                padding: 0.75rem !important;
            }
            
            .stat-value {
                font-size: 1.5rem !important;
            }
            
            .stat-title {
                font-size: 0.75rem !important;
            }
        }
    </style>
    <meta name="google-site-verification" content="Qctxr2MQwkSNSHwyrfwkSR9HDis7BM0FjcSFREWI-YA" />
</head>
<body class="min-h-screen bg-base-200 flex flex-col">

<div id="app" v-cloak class="flex-grow">
    <header class="navbar glass-panel sticky top-0 z-50 px-2 sm:px-4 md:px-6 transition-colors duration-300 min-h-[60px] sm:min-h-[70px]">
        <div class="flex-1 flex-col items-start">
            <h1 class="text-lg sm:text-xl md:text-2xl font-black text-primary flex items-center gap-1 sm:gap-2 tracking-tighter cursor-pointer" onclick="window.scrollTo(0,0)">
                <i class="ph-fill ph-pen-nib-straight text-xl sm:text-2xl"></i> 
                <span class="whitespace-nowrap">Narou Analyzer <span class="text-secondary">Ultra3.2</span></span>
            </h1>
            <div class="text-[9px] sm:text-[10px] font-bold text-base-content/50 ml-6 sm:ml-8 -mt-1">Created by ãƒšãƒ³ã‚®ãƒ³ã®æ¾ã‚Šæ±</div>
        </div>
        <div class="flex-none gap-1 sm:gap-2 flex items-center">
            <!-- Xã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒªãƒ³ã‚¯ -->
            <div class="dropdown dropdown-end">
                <label tabindex="0" class="btn btn-ghost btn-circle btn-sm touch-target" aria-label="ä½œè€…ã®Xã‚¢ã‚«ã‚¦ãƒ³ãƒˆ">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="sm:w-5 sm:h-5">
                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                    </svg>
                </label>
                <ul tabindex="0" class="dropdown-content z-[100] menu p-2 shadow-lg bg-base-100 rounded-box w-56 sm:w-64 mt-3 border border-base-300">
                    <li class="menu-title">
                        <span class="flex items-center gap-2 text-xs sm:text-sm">
                            <i class="ph-fill ph-user-circle text-primary"></i>
                            ä½œè€…ã®Xã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
                        </span>
                    </li>
                    <li>
                        <a href="https://x.com/petipeti_juice" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 sm:gap-3 text-sm">
                            <i class="ph-fill ph-star text-yellow-500"></i>
                            <div class="flex-1 min-w-0">
                                <div class="font-bold truncate">ãƒ¡ã‚¤ãƒ³ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</div>
                                <div class="text-xs opacity-70 truncate">@petipeti_juice</div>
                            </div>
                            <i class="ph-bold ph-arrow-square-out text-base-content/50 flex-shrink-0"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://x.com/Lime_Lemon_Hato" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 sm:gap-3 text-sm">
                            <i class="ph-fill ph-bird text-sky-500"></i>
                            <div class="flex-1 min-w-0">
                                <div class="font-bold truncate">ã‚µãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</div>
                                <div class="text-xs opacity-70 truncate">@Lime_Lemon_Hato</div>
                            </div>
                            <i class="ph-bold ph-arrow-square-out text-base-content/50 flex-shrink-0"></i>
                        </a>
                    </li>
                </ul>
            </div>
            
            <label class="swap swap-rotate btn btn-ghost btn-circle btn-sm touch-target" aria-label="ãƒ†ãƒ¼ãƒåˆ‡æ›¿">
                <input type="checkbox" v-model="isDarkMode" />
                <i class="ph-fill ph-sun swap-on text-yellow-500 text-lg sm:text-xl"></i>
                <i class="ph-fill ph-moon swap-off text-indigo-500 text-lg sm:text-xl"></i>
            </label>
        </div>
    </header>

    <main class="p-2 sm:p-4 md:p-6 lg:p-8 max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-3 sm:gap-4 md:gap-6 pb-20 sm:pb-24 md:pb-28">
        <section class="lg:col-span-4 space-y-3 sm:space-y-4">
            <div class="card bg-base-100 shadow-lg">
                <div class="card-body p-3 sm:p-4 md:p-5">
                    <label class="label pt-0 pb-1 sm:pb-2">
                        <span class="label-text font-bold text-sm sm:text-base text-base-content/70">è§£æã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠ</span>
                    </label>
                    
                    <select v-model="selectedGenre" @change="onGenreChange" class="select select-bordered w-full font-bold text-sm sm:text-base bg-base-200/50 focus:outline-none focus:border-secondary">
                        <optgroup v-for="(group, groupName) in groupedGenres" :label="groupName" :key="groupName">
                            <option v-for="g in group" :value="g.id" :key="g.id">
                                {{ g.name }}
                            </option>
                        </optgroup>
                    </select>
                    
                    <div class="mt-3 sm:mt-4 text-xs space-y-2 sm:space-y-3">
                        <div class="flex gap-2 sm:gap-3 items-start p-2 sm:p-3 rounded bg-primary/10 text-primary-content">
                            <i class="ph-fill ph-info text-lg sm:text-xl mt-0.5 text-primary flex-shrink-0"></i>
                            <div class="min-w-0">
                                <div class="font-bold text-primary text-xs sm:text-sm">{{ currentScoringProfile.name }}</div>
                                <div class="opacity-80 leading-relaxed mt-1 text-base-content text-xs">{{ currentScoringProfile.desc }}</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs text-base-content/60">
                            <div class="flex items-center gap-1">
                                <i class="ph-bold ph-text-aa flex-shrink-0"></i> 
                                <span class="truncate">ç›®æ¨™æ–‡é•·: {{ currentScoringProfile.targetLen }}æ–‡å­—</span>
                            </div>
                            <div class="flex items-center gap-1">
                                <i class="ph-bold ph-chats flex-shrink-0"></i> 
                                <span class="truncate">ç›®æ¨™ä¼šè©±: {{ currentScoringProfile.minDialog }}%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card bg-base-100 shadow-xl border-t-4 border-secondary">
                <div class="card-body p-3 sm:p-4 md:p-6">
                    <div class="flex justify-between items-end mb-2">
                        <h2 class="text-xs sm:text-sm font-bold text-base-content/70 uppercase tracking-wider">æœ¬æ–‡å…¥åŠ›</h2>
                        <span class="text-[10px] sm:text-xs badge whitespace-nowrap" :class="inputText.length > 2000 ? 'badge-success' : 'badge-ghost'">{{ inputText.length.toLocaleString() }} chars</span>
                    </div>
                    <textarea 
                        v-model="inputText" 
                        class="textarea textarea-bordered w-full h-[35vh] sm:h-[40vh] lg:h-[55vh] font-mono-jp text-sm sm:text-base leading-relaxed resize-none focus:outline-none focus:border-secondary transition-all" 
                        placeholder="ã“ã“ã«å°èª¬ã®æœ¬æ–‡ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚&#10;&#10;Ultra3.2ã§ã¯ã€æ–‡æœ«ãƒ‘ã‚¿ãƒ¼ãƒ³ã€è¦–ç‚¹ã®ä¸€è²«æ€§ã€æå†™å¯†åº¦ã€æ¥ç¶šè©ã®é©åˆ‡æ€§ã€èªå½™ã®è±Šã‹ã•ãªã©ã€æ•°åé …ç›®ã®è©³ç´°ãªåˆ†æã‚’è¡Œã„ã¾ã™ã€‚"
                        aria-label="å°èª¬æœ¬æ–‡å…¥åŠ›ã‚¨ãƒªã‚¢"></textarea>
                </div>
            </div>
        </section>

        <section class="lg:col-span-8 space-y-4 sm:space-y-6" id="results-area">
            <div v-if="!stats" class="flex flex-col h-full min-h-[300px] sm:min-h-[400px]">
                <div class="flex-1 flex flex-col items-center justify-center text-base-content/30 border-2 border-dashed border-base-300 rounded-2xl sm:rounded-3xl p-4 sm:p-6 md:p-8 mb-4 sm:mb-6">
                    <i class="ph-duotone ph-books text-5xl sm:text-6xl md:text-7xl mb-3 sm:mb-4 animate-pulse text-secondary"></i>
                    <p class="text-base sm:text-lg md:text-xl font-bold text-center">é«˜ç²¾åº¦ã‚¸ãƒ£ãƒ³ãƒ«åˆ¥è§£æ Ultra3.2</p>
                    <p class="text-xs sm:text-sm mt-2 opacity-70 text-center px-2">æ‹æ„›ãƒ»ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ãƒ»æ–‡èŠ¸ãƒ»SFãªã©å…¨20ã‚«ãƒ†ã‚´ãƒªã«å¯¾å¿œ</p>
                    <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs opacity-60 w-full max-w-md px-4">
                        <div class="flex items-center gap-1">
                            <span class="flex-shrink-0">âœ“</span>
                            <span>æ–‡æœ«ãƒ‘ã‚¿ãƒ¼ãƒ³ç²¾å¯†åˆ†æ</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <span class="flex-shrink-0">âœ“</span>
                            <span>è¦–ç‚¹ä¸€è²«æ€§ãƒã‚§ãƒƒã‚¯</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <span class="flex-shrink-0">âœ“</span>
                            <span>å¤šæ¬¡å…ƒæå†™å¯†åº¦æ¸¬å®š</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <span class="flex-shrink-0">âœ“</span>
                            <span>å†—é•·è¡¨ç¾æ¤œå‡º</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <span class="flex-shrink-0">âœ“</span>
                            <span>èªå½™ã®è±Šã‹ã•è©•ä¾¡</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <span class="flex-shrink-0">âœ“</span>
                            <span>æ¥ç¶šè©é©åˆ‡æ€§åˆ¤å®š</span>
                        </div>
                    </div>
                    <div class="mt-6 sm:mt-8 text-[10px] sm:text-xs font-mono opacity-50 bg-base-200 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full">Designed by ãƒšãƒ³ã‚®ãƒ³ã®æ¾ã‚Šæ±</div>
                </div>
            </div>

            <div v-else class="space-y-4 sm:space-y-6 animate-fade-in-up">
                
                <div class="card bg-base-100 shadow-xl relative z-10" style="overflow: visible;">
                    <div class="absolute top-0 left-0 w-2 sm:w-3 h-full" :class="rankColorClass"></div>
                    <div class="absolute -right-6 sm:-right-10 -top-6 sm:-top-10 opacity-5 rotate-12 pointer-events-none" style="overflow: hidden;">
                        <i class="ph-fill ph-medal text-6xl sm:text-7xl md:text-9xl"></i>
                    </div>
                    
                    <div class="card-body p-3 sm:p-4 md:p-6 lg:p-8" style="overflow: visible;">
                        <div class="flex flex-col md:flex-row gap-4 sm:gap-6 md:gap-8 items-center">
                            <div class="text-center min-w-[120px] sm:min-w-[140px] md:min-w-[160px] relative z-0">
                                <div class="text-[10px] sm:text-xs text-base-content/60 font-bold mb-1 uppercase tracking-widest flex items-center justify-center gap-1 sm:gap-2">
                                    Genre Rank
                                    <span v-if="isAIMode && !isAIProcessing && aiComment" class="badge badge-xs sm:badge-sm badge-secondary animate-pulse">AIæ¡ç‚¹</span>
                                </div>
                                <div class="text-6xl sm:text-7xl md:text-8xl lg:text-9xl font-black leading-none bg-clip-text text-transparent bg-gradient-to-br filter drop-shadow-sm" :class="rankGradient" style="font-family: 'Zen Maru Gothic';">{{ stats.rank }}</div>
                                <div class="text-xl sm:text-2xl md:text-3xl font-bold mt-[-6px] sm:mt-[-8px] md:mt-[-10px] text-base-content/50">{{ stats.totalScore.toFixed(1) }}<span class="text-xs sm:text-sm">/100</span></div>
                            </div>
                            
                            <div class="flex-1 w-full space-y-3 sm:space-y-4">
                                <div class="bg-base-200/60 p-3 sm:p-4 md:p-5 rounded-xl sm:rounded-2xl border border-base-300 relative z-0">
                                    <h3 class="font-bold text-xs sm:text-sm mb-2 flex items-center gap-2 text-secondary">
                                        <i class="ph-fill ph-robot text-base sm:text-lg"></i> {{ currentScoringProfile.name }}ã¨ã—ã¦ã®è©•ä¾¡
                                    </h3>
                                    <p class="text-xs sm:text-sm md:text-base leading-6 sm:leading-7 whitespace-pre-line text-base-content">{{ stats.comment }}</p>
                                </div>
                                
                                <!-- AIæ„Ÿæƒ³è¡¨ç¤º -->
                                <div v-if="isAIMode" class="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-3 sm:p-4 md:p-5 rounded-xl sm:rounded-2xl border-2 border-purple-200 dark:border-purple-700 relative z-0">
                                    <h3 class="font-bold text-xs sm:text-sm mb-2 sm:mb-3 flex items-center gap-2 text-purple-700 dark:text-purple-300">
                                        <i class="ph-fill ph-heart text-base sm:text-lg"></i> AIèª­å¾Œæ„Ÿæƒ³
                                    </h3>
                                    <div v-if="isAIProcessing" class="flex items-center gap-2 sm:gap-3 text-purple-600 dark:text-purple-400">
                                        <span class="loading loading-spinner loading-xs sm:loading-sm"></span>
                                        <span class="text-xs sm:text-sm">{{ aiComment }}</span>
                                    </div>
                                    <p v-else-if="aiComment" class="text-xs sm:text-sm md:text-base leading-6 sm:leading-7 text-base-content italic">ã€Œ{{ aiComment }}ã€</p>
                                    <p v-else class="text-xs sm:text-sm text-base-content/60 italic">AIåˆ†æã‚’å¾…æ©Ÿä¸­...</p>
                                </div>
                                
                                <div class="flex flex-col sm:flex-row flex-wrap items-center justify-between gap-3 sm:gap-4 relative">
                                    <div class="flex flex-wrap gap-1.5 sm:gap-2 justify-center sm:justify-start w-full sm:w-auto">
                                        <div v-for="tag in stats.tags" :key="tag" class="badge badge-outline text-[10px] sm:text-xs py-2 sm:py-3 px-2.5 sm:px-4 bg-base-100">
                                            # {{ tag }}
                                        </div>
                                    </div>
                                    
                                    <!-- å…±æœ‰ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ -->
                                    <div class="dropdown dropdown-bottom dropdown-end relative z-50">
                                        <label tabindex="0" class="btn btn-secondary gap-2 text-sm sm:text-base whitespace-nowrap" aria-label="çµæœã‚’å…±æœ‰">
                                            <i class="ph-bold ph-share-network text-base sm:text-lg"></i>
                                            <span class="hidden sm:inline">çµæœã‚’å…±æœ‰</span>
                                            <span class="sm:hidden">å…±æœ‰</span>
                                            <i class="ph-bold ph-caret-down"></i>
                                        </label>
                                        <ul tabindex="0" class="dropdown-content menu p-2 shadow-2xl bg-base-100 rounded-box w-60 sm:w-64 mt-2 border-2 border-base-300 z-[9999]">
                                            <li>
                                                <a @click="shareToXDirect" class="flex items-center gap-3 py-2.5 sm:py-3 text-sm">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="flex-shrink-0 sm:w-5 sm:h-5">
                                                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                                    </svg>
                                                    <div class="flex-1 min-w-0">
                                                        <div class="font-bold text-xs sm:text-sm">Xã«å…±æœ‰</div>
                                                        <div class="text-[10px] sm:text-xs opacity-70">æŠ•ç¨¿ç”»é¢ã‚’é–‹ã</div>
                                                    </div>
                                                </a>
                                            </li>
                                            <li>
                                                <a @click="shareToLine" class="flex items-center gap-3 py-2.5 sm:py-3 text-sm">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="#06C755" class="flex-shrink-0 sm:w-5 sm:h-5">
                                                        <path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/>
                                                    </svg>
                                                    <div class="flex-1 min-w-0">
                                                        <div class="font-bold text-xs sm:text-sm">LINEã§å…±æœ‰</div>
                                                        <div class="text-[10px] sm:text-xs opacity-70">ãƒ†ã‚­ã‚¹ãƒˆã§é€ä¿¡</div>
                                                    </div>
                                                </a>
                                            </li>
                                            <div class="divider my-1"></div>
                                            <li>
                                                <a @click="copyResultText" class="flex items-center gap-2 sm:gap-3 py-2.5 sm:py-3 text-sm">
                                                    <i class="ph-bold ph-copy text-lg sm:text-xl flex-shrink-0"></i>
                                                    <div class="flex-1 min-w-0">
                                                        <div class="font-bold text-xs sm:text-sm">ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼</div>
                                                        <div class="text-[10px] sm:text-xs opacity-70">SNSæŠ•ç¨¿ç”¨</div>
                                                    </div>
                                                </a>
                                            </li>
                                            <li>
                                                <a @click="downloadCard" class="flex items-center gap-2 sm:gap-3 py-2.5 sm:py-3 text-sm">
                                                    <i class="ph-bold ph-download-simple text-lg sm:text-xl flex-shrink-0"></i>
                                                    <div class="flex-1 min-w-0">
                                                        <div class="font-bold text-xs sm:text-sm">ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</div>
                                                        <div class="text-[10px] sm:text-xs opacity-70">PNGå½¢å¼ã§ä¿å­˜</div>
                                                    </div>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 md:gap-4">
                    <div v-for="m in stats.mainMetrics" :key="m.label" class="card bg-base-100 shadow-lg">
                        <div class="card-body p-3 sm:p-4 md:p-5">
                            <div class="text-[10px] sm:text-xs text-base-content/60 font-bold uppercase tracking-wide">{{ m.label }}</div>
                            <div class="text-2xl sm:text-3xl font-black text-primary mt-1">{{ m.value }}</div>
                            <div class="text-[10px] sm:text-xs text-base-content/70 mt-1 sm:mt-2">{{ m.sub }}</div>
                        </div>
                    </div>
                </div>

                <div class="card bg-base-100 shadow-lg">
                    <div class="card-body p-3 sm:p-4 md:p-6">
                        <h3 class="text-sm sm:text-base md:text-lg font-bold mb-3 sm:mb-4 flex items-center gap-2">
                            <i class="ph-fill ph-chart-polar text-secondary text-base sm:text-lg"></i> 
                            <span>ã‚¸ãƒ£ãƒ³ãƒ«é©åˆåº¦ãƒ¬ãƒ¼ãƒ€ãƒ¼</span>
                        </h3>
                        <div class="h-[250px] sm:h-[280px] md:h-[320px] relative">
                            <canvas id="radarChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4 md:gap-6">
                    <div class="card bg-base-100 shadow-lg">
                        <div class="card-body p-3 sm:p-4 md:p-6">
                            <h3 class="text-sm sm:text-base md:text-lg font-bold mb-2 sm:mb-3 flex items-center gap-2">
                                <i class="ph-fill ph-heartbeat text-pink-500 text-base sm:text-lg"></i> 
                                <span>æ„Ÿæƒ…ãƒˆãƒ¼ãƒ³æ¨ç§»</span>
                            </h3>
                            <div class="h-[160px] sm:h-[180px] md:h-[200px]">
                                <canvas id="sentimentChart"></canvas>
                            </div>
                            <div class="text-[10px] sm:text-xs mt-2 sm:mt-3 opacity-70 text-center">
                                ãƒ†ã‚­ã‚¹ãƒˆå…¨ä½“ã‚’é€šã—ã¦ã®æ„Ÿæƒ…ã®èµ·ä¼ã‚’å¯è¦–åŒ–
                            </div>
                        </div>
                    </div>

                    <div class="card bg-base-100 shadow-lg">
                        <div class="card-body p-3 sm:p-4 md:p-6">
                            <h3 class="text-sm sm:text-base md:text-lg font-bold mb-2 sm:mb-3 flex items-center gap-2">
                                <i class="ph-fill ph-text-aa text-blue-500 text-base sm:text-lg"></i> 
                                <span>æ–‡æœ«ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ</span>
                            </h3>
                            <div class="space-y-1.5 sm:space-y-2">
                                <div v-for="(ep, idx) in stats.contentMetrics.endingPatterns" :key="idx" class="flex items-center gap-2 sm:gap-3">
                                    <div class="flex-1 min-w-0">
                                        <div class="flex justify-between text-xs sm:text-sm mb-1">
                                            <span class="font-mono truncate">{{ ep.pattern }}</span>
                                            <span class="font-bold whitespace-nowrap ml-2">{{ ep.count }}å› ({{ ep.percentage.toFixed(1) }}%)</span>
                                        </div>
                                        <div class="w-full bg-base-200 rounded-full h-1.5 sm:h-2">
                                            <div class="bg-gradient-to-r from-blue-500 to-purple-500 h-1.5 sm:h-2 rounded-full transition-all" :style="{width: ep.percentage + '%'}"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-2 sm:mt-3 text-[10px] sm:text-xs">
                                <span class="badge badge-sm" :class="stats.contentMetrics.endingVariety >= 70 ? 'badge-success' : stats.contentMetrics.endingVariety >= 50 ? 'badge-warning' : 'badge-error'">
                                    ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³: {{ stats.contentMetrics.endingVariety.toFixed(0) }}ç‚¹
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card bg-base-100 shadow-lg">
                    <div class="card-body p-3 sm:p-4 md:p-6">
                        <h3 class="text-sm sm:text-base md:text-lg font-bold mb-3 sm:mb-4 flex items-center gap-2">
                            <i class="ph-fill ph-brain text-purple-500 text-base sm:text-lg"></i> 
                            <span>è©³ç´°å“è³ªåˆ†æ</span>
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-3 md:gap-4">
                            <div v-for="qm in stats.qualityMetrics" :key="qm.label" class="bg-base-200/50 p-3 sm:p-4 rounded-xl">
                                <div class="flex justify-between items-center mb-1.5 sm:mb-2">
                                    <span class="font-bold text-xs sm:text-sm">{{ qm.label }}</span>
                                    <span class="badge badge-xs sm:badge-sm" :class="getScoreBg(qm.score)">{{ qm.score }}ç‚¹</span>
                                </div>
                                <div class="w-full bg-base-300 rounded-full h-1.5 sm:h-2">
                                    <div class="h-1.5 sm:h-2 rounded-full transition-all" :class="getScoreColor(qm.score)" :style="{width: qm.score + '%'}"></div>
                                </div>
                                <div class="text-[10px] sm:text-xs mt-1.5 sm:mt-2 text-base-content/70 leading-relaxed">{{ qm.comment }}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card bg-base-100 shadow-lg border-l-2 sm:border-l-4 border-warning">
                    <div class="card-body p-3 sm:p-4 md:p-6">
                        <h3 class="text-sm sm:text-base md:text-lg font-bold mb-3 sm:mb-4 flex items-center gap-2">
                            <i class="ph-fill ph-lightbulb text-warning text-base sm:text-lg"></i> 
                            <span>æ”¹å–„ã‚¢ãƒ‰ãƒã‚¤ã‚¹</span>
                        </h3>
                        <div class="space-y-2 sm:space-y-3">
                            <div v-for="(advice, idx) in adviceList" :key="idx" class="alert shadow-sm bg-base-200/50 py-2 sm:py-3">
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between mb-1 gap-2">
                                        <span class="font-bold text-xs sm:text-sm truncate">{{ advice.label }}</span>
                                        <span class="badge badge-xs sm:badge-sm whitespace-nowrap" :class="advice.statusBadge">{{ advice.value }}</span>
                                    </div>
                                    <div class="text-[10px] sm:text-xs opacity-80 leading-relaxed">
                                        <span class="text-base-content/50">ç›®æ¨™:</span> {{ advice.target }} 
                                        <span class="mx-1">â†’</span> {{ advice.msg }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>
    </main>

    <!-- å›ºå®šè§£æãƒœã‚¿ãƒ³ -->
    <div class="fixed bottom-0 left-0 right-0 z-40 bg-base-100/95 backdrop-blur-md border-t border-base-300 shadow-2xl fixed-button-bar">
        <div class="max-w-7xl mx-auto p-2 sm:p-3 md:p-4">
            <div class="flex items-center justify-center gap-2 sm:gap-3 md:gap-4 flex-wrap">
                <!-- AIãƒ¢ãƒ¼ãƒ‰ãƒˆã‚°ãƒ« -->
                <label class="flex items-center gap-1.5 sm:gap-2 cursor-pointer touch-target px-2 py-1">
                    <input type="checkbox" v-model="isAIMode" class="toggle toggle-primary toggle-sm sm:toggle-md" aria-label="AIãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿" />
                    <span class="text-xs sm:text-sm md:text-base font-bold flex items-center gap-1 sm:gap-1.5">
                        <i class="ph-fill ph-robot text-sm sm:text-base md:text-lg"></i>
                        <span class="hidden xs:inline">AIãƒ¢ãƒ¼ãƒ‰</span>
                        <span class="xs:hidden">AI</span>
                    </span>
                </label>
                
                <!-- åˆ†æãƒœã‚¿ãƒ³ -->
                <button @click="analyzeText" class="btn btn-secondary btn-sm sm:btn-md md:btn-lg gap-1.5 sm:gap-2 shadow-lg flex-1 sm:flex-initial min-w-[160px] sm:min-w-[200px] md:min-w-[280px] max-w-[320px]" :disabled="inputText.length < 100" aria-label="åˆ†æé–‹å§‹">
                    <i class="ph-bold ph-magnifying-glass text-base sm:text-lg md:text-xl"></i>
                    <span class="font-bold text-xs sm:text-sm md:text-base">åˆ†æé–‹å§‹</span>
                    <span v-if="inputText.length < 100" class="text-[10px] sm:text-xs opacity-70 hidden sm:inline">(ã‚ã¨{{ 100 - inputText.length }}æ–‡å­—)</span>
                    <span v-else class="badge badge-success text-[10px] sm:text-xs whitespace-nowrap">{{ inputText.length.toLocaleString() }}</span>
                </button>
            </div>
        </div>
    </div>

    <div v-if="toastMessage" class="toast toast-top toast-center z-[100] animate-bounce-in">
        <div class="alert shadow-lg text-sm sm:text-base p-3 sm:p-4" :class="toastType">
            <i :class="toastIcon" class="text-lg sm:text-xl flex-shrink-0"></i>
            <span class="font-bold">{{ toastMessage }}</span>
        </div>
    </div>

    <!-- AIåˆ©ç”¨è¦ç´„ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div v-if="showAITermsModal" class="fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-fade-in-up p-4">
        <div class="bg-base-100 rounded-xl sm:rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col">
            <div class="p-4 sm:p-6 border-b border-base-300">
                <h2 class="text-lg sm:text-xl md:text-2xl font-bold flex items-center gap-2 sm:gap-3">
                    <i class="ph-fill ph-warning-circle text-warning text-2xl sm:text-3xl flex-shrink-0"></i>
                    <span>AIãƒ¢ãƒ¼ãƒ‰åˆ©ç”¨è¦ç´„</span>
                </h2>
            </div>
            
            <div class="p-4 sm:p-6 overflow-y-auto flex-1 space-y-3 sm:space-y-4 text-xs sm:text-sm leading-relaxed">
                <div class="alert alert-warning">
                    <i class="ph-fill ph-info text-xl"></i>
                    <div class="text-sm">
                        <strong>é‡è¦ï¼š</strong>AIãƒ¢ãƒ¼ãƒ‰ã‚’ã”åˆ©ç”¨ã«ãªã‚‹å‰ã«ã€ä»¥ä¸‹ã®åˆ©ç”¨è¦ç´„ã‚’å¿…ãšãŠèª­ã¿ãã ã•ã„ã€‚
                    </div>
                </div>

                <div class="space-y-3">
                    <h3 class="font-bold text-base flex items-center gap-2">
                        <i class="ph-fill ph-one text-primary"></i>
                        ãƒ‡ãƒ¼ã‚¿ã®å¤–éƒ¨é€ä¿¡ã«ã¤ã„ã¦
                    </h3>
                    <p class="pl-7 text-base-content/80">
                        AIãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€å…¥åŠ›ã•ã‚ŒãŸæœ¬æ–‡ï¼ˆæœ€å¤§2000æ–‡å­—ï¼‰ãŒå¤–éƒ¨ã®AI APIï¼ˆHugging Faceï¼‰ã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚é€ä¿¡ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã¯ã€AI ã«ã‚ˆã‚‹åˆ†æã¨æ„Ÿæƒ³ç”Ÿæˆã«ã®ã¿ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
                    </p>
                </div>

                <div class="space-y-3">
                    <h3 class="font-bold text-base flex items-center gap-2">
                        <i class="ph-fill ph-two text-primary"></i>
                        å…è²¬äº‹é …
                    </h3>
                    <ul class="pl-7 space-y-2 text-base-content/80 list-disc list-inside">
                        <li>æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã¯ã€é€ä¿¡ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã®å®‰å…¨æ€§ã€æ©Ÿå¯†æ€§ã€å®Œå…¨æ€§ã«ã¤ã„ã¦ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
                        <li>æ©Ÿå¯†æƒ…å ±ã€å€‹äººæƒ…å ±ã€æœªå…¬é–‹ä½œå“ãªã©ã€å¤–éƒ¨ã«é€ä¿¡ã—ãŸããªã„å†…å®¹ã¯å…¥åŠ›ã—ãªã„ã§ãã ã•ã„ã€‚</li>
                        <li>AI APIã®åˆ©ç”¨ã«ã‚ˆã‚Šç™ºç”Ÿã—ãŸã„ã‹ãªã‚‹æå®³ã«ã¤ã„ã¦ã‚‚ã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
                        <li>AIã«ã‚ˆã‚‹è©•ä¾¡ã‚„æ„Ÿæƒ³ã¯å‚è€ƒæƒ…å ±ã§ã‚ã‚Šã€æ­£ç¢ºæ€§ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
                    </ul>
                </div>

                <div class="space-y-3">
                    <h3 class="font-bold text-base flex items-center gap-2">
                        <i class="ph-fill ph-three text-primary"></i>
                        ãƒ‡ãƒ¼ã‚¿ã®å–ã‚Šæ‰±ã„
                    </h3>
                    <p class="pl-7 text-base-content/80">
                        é€ä¿¡ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã¯ã€å¤–éƒ¨AI APIã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®åˆ©ç”¨è¦ç´„ãŠã‚ˆã³ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã«å¾“ã£ã¦å‡¦ç†ã•ã‚Œã¾ã™ã€‚æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã¯ã€å¤–éƒ¨APIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã€ä½¿ç”¨ã€å…±æœ‰ã«ã¤ã„ã¦åˆ¶å¾¡ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
                    </p>
                </div>

                <div class="space-y-3">
                    <h3 class="font-bold text-base flex items-center gap-2">
                        <i class="ph-fill ph-four text-primary"></i>
                        ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è²¬ä»»
                    </h3>
                    <p class="pl-7 text-base-content/80">
                        AIãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä¸Šè¨˜ã®å†…å®¹ã‚’ç†è§£ã—ã€ãƒ‡ãƒ¼ã‚¿é€ä¿¡ã«ä¼´ã†ãƒªã‚¹ã‚¯ã‚’æ‰¿è«¾ã—ãŸã‚‚ã®ã¨ã¿ãªã•ã‚Œã¾ã™ã€‚è‘—ä½œæ¨©ã€ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼æ¨©ã€ãã®ä»–ã®æ¨©åˆ©ã‚’ä¾µå®³ã™ã‚‹å†…å®¹ã‚’é€ä¿¡ã—ãªã„ã§ãã ã•ã„ã€‚
                    </p>
                </div>

                <div class="alert alert-info mt-3 sm:mt-4">
                    <i class="ph-fill ph-lightbulb text-lg sm:text-xl flex-shrink-0"></i>
                    <div class="text-xs sm:text-sm">
                        <strong>æ¨å¥¨ï¼š</strong>å€‹äººæƒ…å ±ã‚„æ©Ÿå¯†æƒ…å ±ã‚’å«ã¾ãªã„ã€å…¬é–‹äºˆå®šã¾ãŸã¯ã‚µãƒ³ãƒ—ãƒ«ãƒ†ã‚­ã‚¹ãƒˆã§ã®ã”åˆ©ç”¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚
                    </div>
                </div>
            </div>

            <div class="p-4 sm:p-6 border-t border-base-300 flex flex-col sm:flex-row gap-2 sm:gap-3">
                <button @click="declineAITerms" class="btn btn-ghost flex-1 text-sm sm:text-base">
                    <i class="ph-bold ph-x"></i>
                    <span>åŒæ„ã—ãªã„</span>
                </button>
                <button @click="acceptAITerms" class="btn btn-primary flex-1 text-sm sm:text-base">
                    <i class="ph-bold ph-check"></i>
                    <span class="hidden xs:inline">åŒæ„ã—ã¦AIãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–</span>
                    <span class="xs:hidden">åŒæ„ã™ã‚‹</span>
                </button>
            </div>
        </div>
    </div>

    <!-- å…±æœ‰ã‚«ãƒ¼ãƒ‰ç”Ÿæˆç”¨ï¼ˆç”»é¢å¤–ã«é…ç½®ï¼‰ -->
    <div id="shareCard" style="position: fixed; left: -9999px; top: 0;">
        <div style="width: 800px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px; font-family: 'Zen Maru Gothic', sans-serif;">
            <div style="background: white; border-radius: 24px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
                <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                <div style="text-align: center; margin-bottom: 30px;">
                    <h1 style="font-size: 32px; font-weight: 900; color: #667eea; margin: 0 0 8px 0;">ç§ã®å°èª¬æˆ¦é—˜åŠ›</h1>
                    <p style="font-size: 16px; color: #64748b; margin: 0;" id="cardGenre">æ‹æ„›ï¼ˆç•°ä¸–ç•Œï¼‰</p>
                </div>
                
                <!-- ãƒ©ãƒ³ã‚¯è¡¨ç¤º -->
                <div style="text-align: center; margin-bottom: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px; padding: 30px;">
                    <div style="font-size: 100px; font-weight: 900; line-height: 1; color: white; margin: 0;" id="cardRank">B</div>
                    <div style="font-size: 32px; font-weight: 700; color: rgba(255,255,255,0.9); margin-top: 5px;" id="cardScore">65.0<span style="font-size: 18px;">/100</span></div>
                </div>
                
                <!-- ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ -->
                <div style="margin-bottom: 30px; background: #f8fafc; border-radius: 16px; padding: 20px;">
                    <canvas id="cardRadarChart" width="720" height="400"></canvas>
                </div>
                
                <!-- AIã‚³ãƒ¡ãƒ³ãƒˆ -->
                <div id="cardAICommentSection" style="background: linear-gradient(135deg, #fdf4ff 0%, #fae8ff 100%); padding: 24px; border-radius: 16px; margin-bottom: 20px; border: 2px solid #e9d5ff; display: none;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                        <span style="font-size: 20px;">ğŸ’œ</span>
                        <h3 style="font-size: 16px; font-weight: 700; color: #7c3aed; margin: 0;">AIèª­å¾Œæ„Ÿæƒ³</h3>
                    </div>
                    <p id="cardAIComment" style="font-size: 15px; line-height: 1.7; color: #1f2937; margin: 0; font-style: italic;">ã€Œç´ æ™´ã‚‰ã—ã„ä½œå“ã§ã™ï¼ã€</p>
                </div>
                
                <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
                <div style="text-align: center; padding-top: 20px; border-top: 2px solid #e2e8f0;">
                    <p style="font-size: 18px; font-weight: 700; color: #475569; margin: 0 0 4px 0;">Narou Analyzer Ultra3.2</p>
                    <p style="font-size: 12px; color: #94a3b8; margin: 0;">#ãªã‚ã†ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
const { createApp, ref, computed, watch, onMounted, nextTick } = Vue;

createApp({
    setup() {
        const inputText = ref('');
        const selectedGenre = ref('love_isekai');
        const isProcessing = ref(false);
        const stats = ref(null);
        const adviceList = ref([]);
        const isDarkMode = ref(false);
        const toastMessage = ref('');
        const toastType = ref('');
        const toastIcon = ref('');
        const isAIMode = ref(false);
        const aiComment = ref('');
        const isAIProcessing = ref(false);
        const showAITermsModal = ref(false);
        const hasAgreedToAITerms = ref(false);

        let radarChart = null;
        let sentimentChart = null;

        const scoringProfiles = {
          love_isekai: {
    name: 'æ‹æ„›ï¼ˆç•°ä¸–ç•Œï¼‰',
    desc: 'æ‹æ„›ã‚’ä¸»é¡Œã¨ã—ã€ç•°ä¸–ç•Œã‚’ä¸»ãªèˆå°ã¨ã—ãŸä½œå“ã€‚',
    targetLen: 48,
    minDialog: 42,
    weights: { vocab: 1.4, description: 1.5, dialogue: 1.5, sentiment: 1.4, ending: 1.6, viewpoint: 1.2, tempo: 1.3, redundancy: 1.2, connector: 1.1, keyword: 1.4 },
    keywords: 'æ‹|æ„›|å¿ƒ|æƒ³ã„|æ°—æŒã¡|å¥½ã|å«Œã„|åˆ‡ãªã„|èƒ¸|ãƒ‰ã‚­ãƒ‰ã‚­|è¦‹ã¤ã‚|ç¬‘é¡”|æ¶™|æŠ±ã|æ‰‹|å”‡|ã‚­ã‚¹|å‘Šç™½|ç•°ä¸–ç•Œ|é­”æ³•|è»¢ç”Ÿ|å†’é™º|' +
              'é«˜é³´|é¼“å‹•|ã¨ãã‚ã|ç„¦ãŒã‚Œ|ç†±|æ¸©ã‚‚ã‚Š|å†·ãŸ|éœ‡ãˆ|èµ¤é¢|é ¬|æŸ“ã‚|è¦–ç·š|ç³|äº¤ã‚|è§¦ã‚Œ|æŒ‡å…ˆ|é«ª|æ’«ã§|è…°|èƒŒä¸­|åæ¯|æ¯é£ã„|é¦™ã‚Š|åŒ‚ã„|ç”˜ã„|è‹¦ã—ã„|è¾›ã„|å«‰å¦¬|ç‹¬å |ç¾¨æœ›|è»½è”‘|ä¾®è”‘|çµ¶æœ›|å¸Œæœ›|ä¿¡é ¼|è£åˆ‡ã‚Š|è¨±ã—|èª“ã„|æ°¸é |é‹å‘½|çµ†|äºˆæ„Ÿ|ç›´æ„Ÿ|æˆ¸æƒ‘ã„|èºŠèº‡|è¦šæ‚Ÿ|æ±ºæ„|å®‰ã‚‰ã|å¹¸ç¦|å¹¸ã›|ä¸å¹¸ã›|å“€ã‚Œ|æƒ¨ã‚|èª‡ã‚Š|ãƒ—ãƒ©ã‚¤ãƒ‰|ç‹‚æ°—|åŸ·ç€|ä¾å­˜|ç´”æ„›|åˆæ‹|å¤±æ‹|æœªç·´|å¾©ç¸|ä¸¡ç‰‡æ€ã„|ã™ã‚Œé•ã„|èº«åˆ†å·®|æ”¿ç•¥|å¥‘ç´„|å½è£…|çœŸå®Ÿ|å˜˜|ç§˜å¯†|å™‚|èª¤è§£|' +
              'ç§|ä¿º|åƒ•|è²´æ–¹|å›|ãŠå‰|å½¼|å½¼å¥³|å°‘å¥³|å°‘å¹´|ä»¤å¬¢|æ·‘å¥³|ç´³å£«|ç‹å­|ç‹å¤ªå­|æ®¿ä¸‹|é™›ä¸‹|ç‹|ç‹å¦ƒ|å´å®¤|å…¬çˆµ|ä¾¯çˆµ|ä¼¯çˆµ|å­çˆµ|ç”·çˆµ|è¾ºå¢ƒä¼¯|é¨å£«|å›£é•·|å®°ç›¸|å´è¿‘|å¾“è€…|åŸ·äº‹|ãƒ¡ã‚¤ãƒ‰|ä¾å¥³|æ•™è‚²ä¿‚|å®¶åº­æ•™å¸«|è–å¥³|å·«å¥³|å¥³ç¥|ç¥|ç²¾éœŠ|é­”ç‹|å‹‡è€…|å†’é™ºè€…|ã‚®ãƒ«ãƒ‰|å—ä»˜|å•†äºº|å¹³æ°‘|å¥´éš·|ãƒ’ãƒ­ã‚¤ãƒ³|æ‚ªå½¹|æ‚ªå½¹ä»¤å¬¢|å–ã‚Šå·»ã|ãƒ©ã‚¤ãƒãƒ«|å½“ã¦é¦¬|ãƒ¢ãƒ–|è»¢ç”Ÿè€…|æ†‘ä¾|ãƒˆãƒªãƒƒãƒ—|' +
              'å‡ºä¼šã„|å†ä¼š|åˆ¥ã‚Œ|å©šç´„|çµå©š|å©šå§»|æ±‚å©š|ãƒ—ãƒ­ãƒãƒ¼ã‚º|ç ´æ£„|è§£æ¶ˆ|æ–­ç½ª|è¿½æ”¾|å‡¦åˆ‘|ç›£ç¦|è»Ÿç¦|é›¢ç¸|é›¢å©š|åˆå¤œ|å¯µæ„›|æººæ„›|æ„›ã•ã‚Œ|å†·é‡|è™ã’|æ”¾ç½®|ã–ã¾ã|ã‚¶ãƒã‚¡|é€†è»¢|æˆã‚Šä¸ŠãŒã‚Š|ãƒãƒ¼ãƒˆ|ç„¡åŒ|ã‚¹ã‚­ãƒ«|ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹|ãƒ¬ãƒ™ãƒ«|é‘‘å®š|ã‚¢ã‚¤ãƒ†ãƒ |ãƒãƒ¼ã‚·ãƒ§ãƒ³|ãƒ‰ãƒ¬ã‚¹|å®çŸ³|èˆè¸ä¼š|å¤œä¼š|ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼|ãŠèŒ¶ä¼š|ã‚µãƒ­ãƒ³|å­¦åœ’|æˆæ¥­|å›³æ›¸å®¤|ãƒãƒ«ã‚³ãƒ‹ãƒ¼|åº­åœ’|æ•™ä¼š|å¤§è–å ‚|ç¥æ®¿|ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³|æ£®|ç‹éƒ½|ã‚¹ãƒ­ãƒ¼ãƒ©ã‚¤ãƒ•|é–‹æ‹“|æ–™ç†|è–¬è‰|ã‚‚ãµã‚‚ãµ|ä¹™å¥³ã‚²ãƒ¼ãƒ |ã‚·ãƒŠãƒªã‚ª|ãƒ•ãƒ©ã‚°|ãƒ«ãƒ¼ãƒˆ|æ”»ç•¥|ãƒãƒƒãƒ‰ã‚¨ãƒ³ãƒ‰|ãƒãƒƒãƒ”ãƒ¼ã‚¨ãƒ³ãƒ‰|å‰ä¸–|è¨˜æ†¶|çŸ¥è­˜|ç¾ä»£|æ—¥æœ¬'
},
            love_real: {
    name: 'æ‹æ„›ï¼ˆç¾å®Ÿä¸–ç•Œï¼‰',
    desc: 'æ‹æ„›ã‚’ä¸»é¡Œã¨ã—ã€ç¾å®Ÿã«è¿‘ã—ã„ä¸–ç•Œã‚’èˆå°ã¨ã—ãŸä½œå“ã€‚',
    targetLen: 45,
    minDialog: 45,
    weights: { vocab: 1.4, description: 1.5, dialogue: 1.6, sentiment: 1.5, ending: 1.7, viewpoint: 1.2, tempo: 1.3, redundancy: 1.2, connector: 1.2, keyword: 1.3 },
    keywords: 'æ‹|æ„›|å¿ƒ|æƒ³ã„|æ°—æŒã¡|å¥½ã|å«Œã„|åˆ‡ãªã„|èƒ¸|ãƒ‰ã‚­ãƒ‰ã‚­|è¦‹ã¤ã‚|ç¬‘é¡”|æ¶™|æŠ±ã|æ‰‹|å”‡|ã‚­ã‚¹|å‘Šç™½|ãƒ‡ãƒ¼ãƒˆ|å­¦æ ¡|ä»•äº‹|æ—¥å¸¸|' +
              'é«˜é³´|é¼“å‹•|ã¨ãã‚ã|ç†±|æ¸©ã‚‚ã‚Š|å†·ãŸ|éœ‡ãˆ|èµ¤é¢|é ¬|æŸ“ã‚|è¦–ç·š|ç³|æŒ‡å…ˆ|é«ª|æ’«ã§|è…°|èƒŒä¸­|åæ¯|æ¯é£ã„|é¦™ã‚Š|åŒ‚ã„|ç”˜ã„|è‹¦ã—ã„|è¾›ã„|å«‰å¦¬|ç‹¬å |ç„¦|ä¸å®‰|æœŸå¾…|çµ¶æœ›|å¸Œæœ›|ä¿¡é ¼|è£åˆ‡ã‚Š|èª“ã„|é‹å‘½|çµ†|äºˆæ„Ÿ|ç›´æ„Ÿ|æˆ¸æƒ‘ã„|èºŠèº‡|è¦šæ‚Ÿ|å®‰ã‚‰ã|å¹¸ç¦|å¹¸ã›|ç‹‚æ°—|åŸ·ç€|ä¾å­˜|ç´”æ„›|åˆæ‹|å¤±æ‹|æœªç·´|å¾©ç¸|ä¸¡ç‰‡æ€ã„|ã™ã‚Œé•ã„|ç‰‡æ€ã„|ç§˜å¯†|å˜˜|èª¤è§£|é§†ã‘å¼•ã|' +
              'ç§|ä¿º|åƒ•|è²´æ–¹|å›|ãŠå‰|å½¼|å½¼å¥³|å½¼æ°|å…ƒã‚«ãƒ¬|å…ƒã‚«ãƒ|å¹¼é¦´æŸ“|å…ˆè¼©|å¾Œè¼©|åŒç´šç”Ÿ|å…ˆç”Ÿ|ä¸Šå¸|éƒ¨ä¸‹|åŒåƒš|ç¤¾é•·|ç§˜æ›¸|å¤«å©¦|å¦»|å¤«|æ—¦é‚£|å«|å©šç´„è€…|ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼|ã‚»ãƒ•ãƒ¬|ãƒ©ã‚¤ãƒãƒ«|å‹äºº|è¦ªå‹|å®¶æ—|å…„å¼Ÿ|å§‰å¦¹|' +
              'æ•™å®¤|æˆæ¥­|æ”¾èª²å¾Œ|éƒ¨æ´»|ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼|æœç·´|åˆå®¿|åˆ¶æœ|ãƒªãƒœãƒ³|ãƒã‚¯ã‚¿ã‚¤|ãƒ–ãƒ¬ã‚¶ãƒ¼|ã‚»ãƒ¼ãƒ©ãƒ¼|å¸­|éš£|å»Šä¸‹|å±‹ä¸Š|ä½“è‚²é¤¨|ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰|å›³æ›¸å®¤|ä¿å¥å®¤|ãƒ†ã‚¹ãƒˆ|è©¦é¨“|å‹‰å¼·|å—é¨“|å¡¾|æ–‡åŒ–ç¥­|ä½“è‚²ç¥­|ä¿®å­¦æ—…è¡Œ|å’æ¥­|å…¥å­¦|ã‚¯ãƒ©ã‚¹|å¤ä¼‘ã¿|å†¬ä¼‘ã¿|æ˜¥ä¼‘ã¿|' +
              'ä¼šç¤¾|è·å ´|ã‚ªãƒ•ã‚£ã‚¹|æ®‹æ¥­|å®šæ™‚|æœ‰çµ¦|å‡ºå¼µ|è»¢å‹¤|å°±è·|è»¢è·|é€€è·|é£²ã¿ä¼š|æ¥å¾…|ã‚¹ãƒ¼ãƒ„|ååˆº|çµ¦æ–™|ãƒœãƒ¼ãƒŠã‚¹|ãƒ–ãƒ©ãƒƒã‚¯|ãƒ›ãƒ¯ã‚¤ãƒˆ|ä¼šè­°|ãƒ—ãƒ¬ã‚¼ãƒ³|å–¶æ¥­|äº‹å‹™|' +
              'ã‚¹ãƒãƒ›|æºå¸¯|iPhone|LINE|ãƒ©ã‚¤ãƒ³|LINE|ãƒ¡ãƒ¼ãƒ«|é›»è©±|é€šè©±|ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸|æ—¢èª­|æœªèª­|è¿”ä¿¡|ç€ä¿¡|é€šçŸ¥|ãƒ–ãƒ­ãƒƒã‚¯|ã‚¹ã‚¿ãƒ³ãƒ—|SNS|ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼|ã‚¤ãƒ³ã‚¹ã‚¿|å†™çœŸ|å‹•ç”»|ã‚¢ãƒ—ãƒª|ã‚²ãƒ¼ãƒ |ç”»é¢|å……é›»|' +
              'å®¶|éƒ¨å±‹|éµ|ã‚¢ãƒ‘ãƒ¼ãƒˆ|ãƒãƒ³ã‚·ãƒ§ãƒ³|åŒæ£²|ä¸€äººæš®ã‚‰ã—|å®Ÿå®¶|ç„é–¢|ãƒªãƒ“ãƒ³ã‚°|ã‚½ãƒ•ã‚¡|ãƒ™ãƒƒãƒ‰|å¸ƒå›£|æ•|ã‚­ãƒƒãƒãƒ³|æ–™ç†|ã”é£¯|ã‚¨ãƒ—ãƒ­ãƒ³|ãŠé¢¨å‘‚|ã‚·ãƒ£ãƒ¯ãƒ¼|æ´—é¢æ‰€|æ­¯ãƒ–ãƒ©ã‚·|ãƒ‘ã‚¸ãƒ£ãƒ|ãƒ™ãƒ©ãƒ³ãƒ€|æ´—æ¿¯|æƒé™¤|ã‚¹ãƒ¼ãƒ‘ãƒ¼|ã‚³ãƒ³ãƒ“ãƒ‹|é§…|é›»è»Š|æº€å“¡|ãƒã‚¹|æ”¹æœ­|å®šæœŸ|è»Š|ãƒ‰ãƒ©ã‚¤ãƒ–|åŠ©æ‰‹å¸­|ä¿¡å·|æ¸‹æ»|' +
              'ã‚¯ãƒªã‚¹ãƒã‚¹|ã‚¤ãƒ–|ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³|ãƒ›ãƒ¯ã‚¤ãƒˆãƒ‡ãƒ¼|ãƒãƒ§ã‚³|èª•ç”Ÿæ—¥|ãƒãƒ¼ã‚¹ãƒ‡ãƒ¼|ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ|ã‚±ãƒ¼ã‚­|èŠ±æŸ|æŒ‡è¼ª|ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼|éŠåœ’åœ°|ãƒ†ãƒ¼ãƒãƒ‘ãƒ¼ã‚¯|è¦³è¦§è»Š|æ˜ ç”»|æ°´æ—é¤¨|å‹•ç‰©åœ’|æµ·|ãƒ—ãƒ¼ãƒ«|èŠ±ç«|ç¥­ã‚Š|æµ´è¡£|ç¥ç¤¾|åˆè©£|ãŠå®ˆã‚Š|ã‚«ãƒ©ã‚ªã‚±|ã‚«ãƒ•ã‚§|å–«èŒ¶åº—|ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³|å±…é…’å±‹|ãƒãƒ¼|ãƒ›ãƒ†ãƒ«|ãƒ©ãƒ–ãƒ›|å…¬åœ’|ãƒ™ãƒ³ãƒ|å¤œæ™¯|ã‚¤ãƒ«ãƒŸãƒãƒ¼ã‚·ãƒ§ãƒ³|ãŠè¦‹åˆã„|å©šæ´»|åˆã‚³ãƒ³|è¡—ã‚³ãƒ³|ãƒãƒƒãƒãƒ³ã‚°|ãƒŠãƒ³ãƒ‘|æµ®æ°—|ä¸å€«|é›¢å©š|å†å©š'
},
         fantasy_high: {
    name: 'ãƒã‚¤ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼',
    desc: 'ç¾å®Ÿä¸–ç•Œã¨ã¯ç•°ãªã‚‹ä¸–ç•Œã‚’ä¸»ãªèˆå°ã¨ã—ãŸä½œå“ã€‚',
    targetLen: 55,
    minDialog: 35,
    weights: { vocab: 1.5, description: 1.6, dialogue: 1.3, sentiment: 1.2, ending: 1.6, viewpoint: 1.2, tempo: 1.3, redundancy: 1.2, connector: 1.2, keyword: 1.5 },
    keywords: 'é­”æ³•|é­”è¡“|å‰£|å†’é™º|ãƒ‰ãƒ©ã‚´ãƒ³|ã‚¨ãƒ«ãƒ•|ãƒ‰ãƒ¯ãƒ¼ãƒ•|é­”ç‹|å‹‡è€…|ç‹å›½|åŸ|ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³|ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼|ã‚¹ã‚­ãƒ«|ãƒ¬ãƒ™ãƒ«|ç•°ä¸–ç•Œ|è»¢ç”Ÿ|' +
              'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹|èƒ½åŠ›å€¤|é‘‘å®š|ã‚¢ã‚¤ãƒ†ãƒ ãƒœãƒƒã‚¯ã‚¹|åç´|ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª|ãƒ©ãƒ³ã‚¯|ãƒ‘ãƒ¼ãƒ†ã‚£|ã‚¯ã‚¨ã‚¹ãƒˆ|ä¾é ¼|ã‚®ãƒ«ãƒ‰|å ±é…¬|ç´ æ|é­”çŸ³|è§£ä½“|é‡‘è²¨|éŠ€è²¨|éŠ…è²¨|ç‰©ä¾¡|å¸‚å ´|è¡Œå•†|' +
              'å¬å–š|è»¢ç§»|æ†‘ä¾|ãƒãƒ¼ãƒˆ|ç„¡åŒ|æœ€å¼·|æœ€å¼±|åº•è¾º|è¿½æ”¾|ã–ã¾ã|å¾©è®|é€†è»¢|æˆã‚Šä¸ŠãŒã‚Š|è¦šé†’|é€²åŒ–|æˆé•·|ä¿®è¡Œ|å¸«åŒ |å¼Ÿå­|å¤©æ‰|å‡¡äºº|åŠ£ç­‰|' +
              'ç«|æ°´|é¢¨|åœŸ|é›·|æ°·|å…‰|é—‡|è–|ç„¡|å±æ€§|ç›¸æ€§|è© å”±|ç„¡è© å”±|é­”åŠ›|ãƒãƒŠ|MP|HP|å›å¾©|æ²»ç™’|ãƒãƒ¼ã‚·ãƒ§ãƒ³|çµç•Œ|ä»˜ä¸|ã‚¨ãƒ³ãƒãƒ£ãƒ³ãƒˆ|å‘ªã„|ãƒ‡ãƒãƒ•|ãƒãƒ•|' +
              'æ”»æ’ƒ|é˜²å¾¡|å›é¿|æ–¬æ’ƒ|åˆºçª|æ‰“æ’ƒ|æ­¦æŠ€|å¥¥ç¾©|å¿…æ®º|å‰£è–|å‰£è±ª|è–å‰£|é­”å‰£|ç›¾|é§|ãƒ­ãƒ¼ãƒ–|æ–|ãƒ€ã‚¬ãƒ¼|æ§|å¼“|çŸ¢|' +
              'é­”ç‰©|ã‚´ãƒ–ãƒªãƒ³|ã‚ªãƒ¼ã‚¯|ã‚¹ãƒ©ã‚¤ãƒ |ã‚¦ãƒ«ãƒ•|ã‚ªãƒ¼ã‚¬|ãƒ¯ã‚¤ãƒãƒ¼ãƒ³|ã‚­ãƒ¡ãƒ©|ã‚¢ãƒ³ãƒ‡ãƒƒãƒ‰|ã‚¹ã‚±ãƒ«ãƒˆãƒ³|ã‚¾ãƒ³ãƒ“|ãƒªãƒƒãƒ|ãƒ´ã‚¡ãƒ³ãƒ‘ã‚¤ã‚¢|æ‚ªé­”|å¤©ä½¿|ç¥|å¥³ç¥|ç²¾éœŠ|å¦–ç²¾|ç£äºº|é­”æ—|' +
              'å¸å›½|çš‡å›½|å…¬å›½|è¾ºå¢ƒ|é ˜åœ°|é ˜ä¸»|è²´æ—|å¹³æ°‘|å¥´éš·|å•†ä¼š|ç¥æ®¿|æ•™ä¼š|è–å¥³|è³¢è€…|é­”å°å¸«|é¨å£«|å›£é•·|è¡›å…µ|ç›—è³Š|æš—æ®ºè€…|ãƒã‚¯ãƒ­ãƒãƒ³ã‚µãƒ¼|ãƒ†ã‚¤ãƒãƒ¼|å¬å–šå£«|éŒ¬é‡‘è¡“|é›å†¶|' +
              'è¿·å®®|æ·±å±¤|éšå±¤|ãƒœã‚¹|å®ç®±|ãƒˆãƒ©ãƒƒãƒ—|ç½ |é‡å–¶|ã‚­ãƒ£ãƒ³ãƒ—|æ£®|æ´çªŸ|è’é‡|éºè·¡|å¡”|æµ·|ç©º|æˆ¦å ´|æˆ¦äº‰|è»|æˆ¦ç•¥|æˆ¦è¡“|å‹åˆ©|æ•—åŒ—|å…¨æ»…|æ’¤é€€|' +
              'ä¼èª¬|ç¥è©±|æ­´å²|å¤ä»£|æ–‡æ˜|éºç‰©|ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ|ç¦å¿Œ|å°å°|è§£æ”¾|å¥‘ç´„|å¾“é­”|ä½¿ã„é­”|ç›¸æ£’|ä»²é–“|è£åˆ‡ã‚Š|ä¿¡é ¼|çµ†|é‹å‘½|ä¸–ç•Œ|è¦‡æ¨©'
},
          fantasy_low: {
    name: 'ãƒ­ãƒ¼ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼',
    desc: 'ç¾å®Ÿä¸–ç•Œã«è¿‘ã—ã„ä¸–ç•Œã«ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼è¦ç´ ã‚’å–ã‚Šå…¥ã‚ŒãŸä½œå“ã€‚',
    targetLen: 50,
    minDialog: 40,
    weights: { vocab: 1.4, description: 1.4, dialogue: 1.4, sentiment: 1.3, ending: 1.7, viewpoint: 1.2, tempo: 1.3, redundancy: 1.2, connector: 1.2, keyword: 1.3 },
    keywords: 'ä¸æ€è­°|ç•°ä¸–ç•Œ|èƒ½åŠ›|é­”æ³•|å¹½éœŠ|å¦–æ€ª|ç¥|ç¾ä»£|æ—¥å¸¸|å­¦æ ¡|è¡—|æ™®é€š|ç‰¹åˆ¥|ç¾å®Ÿ|' +
              'ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³|è¿·å®®|ã‚²ãƒ¼ãƒˆ|ç©´|ç™ºç”Ÿ|å‡ºç¾|ã‚¹ã‚¿ãƒ³ãƒ”ãƒ¼ãƒ‰|ã‚¢ã‚¦ãƒˆãƒ–ãƒ¬ã‚¤ã‚¯|æ°¾æ¿«|å´©å£Š|ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼|é­”ç‰©|ã‚ªãƒ¼ã‚¯|ã‚´ãƒ–ãƒªãƒ³|ã‚¹ãƒ©ã‚¤ãƒ |ãƒ‰ãƒ©ã‚´ãƒ³|ç´ æ|é­”çŸ³|ãƒ‰ãƒ­ãƒƒãƒ—|æ›é‡‘|è²·å–|å††|å„„|å€Ÿé‡‘|è¿”æ¸ˆ|å”ä¼š|ã‚®ãƒ«ãƒ‰|ç®¡ç†|æ”¿åºœ|è‡ªè¡›éšŠ|è­¦å¯Ÿ|ç‰¹æ®Š|å¯¾ç­–|èª²|åº|ãƒ©ã‚¤ã‚»ãƒ³ã‚¹|è¨¼|ãƒ©ãƒ³ã‚¯|ç­‰ç´š|Sç´š|æœ€å¼±|æœ€å¼·|æ¢ç´¢|ã‚·ãƒ¼ã‚«ãƒ¼|æ¢ç´¢è€…|ãƒãƒ³ã‚¿ãƒ¼|æ”»ç•¥|' +
              'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹|ã‚¹ã‚­ãƒ«|ãƒ¬ãƒ™ãƒ«|é‘‘å®š|ã‚¢ã‚¤ãƒ†ãƒ |ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª|ãƒœãƒƒã‚¯ã‚¹|åç´|ã‚·ãƒ§ãƒƒãƒ—|ã‚¬ãƒãƒ£|ãƒã‚¤ãƒ³ãƒˆ|èª²é‡‘|ãƒ­ã‚°|é€šçŸ¥|ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦|ã‚·ã‚¹ãƒ†ãƒ |ãƒœãƒ¼ãƒ‰|ç”»é¢|è¡¨ç¤º|è¦šé†’|é€²åŒ–|å›ºæœ‰|ãƒ¦ãƒ‹ãƒ¼ã‚¯|å¤©ä¸|ãƒãƒ¼ãƒˆ|ç„¡åŒ|éš è”½|éš ã™|æ­£ä½“|' +
              'é…ä¿¡|å‹•ç”»|ç”Ÿæ”¾é€|ãƒ©ã‚¤ãƒ–|ãƒãƒ£ãƒ³ãƒãƒ«|ç™»éŒ²|åŒæ¥|è¦–è´|ãƒªã‚¹ãƒŠãƒ¼|ã‚³ãƒ¡ãƒ³ãƒˆ|ã‚¹ãƒ‘ãƒãƒ£|æŠ•ã’éŠ­|åç›Š|åºƒå‘Š|ãƒã‚º|ç‚ä¸Š|ç¥­ã‚Š|ç‰¹å®š|æ™’ã—|æ²ç¤ºæ¿|ã‚¹ãƒ¬|SNS|ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼|ãƒˆãƒ¬ãƒ³ãƒ‰|æ‹¡æ•£|ã‚¢ãƒ³ãƒ|ä¿¡è€…|æœ‰å|äººæ°—|ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼|VTuber|ã‚¹ãƒˆãƒªãƒ¼ãƒãƒ¼|ãƒ‰ãƒ­ãƒ¼ãƒ³|ã‚«ãƒ¡ãƒ©|' +
              'é™°é™½|é€€é­”|é™¤éœŠ|ç¥“|å‘ªã„|éœŠ|æ‚ªéœŠ|æ€¨éœŠ|ã‚ã‚„ã‹ã—|æ€ªç•°|ã‚ªã‚«ãƒ«ãƒˆ|éƒ½å¸‚ä¼èª¬|ç¥ç¤¾|é³¥å±…|å¯º|çµç•Œ|è¡“|å¼ç¥|å·«å¥³|éœŠèƒ½|è¶…èƒ½åŠ›|ã‚¨ã‚¹ãƒ‘ãƒ¼|ã‚µã‚¤ã‚­ãƒƒã‚¯|ç•°èƒ½|å­¦åœ’|ç”Ÿå¾’ä¼š|æŠ—äº‰|' +
              'å¸°é‚„|é€†è¡Œ|å†ä¼š|è»¢ç§»|æ‹›å–š|å¹²æ¸‰|ä¾µé£Ÿ|æ±äº¬|æ—¥æœ¬|æ–°å®¿|æ¸‹è°·|ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ãŠã˜ã•ã‚“|ã‚¹ãƒãƒ›|ãƒ‹ãƒ¥ãƒ¼ã‚¹|ç·Šæ€¥|é€Ÿå ±|è­¦å ±|é¿é›£|æ—¥å¸¸|ãƒ‘ãƒ‹ãƒƒã‚¯|ãƒãƒ³ã‚·ãƒ§ãƒ³|ã‚¢ãƒ‘ãƒ¼ãƒˆ|ã‚³ãƒ³ãƒ“ãƒ‹|ã‚¹ãƒ¼ãƒ‘ãƒ¼|ãƒã‚¤ãƒˆ|ç¤¾ç•œ|ãƒ–ãƒ©ãƒƒã‚¯|æ®‹æ¥­|ä¼šç¤¾|è¾è¡¨|é€€è·'
},
            literary_pure: {
    name: 'ç´”æ–‡å­¦',
    desc: 'èŠ¸è¡“æ€§ã«é‡ãã‚’ç½®ã„ãŸä½œå“ã€‚',
    targetLen: 70,
    minDialog: 20,
    weights: { vocab: 1.8, description: 1.7, dialogue: 1.1, sentiment: 1.4, ending: 1.8, viewpoint: 1.4, tempo: 1.1, redundancy: 1.5, connector: 1.4, keyword: 1.0 },
    keywords: 'å¿ƒ|é­‚|ç”Ÿ|æ­»|æ™‚é–“|è¨˜æ†¶|æ„è­˜|å­˜åœ¨|å­¤ç‹¬|æ²ˆé»™|é¢¨æ™¯|å½±|å…‰|ç¾|èŠ¸è¡“|' +
              'æ†‚é¬±|è™šç„¡|ç„¦ç‡¥|è‘›è—¤|çŸ›ç›¾|è«¦å¿µ|å“€ã—ã¿|å˜†ã|æ…ˆã—ã¿|æ†ã‚Œã¿|å®‰ã‚‰ã|è‹¦æ‚©|çµ¶æœ›|å¸Œæœ›|å¹¸ç¦|ä¸å¹¸|ç½ª|ç½°|å€«ç†|é“å¾³|çœŸç†|å“²å­¦|å®—æ•™|ç¥|æ‚ªé­”|äººé–“|è‡ªæˆ‘|ã‚¨ã‚´|ç„¡æ„è­˜|æ·±å±¤|å¤¢|ç¾|å¹»|å¹»æƒ³|å¦„æƒ³|ç‹‚æ°—|æ­£æ°—|ç†æ€§|æ„Ÿæ€§|æœ¬èƒ½|è¡å‹•|æƒ…å‹•|æ„›æ†|å«‰å¦¬|ç¾¨æœ›|ä¾®è”‘|è»½è”‘|å°Šå³|æ¥|èª‡ã‚Š|' +
              'é›¨|é¢¨|é›ª|é›²|éœ§|éœ|é›·|åµ|ç©º|æµ·|æ³¢|å‡ª|æ½®|å·|æ°´|é›«|æ»´|æœˆ|æ˜Ÿ|å¤ªé™½|é™½å°„ã—|æœ¨æ¼ã‚Œæ—¥|å¤•æš®ã‚Œ|é»„æ˜|å¤œæ˜ã‘|é»æ˜|æœ|æ˜¼|å¤•|å¤œ|æ·±å¤œ|æœªæ˜|å­£ç¯€|æ˜¥|å¤|ç§‹|å†¬|æ¡œ|èŠ±|æ¨¹æœ¨|æ¯è‘‰|è½è‘‰|è‰|é³¥|è™«|è¶|ç£|çŒ«|çŠ¬|é‡‘é­š|' +
              'é™å¯‚|é™è¬|å–§é¨’|é›‘è¸|è·¯åœ°|å‚é“|çŸ³ç•³|ã‚¢ã‚¹ãƒ•ã‚¡ãƒ«ãƒˆ|ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆ|å£|çª“|ã‚¬ãƒ©ã‚¹|é¡|ã‚«ãƒ¼ãƒ†ãƒ³|éƒ¨å±‹|éµ|æ‰‰|å»Šä¸‹|éšæ®µ|å±‹æ ¹|å¤©äº•|åºŠ|ç•³|è¥–|éšœå­|åº­|ç¸å´|ã‚¢ãƒ‘ãƒ¼ãƒˆ|å›£åœ°|é§…|ç·šè·¯|è¸åˆ‡|é›»è»Š|ãƒã‚¹|è¡—ç¯|å…¬åœ’|ãƒ™ãƒ³ãƒ|ãƒ–ãƒ©ãƒ³ã‚³|' +
              'è‰²|åŒ‚ã„|é¦™ã‚Š|éŸ³|å£°|éŸ¿ã|è‚Œ|è§¦æ„Ÿ|æ‰‹è§¦ã‚Š|æ¸©åº¦|ç†±|å†·æ°—|æ¸©ã‚‚ã‚Š|ç—›ã¿|å‚·|ç—•|è¡€|éª¨|ç°|å¢“|è‘¬å„€|å–ªæœ|éºå½±|ç·šé¦™|ç…™è‰|ç´«ç…™|ç°çš¿|é…’|ã‚°ãƒ©ã‚¹|ãƒœãƒˆãƒ«|çˆç²|ç´…èŒ¶|æœ¬|æ›¸ç‰©|æ´»å­—|ã‚¤ãƒ³ã‚¯|ãƒšãƒ³|æ‰‹ç´™|æ—¥è¨˜|å†™çœŸ|' +
              'æ°¸é |åˆ¹é‚£|ç¬é–“|ç„¡é™|æœ‰é™|å¢ƒç•Œ|å½¼å²¸|æ­¤å²¸|æ·±æ·µ|å¥ˆè½|æµ®éŠ|æ²ˆæ®¿|æ¶ˆå¤±|æ¶ˆæ»…|å´©å£Š|å†ç”Ÿ|è¼ªå»»|é‹å‘½|å¶ç„¶|å¿…ç„¶|æ—¥å¸¸|éæ—¥å¸¸|ç¤¾ä¼š|ä¸–é–“|ä»–äºº|å®¶æ—|çˆ¶|æ¯|å…„|å§‰|å¼Ÿ|å¦¹|ç¥–çˆ¶|ç¥–æ¯|å‹äºº|æ‹äºº|åˆ¥ã‚Œ|å†ä¼š|å–ªå¤±|æ¬ è½|ç©ºè™š'
},
           literary_human: {
    name: 'ãƒ’ãƒ¥ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ',
    desc: 'äººã¨äººã¨ã®äº¤æµã€äººã®ä¸€ç”Ÿã€äººé–“ã‚‰ã—ã•ç­‰ã‚’ä¸»é¡Œã¨ã—ãŸä½œå“ã€‚',
    targetLen: 55,
    minDialog: 40,
    weights: { vocab: 1.5, description: 1.5, dialogue: 1.5, sentiment: 1.4, ending: 1.3, viewpoint: 1.3, tempo: 1.2, redundancy: 1.3, connector: 1.3, keyword: 1.2 },
    keywords: 'äººç”Ÿ|å®¶æ—|å‹æƒ…|çµ†|åˆ¥ã‚Œ|å‡ºä¼šã„|æˆé•·|è‘›è—¤|æ±ºæ–­|å¾Œæ‚”|å¸Œæœ›|æ„›|äººé–“|å¿ƒ|æ„Ÿæƒ…|' +
              'çˆ¶|æ¯|ãƒ‘ãƒ‘|ãƒãƒ|ãŠçˆ¶ã•ã‚“|ãŠæ¯ã•ã‚“|è¦ªçˆ¶|ãŠè¢‹|ç¥–çˆ¶|ç¥–æ¯|ã˜ã„ã¡ã‚ƒã‚“|ã°ã‚ã¡ã‚ƒã‚“|æ¯å­|å¨˜|å…„å¼Ÿ|å§‰å¦¹|å…„|å¼Ÿ|å§‰|å¦¹|å­«|è¦ªæˆš|å”çˆ¶|å”æ¯|å¾“å…„å¼Ÿ|ç¾©çˆ¶|ç¾©æ¯|å¤«å©¦|å¤«|å¦»|å«|å§‘|å©¿|è¦ªå­|å®¶åº­|ä¸€å®¶|å›£æ¬’|ç‹¬ã‚Š|' +
              'å‹äºº|è¦ªå‹|å¹¼é¦´æŸ“|ä»²é–“|ç›¸æ£’|éš£äºº|æ©å¸«|å…ˆç”Ÿ|ç”Ÿå¾’|åŒåƒš|ä¸Šå¸|éƒ¨ä¸‹|å…ˆè¼©|å¾Œè¼©|ä»–äºº|ä¸–é–“|ç¤¾ä¼š|åœ°åŸŸ|æ•…éƒ·|ç”°èˆ|éƒ½ä¼š|è¿‘æ‰€|è·¯åœ°|å•†åº—è¡—|å…¬åœ’|ç—…é™¢|å­¦æ ¡|è·å ´|' +
              'èª•ç”Ÿ|ç”£å£°|å¦Šå¨ |å‡ºç”£|èµ¤ã¡ã‚ƒã‚“|å­ä¾›|å¤§äºº|è€äºº|é«˜é½¢|å¯¿å‘½|æ­»|ä»–ç•Œ|è‘¬å¼|è‘¬å„€|å¢“|ä»å£‡|éºå½±|æ³•äº‹|éºç”£|ç›¸ç¶š|ä»‹è­·|èªçŸ¥ç—‡|è»Šæ¤…å­|å…¥é™¢|æ‰‹è¡“|é€€é™¢|è¦‹èˆã„|å¥åº·|ç—…æ°—|æ€ªæˆ‘|éšœå®³|ãƒªãƒãƒ“ãƒª|' +
              'çµå©š|é›¢å©š|å†å©š|å©šæ´»|è¦‹åˆã„|åˆ¥å±…|åŒå±…|é‡Œå¸°ã‚Š|å¸°çœ|å®¶å‡º|åæŠ—æœŸ|åˆæ‹|å¤±æ‹|å–§å˜©|ä»²ç›´ã‚Š|è¬ç½ª|è¨±ã—|æ„Ÿè¬|ã‚ã‚ŠãŒã¨ã†|ã”ã‚ã‚“|æ¶™|æ³£ã|ç¬‘é¡”|ç¬‘ã„å£°|æ€’ã‚Š|å«ã³|æŠ±æ“|æ¡æ‰‹|æ¸©ã‚‚ã‚Š|' +
              'ä»•äº‹|å°±è·|é€€è·|å®šå¹´|ãƒªã‚¹ãƒˆãƒ©|å¤±æ¥­|è²§ä¹|å€Ÿé‡‘|è£•ç¦|æˆåŠŸ|å¤±æ•—|æŒ«æŠ˜|å¤¢|ç›®æ¨™|ç¾å®Ÿ|å¹³å‡¡|ç‰¹åˆ¥|æ‰èƒ½|åŠªåŠ›|è‹¦åŠ´|çµ¦æ–™|ç”Ÿæ´»|æš®ã‚‰ã—|å®¶è¨ˆ|ç¯€ç´„|è´…æ²¢|' +
              'é£Ÿäº‹|ã”é£¯|æœé£Ÿ|æ˜¼é£Ÿ|å¤•é£Ÿ|æ™©é…Œ|å¼å½“|ãŠã«ãã‚Š|å‘³å™Œæ±|ã‚«ãƒ¬ãƒ¼|è‚‰ã˜ã‚ƒãŒ|æ‰‹æ–™ç†|å‘³|åŒ‚ã„|æ¹¯æ°—|é£Ÿå“|ç®¸|èŒ¶ç¢—|å°æ‰€|ã‚­ãƒƒãƒãƒ³|ã‚¹ãƒ¼ãƒ‘ãƒ¼|è²·ã„ç‰©|å€¤å¼•ã|' +
              'æ˜¥|å¤|ç§‹|å†¬|æ¡œ|æµ·|ç´…è‘‰|é›ª|æ­£æœˆ|å¤§æ™¦æ—¥|ã‚¯ãƒªã‚¹ãƒã‚¹|ç›†|ç¥­ã‚Š|èŠ±ç«|èª•ç”Ÿæ—¥|è¨˜å¿µæ—¥|ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ|æ‰‹ç´™|å†™çœŸ|ã‚¢ãƒ«ãƒãƒ |æ€ã„å‡º|è¨˜æ†¶|éå»|æœªæ¥|ç¾åœ¨|æ™‚é–“|æ™‚è¨ˆ|æ—¥è¨˜|ç´„æŸ|ç§˜å¯†|å˜˜|çœŸå®Ÿ|ä¿¡é ¼|è£åˆ‡ã‚Š|èª¤è§£'
},
           literary_history: {
    name: 'æ­´å²',
    desc: 'éå»ã‚’èˆå°ã«ã—ãŸä½œå“ã€‚æ™‚ä»£å°èª¬ã€ã‚¿ã‚¤ãƒ ãƒˆãƒ©ãƒ™ãƒ«ã‚‚ã®ã‚’å«ã‚€ã€‚',
    targetLen: 60,
    minDialog: 30,
    weights: { vocab: 1.7, description: 1.5, dialogue: 1.3, sentiment: 1.2, ending: 1.2, viewpoint: 1.3, tempo: 1.2, redundancy: 1.3, connector: 1.3, keyword: 1.4 },
    keywords: 'ä¾|æ­¦å£«|æ­¦å°†|å…µ|è»å‹¢|é¨é¦¬|åˆ€|å‰£|æ§|å¼“|é‰„ç ²|ç«ç¸„éŠƒ|ç”²å†‘|é§|å…œ|åŸ|å¤©å®ˆ|çŸ³å£|å €|æ®¿|ä¸»å›|å®¶è‡£|éƒå…š|å§«|å¥¥æ–¹|å´å®¤|å°†è»|å¤§å|å…¬æ–¹|å¹•åºœ|æœå»·|å¸|å¤©çš‡|å…¬å®¶|é–¢ç™½|å¤ªé–¤|åŸ·æ¨©|æˆ¦|åˆæˆ¦|æˆ¦å ´|é™£|æœ¬é™£|é¦–|å¤©ä¸‹|çµ±ä¸€|é‡æœ›|è¦‡æ¨©|æ±Ÿæˆ¸|äº¬|éƒ½|å¤§å‚|éŒå€‰|å®¤ç”º|å®‰åœŸ|æˆ¦å›½|ä¹±ä¸–|æ³°å¹³|æ˜æ²»|å¤§æ­£|ç¶­æ–°|å¹•æœ«|æ–°é¸çµ„|å¿—å£«|æµªäºº|ç‰¢äºº|å¿è€…|å¿ã³|é–“è€…|è‰|ç™¾å§“|è¾²æ°‘|ç”ºäºº|å•†äºº|è·äºº|é•·å±‹|å±‹æ•·|éŠéƒ­|å‰åŸ|èŠ±é­|éŠå¥³|èŠ¸è€…|èŒ¶å±‹|æ—…ç± |å®¿å ´|è¡—é“|é–¢æ‰€|å¿ ç¾©|å¿ èª |è£åˆ‡ã‚Š|è¬€å|ä¸‹å…‹ä¸Š|åˆ‡è…¹|ä»‹éŒ¯|ä»‡è¨ã¡|æˆæ•—|å‡¦åˆ‘|æ­¦å£«é“|ç¾©ç†|äººæƒ…|é¢ç›®|æ¥|èª‰ã‚Œ|å®¶å|è·¡ç¶™ã|é¤Šå­|æ”¿ç•¥|ä¸€æ†|å‚å‹¤äº¤ä»£|å¹´è²¢|çŸ³é«˜|ç±³|é…’|èŒ¶|ç€ç‰©|è¢´|å¸¯|é«·|åˆ€å‚·|è¡€|æ­´å²|æ™‚ä»£|éå»|æœªæ¥|ç¾ä»£|ã‚¿ã‚¤ãƒ ã‚¹ãƒªãƒƒãƒ—|ã‚¿ã‚¤ãƒ ãƒˆãƒ©ãƒ™ãƒ«|è»¢ç§»|é€†è¡Œ|æ”¹å¤‰|å²å®Ÿ|æ­£å²|IF|çŸ¥è­˜|å†…æ”¿|æ”¹é©|è¥¿æ´‹|é»’èˆ¹|é–‹å›½|æ”˜å¤·'
},
         literary_mystery: {
    name: 'æ¨ç†',
    desc: 'äº‹ä»¶ç­‰ã‚’æ¨ç†ã—ã€è¬è§£ãã‚’è¡Œã†éç¨‹ã‚’ä¸»ä½“ã¨ã—ãŸä½œå“ã€‚',
    targetLen: 55,
    minDialog: 35,
    weights: { vocab: 1.5, description: 1.5, dialogue: 1.4, sentiment: 1.2, ending: 1.3, viewpoint: 1.4, tempo: 1.3, redundancy: 1.4, connector: 1.5, keyword: 1.3 },
    keywords: 'äº‹ä»¶|æ®ºäºº|çŠ¯äºº|æ¨ç†|è¨¼æ‹ |ã‚¢ãƒªãƒã‚¤|ãƒˆãƒªãƒƒã‚¯|è¬|æ‰‹ãŒã‹ã‚Š|æœæŸ»|åˆ‘äº‹|æ¢åµ|çœŸç›¸|çŠ¯ç½ª|' +
              'æ­»ä½“|éºä½“|è¢«å®³è€…|åŠ å®³è€…|å®¹ç–‘è€…|å‚è€ƒäºº|ç›®æ’ƒè€…|å…±çŠ¯|é»’å¹•|çœŸçŠ¯äºº|æ„‰å¿«çŠ¯|ã‚µã‚¤ã‚³ãƒ‘ã‚¹|ã‚¹ãƒˆãƒ¼ã‚«ãƒ¼|éºæ—|å†¤ç½ª|åæ¢åµ|åŠ©æ‰‹|ãƒ¯ãƒˆã‚½ãƒ³|è­¦éƒ¨|è­¦è¦–|é‘‘è­˜|æ¤œæ­»|è§£å‰–|å¼è­·å£«|æ¤œäº‹|è­¦å¯Ÿ|å…¬å®‰|çµ„ç¹”|' +
              'ç¾å ´|ä¿å­˜|æ¤œè¨¼|è¦åˆ¶ç·š|èãè¾¼ã¿|å¼µã‚Šè¾¼ã¿|å°¾è¡Œ|äº‹æƒ…è´å–|å–ã‚Šèª¿ã¹|è‡ªä¾›|é»™ç§˜|å¦èª|è‡ªé¦–|é€®æ•|ä»¤çŠ¶|æ™‚åŠ¹|æœªè§£æ±º|ã‚³ãƒ¼ãƒ«ãƒ‰ã‚±ãƒ¼ã‚¹|' +
              'å¯†å®¤|ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ã‚µãƒ¼ã‚¯ãƒ«|å­¤å³¶|æ´‹é¤¨|åµ|é›ªå±±|å±±è˜|åœ°ä¸‹å®¤|å±‹æ ¹è£|å»ƒå¢Ÿ|éµ|æ–½éŒ |æŠœã‘é“|éš ã—é€šè·¯|' +
              'åˆºæ®º|çµæ®º|æ¯’æ®º|æ’²æ®º|éŠƒæ®º|æººæ­»|ç„¼æ­»|è‡ªæ®º|ä»–æ®º|äº‹æ•…|ç—…æ­»|å½è£…|å·¥ä½œ|è¦‹ç«‹ã¦|ãƒãƒ©ãƒãƒ©|çŒŸå¥‡|é€£ç¶š|èª˜æ‹|è„…è¿«|äººè³ª|èº«ä»£é‡‘|å¼·ç›—|çªƒç›—|æ”¾ç«|' +
              'å‡¶å™¨|ãƒŠã‚¤ãƒ•|æ‹³éŠƒ|ãƒ­ãƒ¼ãƒ—|æ¯’|é’é…¸ã‚«ãƒª|è–¬ç‰©|ç¡çœ è–¬|æŒ‡ç´‹|è¶³è·¡|è¡€ç—•|ãƒ«ãƒŸãƒãƒ¼ãƒ«|DNA|æ¯›é«ª|ç¡ç…™|å”¾æ¶²|æ­¯å‹|æ­»äº¡æ¨å®šæ™‚åˆ»|æ­»å› |' +
              'å‹•æ©Ÿ|æ€¨æ¨|å¾©è®|å«‰å¦¬|ç—´æƒ…|é‡‘éŠ­|å€Ÿé‡‘|éºç”£|ä¿é™ºé‡‘|å£å°ã˜|çªç™º|è¨ˆç”»|è¡å‹•|æ­£å½“é˜²è¡›|ç·Šæ€¥é¿é›£|æ®ºæ„|æ‚ªæ„|' +
              'è«–ç†|ãƒ­ã‚¸ãƒƒã‚¯|æ¼”ç¹¹|å¸°ç´|æ¶ˆå»æ³•|çŸ›ç›¾|ç ´ç¶»|å˜˜|å¿ƒç†|è¦³å¯Ÿ|æ´å¯Ÿ|é•å’Œæ„Ÿ|ç›´æ„Ÿ|ä»®èª¬|è¨¼æ˜|è«–ç ´|æŒ‡æ‘˜|æš´ã|è§£æ˜|è§£æ±º|' +
              'ä¼ç·š|å›å|ãƒŸã‚¹ãƒªãƒ¼ãƒ‰|å™è¿°|ã©ã‚“ã§ã‚“è¿”ã—|æš—å·|ãƒ€ã‚¤ã‚¤ãƒ³ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸|äºˆå‘ŠçŠ¶|æŒ‘æˆ¦çŠ¶|ä¸åœ¨è¨¼æ˜|å…¥æ›¿ãˆ|åŒå­|å¤‰è£…|æŒ‡åæ‰‹é…|é˜²çŠ¯ã‚«ãƒ¡ãƒ©|é€šè©±å±¥æ­´|GPS|SNS|æ‹¡æ•£'
},
            literary_horror: {
    name: 'ãƒ›ãƒ©ãƒ¼',
    desc: 'èª­è€…ã«ææ€–æ„Ÿã‚’ä¸ãˆã‚‹ã“ã¨ã‚’ä¸»é¡Œã¨ã—ãŸä½œå“ã€‚',
    targetLen: 50,
    minDialog: 30,
    weights: { vocab: 1.4, description: 1.7, dialogue: 1.2, sentiment: 1.5, ending: 1.4, viewpoint: 1.3, tempo: 1.4, redundancy: 1.2, connector: 1.2, keyword: 1.3 },
    keywords: 'ææ€–|æ€–ã„|ä¸æ°—å‘³|é—‡|å½±|è¡€|æ­»|å«ã³|æ‚²é³´|éœ‡ãˆ|å¿ƒè‡“|èƒŒç­‹|å†·ã‚„æ±—|å¹½éœŠ|æ€ªç•°|å‘ªã„|' +
              'æš—é—‡|æ¼†é»’|æ·±å¤œ|ä¸‘ä¸‰ã¤æ™‚|å¤œé“|è¡—ç¯|ç‚¹æ»…|åœé›»|éœ§|é›¨|åµ|é›·|é™å¯‚|ç„¡éŸ³|è€³é³´ã‚Š|ç•°è‡­|è…è‡­|ç”Ÿè‡­ã„|ã‚«ãƒ“|åŸƒ|å»ƒå¢Ÿ|å»ƒå±‹|äº‹æ•…ç‰©ä»¶|ãƒˆãƒ³ãƒãƒ«|ç—…é™¢|å­¦æ ¡|ãƒˆã‚¤ãƒ¬|é¡|äº•æˆ¸|éš™é–“|æŠ¼ã—å…¥ã‚Œ|ãƒ™ãƒƒãƒ‰ã®ä¸‹|åœ°ä¸‹å®¤|å±‹æ ¹è£|å»Šä¸‹|éšæ®µ|ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼|' +
              'æ‚ªå¯’|é³¥è‚Œ|æˆ¦æ…„|ãƒ‘ãƒ‹ãƒƒã‚¯|éŒ¯ä¹±|ç‹‚æ°—|ç™ºç‹‚|æ­£æ°—|å¹»è¦š|å¹»è´|å¦„æƒ³|æ‚ªå¤¢|é‡‘ç¸›ã‚Š|éº»ç—º|å‘¼å¸|éå‘¼å¸|æ¯åˆ‡ã‚Œ|å‹•æ‚¸|é¼“å‹•|æ¿€ç—›|è‹¦ç—›|åãæ°—|å˜”å|å¤±ç¦|æ°—çµ¶|å‘†ç„¶|å‡è¦–|ç¡¬ç›´|' +
              'è¦–ç·š|æ°—é…|è¶³éŸ³|ç‰©éŸ³|ãƒãƒƒã‚¯|ãƒ©ãƒƒãƒ—éŸ³|è»‹ã‚€|é–‹ã|é–‰ã¾ã‚‹|è¦—ã|è¦‹ã¤ã‚ã‚‹|è¿½ã„ã‹ã‘ã‚‹|é€ƒã’ã‚‹|éš ã‚Œã‚‹|è¿«ã‚‹|é€™ã†|æ´ã‚€|è§¦ã‚Œã‚‹|æ’«ã§ã‚‹|å›ã|ç¬‘ã†|æ³£ã|ç¨ã‚€|' +
              'æ€¨éœŠ|æ‚ªéœŠ|ç”ŸéœŠ|åœ°ç¸›éœŠ|æµ®éŠéœŠ|äº¡éœŠ|æ­»ç¥|æ‚ªé­”|å¦–æ€ª|åŒ–ã‘ç‰©|æ€ªç‰©|ç•°å½¢|äººå¤–|é¬¼|ã‚¾ãƒ³ãƒ“|æ®ºäººé¬¼|ã‚µã‚¤ã‚³ãƒ‘ã‚¹|ã‚¹ãƒˆãƒ¼ã‚«ãƒ¼|ç•°å¸¸è€…|éš£äºº|å­ä¾›|å¥³|è€å©†|äººå½¢|æ—¥æœ¬äººå½¢|ä»®é¢|ãƒ”ã‚¨ãƒ­|' +
              'é®®è¡€|è¡€é£›æ²«|è‚‰|éª¨|å†…è‡“|æ­»ä½“|éºä½“|ç™½éª¨|è…æ•—|åˆ‡æ–­|é¦–|ç›®ç‰|é«ª|é•·ã„é«ª|çˆª|ç‰™|å‚·|ç—•|ç—£|ç«å‚·|ãƒŸã‚¤ãƒ©|' +
              'éƒ½å¸‚ä¼èª¬|å™‚|æ€ªè«‡|ç™¾ç‰©èª|è‚è©¦ã—|å¿ƒéœŠ|ã‚¹ãƒãƒƒãƒˆ|å†™çœŸ|å‹•ç”»|é…ä¿¡|ãƒã‚¤ã‚º|ãƒã‚°|æ–‡å­—åŒ–ã‘|ã‚¹ãƒãƒ›|ç€ä¿¡|éé€šçŸ¥|ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸|ãƒã‚§ãƒ¼ãƒ³ãƒ¡ãƒ¼ãƒ«|æ²ç¤ºæ¿|å„€å¼|é™éœŠ|ã‚³ãƒƒã‚¯ãƒªã•ã‚“|ã²ã¨ã‚Šã‹ãã‚Œã‚“ã¼|' +
              'æ®ºå®³|æ®ºæ„|æ¨ã¿|æ†æ‚ª|å¾©è®|ç¥Ÿã‚Š|å› ç¸|å„ç½|ä¸å‰|äºˆè¨€|è­¦å‘Š|ã‚¿ãƒ–ãƒ¼|ç¦å¿Œ|å°å°|çµç•Œ|ãŠæœ­|ãŠå®ˆã‚Š|å¡©|ç¥ç¤¾|å¯º|å¢“|å¢“åœ°|éœŠåœ’|è‘¬å¼|ç·šé¦™|ä»å£‡'
},
           literary_action: {
    name: 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³',
    desc: 'æˆ¦é—˜æå†™ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚·ãƒ¼ãƒ³ã‚’ä¸»ä½“ã¨ã—ãŸä½œå“ã€‚',
    targetLen: 30,
    minDialog: 30,
    weights: { vocab: 1.3, description: 1.5, dialogue: 1.3, sentiment: 1.2, ending: 1.4, viewpoint: 1.2, tempo: 1.6, redundancy: 1.3, connector: 1.2, keyword: 1.3 },
    keywords: 'æˆ¦ã„|æ”»æ’ƒ|é˜²å¾¡|å‰£|éŠƒ|çˆ†ç™º|ç–¾èµ°|è·³èº|å›é¿|ä¸€æ’ƒ|å¿…æ®º|å€’ã™|æ•µ|ãƒãƒˆãƒ«|æˆ¦é—˜|' +
              'æ®´|è¹´|æ–¬|åˆº|æ’ƒ|å°„|æŠ•|é£›|èµ°|é§†|å—|é¿|è±¨|å¼¾|é˜²|æ®º|å£Š|ç •|è£‚|ç©¿|è²«|æ–­|æ»|çµ|ä¼|éš |æ§‹|ç‹™|' +
              'æ‹³|è¶³|è„š|è‚˜|è†|æŒ‡|çˆª|ç‰™|é ­|é¦–|å–‰|å¿ƒè‡“|è…¹|èƒŒ|è…•|è‚©|è„‡|æ€¥æ‰€|æ­»è§’|éš™|æ­£ä¸­ç·š|å‹•ä½“è¦–åŠ›|åå°„ç¥çµŒ|' +
              'åˆ€|åˆƒ|æ§|æ–§|æ§Œ|ç›¾|é§|å…œ|ãƒŠã‚¤ãƒ•|ãƒ€ã‚¬ãƒ¼|ã‚¯ãƒŠã‚¤|æ‰‹è£å‰£|æš—å™¨|å¼“|çŸ¢|ã‚¯ãƒ­ã‚¹ãƒœã‚¦|å¼¾ä¸¸|ãƒã‚¬ã‚¸ãƒ³|ãƒˆãƒªã‚¬ãƒ¼|éŠƒå£|ç…§æº–|ã‚¹ã‚³ãƒ¼ãƒ—|ãƒ©ã‚¤ãƒ•ãƒ«|ãƒã‚·ãƒ³ã‚¬ãƒ³|ãƒãƒ³ãƒ‰ã‚¬ãƒ³|æ•£å¼¾|ç ²æ’ƒ|çˆ†å¼¾|æ‰‹æ¦´å¼¾|åœ°é›·|ãƒŸã‚µã‚¤ãƒ«|ãƒ¬ãƒ¼ã‚¶ãƒ¼|å…µå™¨|' +
              'é€£æ’ƒ|ä¹±èˆ|ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼|ç›¸æ‰“ã¡|é”è¿«ã‚Šåˆã„|ãƒ•ã‚§ã‚¤ãƒ³ãƒˆ|ç‰½åˆ¶|ç‰¹æ”»|å¥‡è¥²|å¼·è¥²|è¿æ’ƒ|åŒ…å›²|çªç ´|æ’¤é€€|è¿½æ’ƒ|ä¹±æˆ¦|æ¶ˆè€—æˆ¦|ç·åŠ›æˆ¦|æ±ºæˆ¦|ä¸€é¨æ‰“ã¡|ã‚¿ã‚¤ãƒãƒ³|' +
              'è¡æ’ƒ|åå‹•|è½ŸéŸ³|çˆ†éŸ³|é‡‘å±éŸ³|ç«èŠ±|é–ƒå…‰|ç¡ç…™|ç ‚ç…™|è¡€ç…™|åœŸç…™|ç²‰å¡µ|æ®‹åƒ|é¢¨åœ§|æ®ºæ°—|é—˜æ°—|è¦‡æ°—|å¨åœ§|ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼|ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³|èˆˆå¥®|ç‹‚ä¹±|è¦šé†’|' +
              'æ¿€ç—›|éˆç—›|ç—ºã‚Œ|å‡ºè¡€|åè¡€|éª¨æŠ˜|æ‰“æ’²|è£‚å‚·|ç€•æ­»|å³æ­»|æº€èº«å‰µç—|é™ç•Œ|ç–²åŠ´|æ¯åˆ‡ã‚Œ|éå‘¼å¸|å†·ã‚„æ±—|è„‚æ±—|éœ‡ãˆ|ç¡¬ç›´|æ°—çµ¶|æ„è­˜|ç”Ÿå­˜|æ­»äº¡|' +
              'å‹è² |å‹åˆ©|æ•—åŒ—|æ±ºç€|å„ªå‹¢|åŠ£å‹¢|é€†è»¢|æ²¹æ–­|æ…¢å¿ƒ|æœ¬æ°—|å…¨åŠ›|åº•åŠ›|å¥¥ç¾©|ç§˜æŠ€|ã‚¹ã‚­ãƒ«|èƒ½åŠ›|ãƒãƒ¼ãƒˆ|ç„¡åŒ|æœ€å¼·|æœ€é€Ÿ|æ€ªç‰©|åŒ–ã‘ç‰©|å¼·è€…|å¼±è€…|ç²ç‰©|ç‹©ã‚Š|æˆ¦å ´|ä¿®ç¾…å ´'
},
           literary_comedy: {
    name: 'ã‚³ãƒ¡ãƒ‡ã‚£ãƒ¼',
    desc: 'èª­è€…ã‚’ç¬‘ã‚ã›ã‚‹ã“ã¨ã‚’ä¸»é¡Œã¨ã—ãŸä½œå“ã€‚',
    targetLen: 35,
    minDialog: 55,
    weights: { vocab: 1.3, description: 1.2, dialogue: 1.7, sentiment: 1.3, ending: 1.5, viewpoint: 1.1, tempo: 1.6, redundancy: 1.2, connector: 1.2, keyword: 1.2 },
    keywords: 'ç¬‘|çˆ†ç¬‘|ã‚®ãƒ£ã‚°|ãƒ„ãƒƒã‚³ãƒŸ|ãƒœã‚±|ãƒ‰ã‚¿ãƒã‚¿|å‹˜é•ã„|ãƒãƒ—ãƒ‹ãƒ³ã‚°|ãŠã‹ã—ã„|é¢ç™½|ãƒã‚«|ã‚¢ãƒ›|ãƒ¦ãƒ¼ãƒ¢ã‚¢|' +
              'å¹ãå‡º|è…¹ç­‹|å´©å£Š|è‰|www|ï¼ˆç¬‘ï¼‰|è‹¦ç¬‘|å¤±ç¬‘|å¤§çˆ†ç¬‘|ãƒ‹ãƒ¤ãƒ‹ãƒ¤|ã‚²ãƒ©|æŠ±è…¹çµ¶å€’|æ»‘ç¨½|èŒ¶ç•ª|ã‚³ãƒ³ãƒˆ|æ¼«æ‰|ã‚ªãƒ|ãƒ•ãƒª|ä¼ç·š|å°ç„¡ã—|' +
              'ã‚«ã‚ªã‚¹|æ··æ²Œ|ã‚·ãƒ¥ãƒ¼ãƒ«|ãƒŠãƒ³ã‚»ãƒ³ã‚¹|ä¸æ¡ç†|æ„å‘³ä¸æ˜|ç†è§£ä¸èƒ½|å¥‡è¡Œ|å¤‰äºº|å¥‡äºº|å¤‰æ…‹|ç´³å£«|ãƒãƒ³ã‚³ãƒ„|ãƒ‰ã‚¸|ã†ã£ã‹ã‚Š|å¤©ç„¶|æ®‹å¿µ|ç„¡èƒ½|å¤©æ‰|ç´™ä¸€é‡|è„³ç­‹|ç­‹è‚‰|ãƒãƒƒã‚¹ãƒ«|ã‚´ãƒªãƒ©|å¨äºŒ|é»’æ­´å²|ç—›ã„|å¯’ã„|æ»‘ã‚‹|' +
              'å«ã³|çµ¶å«|æ‚²é³´|æ€’å·|ç½µå€’|èª¬æ•™|æ­£åº§|åœŸä¸‹åº§|å¹³è¬ã‚Š|é€†ã‚®ãƒ¬|ç„¡è¦–|ã‚¹ãƒ«ãƒ¼|çœŸé¡”|ãƒ‰ãƒ¤é¡”|å¤‰é¡”|é¡”èŠ¸|ç™½ç›®|æ¶™ç›®|é¼»è¡€|æ»æ±—|å†·ã‚„æ±—|ã‚¬ã‚¯ãƒ–ãƒ«|' +
              'æ®´|è¹´|å©|ãƒãƒ§ãƒƒãƒ—|ãƒãƒªã‚»ãƒ³|ã‚¹ãƒªãƒƒãƒ‘|çˆ†ç™º|è‡ªçˆ†|æš´èµ°|ä¹±å…¥|ç ´å£Š|ç²‰ç •|ç‰ç •|æ¿€çª|å¹ã£é£›|ç©º|æ˜Ÿ|' +
              'ãƒ¡ã‚¿|ãƒ‘ãƒ­ãƒ‡ã‚£|ã‚ªãƒãƒ¼ã‚¸ãƒ¥|å¤©ä¸¼|ãŠç´„æŸ|ãƒ†ãƒ³ãƒ—ãƒ¬|ãƒ•ãƒ©ã‚°|å›å|ã”éƒ½åˆ|ä½œè€…|ç¥|ä¸»äººå…¬|è£œæ­£|ãƒãƒ¼ãƒˆ|ã‚¤ãƒ³ãƒ•ãƒ¬|' +
              'è²§ä¹|é‡‘æ¬ |å€Ÿé‡‘|ç¤¾ç•œ|ãƒ‹ãƒ¼ãƒˆ|å¼•ãã“ã‚‚ã‚Š|ãƒªã‚¢å……|çˆ†ç™ºã—ã‚|ãƒœãƒƒãƒ|é™°ã‚­ãƒ£|é™½ã‚­ãƒ£|å…¨è£¸|ãƒ‘ãƒ³ãƒ„|ãƒ¢ã‚¶ã‚¤ã‚¯|ãƒ”ãƒ¼éŸ³|è¦åˆ¶|æ”¾é€äº‹æ•…|ç•°æ¬¡å…ƒ|å®‡å®™'
},
           sf_vr: {
    name: 'VRã‚²ãƒ¼ãƒ ',
    desc: 'VRæŠ€è¡“ã‚’åˆ©ç”¨ã—ãŸã‚²ãƒ¼ãƒ ãŒä¸»ä½“ã¨ãªã‚‹ä½œå“ã€‚',
    targetLen: 50,
    minDialog: 40,
    weights: { vocab: 1.4, description: 1.4, dialogue: 1.4, sentiment: 1.2, ending: 1.3, viewpoint: 1.2, tempo: 1.4, redundancy: 1.3, connector: 1.2, keyword: 1.5 },
    keywords: 'VR|AR|MR|ã‚²ãƒ¼ãƒ |ä»®æƒ³|ç¾å®Ÿ|ãƒ­ã‚°ã‚¤ãƒ³|ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ|ã‚¹ã‚­ãƒ«|ãƒ¬ãƒ™ãƒ«|ã‚¯ã‚¨ã‚¹ãƒˆ|ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³|ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼|NPC|AI|äººå·¥çŸ¥èƒ½|ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹|' +
              'ãƒ•ãƒ«ãƒ€ã‚¤ãƒ–|ãƒ˜ãƒƒãƒ‰ã‚®ã‚¢|ã‚«ãƒ—ã‚»ãƒ«|è„³æ³¢|æ¥ç¶š|ãƒªãƒ³ã‚¯|ãƒ€ã‚¤ãƒ–|ã‚µãƒ¼ãƒãƒ¼|ãƒ©ã‚°|å›ç·š|ãƒã‚°|ã‚°ãƒªãƒƒãƒ|ãƒãƒ¼ãƒˆ|ä¸æ­£|BAN|å¢ãƒãƒ³|é‹å–¶|GM|é–‹ç™º|ã‚¢ãƒ—ãƒ‡|ãƒ¡ãƒ³ãƒ†|ãƒ‘ãƒƒãƒ|ãƒŠãƒ¼ãƒ•|å¼·åŒ–|èª¿æ•´|' +
              'ã‚¢ãƒã‚¿ãƒ¼|ã‚­ãƒ£ãƒ©ãƒ¡ã‚¤ã‚¯|ã‚­ãƒ£ãƒ©ã‚¯ãƒª|ç¨®æ—|äººé–“|ã‚¨ãƒ«ãƒ•|ç£äºº|è·æ¥­|ã‚¸ãƒ§ãƒ–|ã‚¯ãƒ©ã‚¹|ç”Ÿç”£|é›å†¶|éŒ¬é‡‘|æ–™ç†|è£ç¸«|é‡£ã‚Š|æ¡é›†|æ¡æ˜|è¾²æ¥­|ãƒ†ã‚¤ãƒ |å¾“é­”|ãƒšãƒƒãƒˆ|' +
              'HP|MP|STR|VIT|INT|AGI|DEX|LUK|æ”»æ’ƒåŠ›|é˜²å¾¡åŠ›|æ•æ·|å¹¸é‹|ç†Ÿç·´åº¦|çµŒé¨“å€¤|EXP|SP|ã‚«ãƒ³ã‚¹ãƒˆ|æ¥µæŒ¯ã‚Š|ãƒ“ãƒ«ãƒ‰|ã‚¢ãƒ¼ãƒ„|é­”æ³•|ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯|ãƒ‘ãƒƒã‚·ãƒ–|ã‚¢ã‚¯ãƒ†ã‚£ãƒ–|ã‚¯ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ |ãƒªã‚­ãƒ£ã‚¹ãƒˆ|ãƒãƒ•|ãƒ‡ãƒãƒ•|' +
              'ãƒ¡ãƒ‹ãƒ¥ãƒ¼|ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦|ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª|ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸|ã‚¢ã‚¤ãƒ†ãƒ |ãƒœãƒƒã‚¯ã‚¹|è£…å‚™|æ­¦å™¨|é˜²å…·|ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼|ãƒãƒ¼ã‚·ãƒ§ãƒ³|èª²é‡‘|ã‚¬ãƒãƒ£|ã‚·ãƒ§ãƒƒãƒ—|é€šè²¨|ã‚´ãƒ¼ãƒ«ãƒ‰|G|å††|ãƒªã‚¢ãƒ«ãƒãƒãƒ¼|RMT|' +
              'ãƒ¬ã‚¢|ã‚³ãƒ¢ãƒ³|ã‚¢ãƒ³ã‚³ãƒ¢ãƒ³|ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰|ãƒ¦ãƒ‹ãƒ¼ã‚¯|ã‚¨ãƒ”ãƒƒã‚¯|ç¥è©±|ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ|éš ã—|è£|é™å®š|ç§°å·|å®Ÿç¸¾|ãƒˆãƒ­ãƒ•ã‚£ãƒ¼|ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ|ã‚¯ãƒªã‚¢|ç‹¬å |ç™ºè¦‹|' +
              'ãƒ‘ãƒ¼ãƒ†ã‚£|ã‚½ãƒ­|é‡è‰¯|å›ºå®š|ã‚®ãƒ«ãƒ‰|ã‚¯ãƒ©ãƒ³|ãƒãƒ¼ãƒ |ãƒªãƒ¼ãƒ€ãƒ¼|ãƒ¡ãƒ³ãƒãƒ¼|ãƒ•ãƒ¬ãƒ³ãƒ‰|ãƒãƒ£ãƒƒãƒˆ|ãƒœã‚¤ãƒãƒ£|VC|ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸|ãƒ¡ãƒ¼ãƒ«|ç”³è«‹|ãƒ–ãƒ­ãƒƒã‚¯|' +
              'æ”»ç•¥|æ¤œè¨¼|ã‚¬ãƒå‹¢|ã‚¨ãƒ³ã‚¸ãƒ§ã‚¤å‹¢|å»ƒäºº|åˆå¿ƒè€…|æ–°è¦|å¤å‚|åœ°é›·|å§«|å›²ã„|ãƒ©ãƒ³ã‚«ãƒ¼|ãƒˆãƒƒãƒ—|æœ‰å|ãƒ—ãƒ­|' +
              'ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰|ã‚¨ãƒªã‚¢|ãƒãƒƒãƒ—|è¡—|æ‹ ç‚¹|ã‚»ãƒ¼ãƒ•ãƒ†ã‚£|ãƒªã‚¹ãƒãƒ¼ãƒ³|è˜‡ç”Ÿ|ãƒ‡ã‚¹ãƒšãƒŠ|æ­»ã«æˆ»ã‚Š|' +
              'ãƒœã‚¹|ãƒ¬ã‚¤ãƒ‰|ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼|ãƒ¢ãƒ–|ãƒ‰ãƒ­ãƒƒãƒ—|å ±é…¬|å®ç®±|ã‚¤ãƒ™ãƒ³ãƒˆ|ãƒ¯ãƒ¼ãƒ«ãƒ‰|ã‚·ãƒŠãƒªã‚ª|ã‚¹ãƒˆãƒ¼ãƒªãƒ¼|PvP|PK|Pk|ã‚­ãƒ«|æ±ºé—˜|é—˜æŠ€å ´|å¤§ä¼š|GvG|æˆ¦äº‰|æ”»åŸæˆ¦|' +
              'æ²ç¤ºæ¿|ã‚¹ãƒ¬|ãƒ¬ã‚¹|å®‰ä¾¡|Wiki|ã‚µã‚¤ãƒˆ|å‹•ç”»|é…ä¿¡|å®Ÿæ³|ç”Ÿæ”¾é€|ã‚¹ãƒˆãƒªãƒ¼ãƒãƒ¼|è¦–è´è€…|ãƒªã‚¹ãƒŠãƒ¼|åŒæ¥|ã‚³ãƒ¡ãƒ³ãƒˆ|ã‚¹ãƒ‘ãƒãƒ£|ç‚ä¸Š|ç¥­ã‚Š|æ™’ã—|ç‰¹å®š|ãƒã‚«ãƒ|ãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ã‚¤'
},
           sf_space: {
    name: 'å®‡å®™',
    desc: 'å®‡å®™ã‚’èˆå°ã¨ã—ãŸä½œå“ã€‚',
    targetLen: 60,
    minDialog: 30,
    weights: { vocab: 1.6, description: 1.6, dialogue: 1.2, sentiment: 1.1, ending: 1.2, viewpoint: 1.3, tempo: 1.3, redundancy: 1.4, connector: 1.3, keyword: 1.4 },
    keywords: 'å®‡å®™|æ˜Ÿ|æƒ‘æ˜Ÿ|éŠ€æ²³|è‰¦|èˆ¹|å®‡å®™èˆ¹|å®‡å®™äºº|ã‚¨ã‚¤ãƒªã‚¢ãƒ³|ã‚³ãƒ­ãƒ‹ãƒ¼|ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³|è»Œé“|èˆªè¡Œ|' +
              'æˆ¦è‰¦|å·¡æ´‹è‰¦|é§†é€è‰¦|ç©ºæ¯|æ¯è‰¦|è¼¸é€è‰¦|æˆ¦é—˜æ©Ÿ|æ©Ÿå‹•å…µå™¨|ãƒ­ãƒœãƒƒãƒˆ|ãƒ‘ãƒ¯ãƒ¼ãƒ‰ã‚¹ãƒ¼ãƒ„|ãƒ‰ãƒƒã‚¯|ãƒãƒ¼ãƒˆ|' +
              'è‰¦é•·|æç£|å¸ä»¤|ã‚¯ãƒ«ãƒ¼|ä¹—å“¡|ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ|æ“èˆµ|æ©Ÿé–¢|é€šä¿¡|ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼|ãƒ‰ãƒ­ã‚¤ãƒ‰|ã‚¢ãƒ³ãƒ‰ãƒ­ã‚¤ãƒ‰|ã‚µã‚¤ãƒœãƒ¼ã‚°|AI|äººå·¥çŸ¥èƒ½|' +
              'ãƒ¯ãƒ¼ãƒ—|è·³èº|äºœç©ºé–“|ã‚²ãƒ¼ãƒˆ|è¶…å…‰é€Ÿ|å…‰é€Ÿ|äºœå…‰é€Ÿ|ã‚¨ãƒ³ã‚¸ãƒ³|ã‚¹ãƒ©ã‚¹ã‚¿ãƒ¼|ãƒãƒ¼ãƒ‹ã‚¢|æ¨é€²|ç‡ƒæ–™|ã‚¨ãƒãƒ«ã‚®ãƒ¼|å‡ºåŠ›|ç‚‰|ãƒªã‚¢ã‚¯ã‚¿ãƒ¼|ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼|é‡åŠ›|åé‡åŠ›|äººå·¥é‡åŠ›|ç„¡é‡åŠ›|G|æ…£æ€§|çœŸç©º|é…¸ç´ |æ°—å¯†|å®‡å®™æœ|ãƒ˜ãƒ«ãƒ¡ãƒƒãƒˆ|ãƒã‚¤ã‚¶ãƒ¼|ã‚¨ã‚¢ãƒ­ãƒƒã‚¯|ãƒãƒƒãƒ|ãƒ–ãƒªãƒƒã‚¸|è‰¦æ©‹|' +
              'ãƒ¬ãƒ¼ã‚¶ãƒ¼|ãƒ“ãƒ¼ãƒ |ãƒ–ãƒ©ã‚¹ã‚¿ãƒ¼|ãƒ¬ãƒ¼ãƒ«ã‚¬ãƒ³|ç²’å­ç ²|ä¸»ç ²|å‰¯ç ²|æ©ŸéŠƒ|ãƒŸã‚µã‚¤ãƒ«|é­šé›·|å¼¾å¹•|æ–‰å°„|ç ²ç«|ã‚·ãƒ¼ãƒ«ãƒ‰|ãƒãƒªã‚¢|ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰|å±•é–‹|è£…ç”²|èˆ¹ä½“|éš”å£|è¿æ’ƒ|å›é¿|ãƒ­ãƒƒã‚¯ã‚ªãƒ³|ãƒ¬ãƒ¼ãƒ€ãƒ¼|ã‚»ãƒ³ã‚µãƒ¼|åå¿œ|ç…§æº–|æ•æ‰|æ’ƒå¢œ|æ’ƒæ²ˆ|è½Ÿæ²ˆ|å¤§ç ´|çˆ†æ•£|ãƒ‡ãƒ–ãƒª|æ®‹éª¸|' +
              'å¸å›½|é€£é‚¦|å…±å’Œå›½|é€£åˆ|åŒç›Ÿ|è»|è‰¦éšŠ|æˆ¦éšŠ|åˆ†è‰¦éšŠ|ç·¨éšŠ|åƒšæ©Ÿ|é™£å½¢|åŒ…å›²|çªæ’ƒ|é›¢è„±|ã‚¨ãƒ¼ã‚¹|è‹±é›„|åä¹±|ãƒ¬ã‚¸ã‚¹ã‚¿ãƒ³ã‚¹|ãƒ†ãƒ­|æµ·è³Š|å‚­å…µ|äº¤æ˜“|' +
              'å¤ªé™½|æœˆ|åœ°çƒ|ç«æ˜Ÿ|æœ¨æ˜Ÿ|åœŸæ˜Ÿ|è¡›æ˜Ÿ|å½—æ˜Ÿ|æµæ˜Ÿ|éš•çŸ³|ã‚¢ã‚¹ãƒ†ãƒ­ã‚¤ãƒ‰|å°æƒ‘æ˜Ÿ|ãƒ–ãƒ©ãƒƒã‚¯ãƒ›ãƒ¼ãƒ«|æ˜Ÿé›²|åœ°å¹³ç·š|æœªé–‹|é–‹æ‹“|ãƒ†ãƒ©ãƒ•ã‚©ãƒ¼ãƒŸãƒ³ã‚°|ç’°å¢ƒ|æ±šæŸ“|è³‡æº|æ¡æ˜|ç¬¬ä¸€æ¬¡|ç¬¬äºŒæ¬¡|å¤§æˆ¦'
},
          sf_science: {
    name: 'ç©ºæƒ³ç§‘å­¦',
    desc: 'å®Ÿåœ¨ã€éå®Ÿåœ¨ã‚’å•ã‚ãšã€ä½•ã‚‰ã‹ã®æŠ€è¡“ãƒ»ç†è«–ã®è¦ç´ ã‚’å«ã‚€ä½œå“ã€‚',
    targetLen: 65,
    minDialog: 25,
    weights: { vocab: 1.7, description: 1.6, dialogue: 1.1, sentiment: 1.0, ending: 1.2, viewpoint: 1.4, tempo: 1.2, redundancy: 1.5, connector: 1.5, keyword: 1.4 },
    keywords: 'ç§‘å­¦|æŠ€è¡“|ç†è«–|å®Ÿé¨“|ç ”ç©¶|é–‹ç™º|åšå£«|æ•™æˆ|æœªæ¥|è¿‘æœªæ¥|æ©Ÿæ¢°|ãƒ­ãƒœãƒƒãƒˆ|ã‚¢ãƒ³ãƒ‰ãƒ­ã‚¤ãƒ‰|AI|äººå·¥çŸ¥èƒ½|' +
              'ãƒ‡ãƒ¼ã‚¿|è§£æ|åˆ†æ|æ•°å€¤|è¨ˆç®—|ãƒ—ãƒ­ã‚°ãƒ©ãƒ |ã‚³ãƒ¼ãƒ‰|ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ |ã‚·ã‚¹ãƒ†ãƒ |ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯|ã‚µãƒ¼ãƒãƒ¼|ãƒãƒƒã‚­ãƒ³ã‚°|ã‚¢ã‚¯ã‚»ã‚¹|èªè¨¼|ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£|æš—å·|é›»å­|é›»è„³|ã‚µã‚¤ãƒãƒ¼|ãƒ‡ã‚¸ã‚¿ãƒ«|ä»®æƒ³|æ‹¡å¼µ|ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹|ãƒ‡ãƒã‚¤ã‚¹|ç«¯æœ«|' +
              'ç‰©ç†|æ³•å‰‡|ã‚¨ãƒãƒ«ã‚®ãƒ¼|åŸå­|åˆ†å­|ç²’å­|é‡å­|æ¬¡å…ƒ|é‡åŠ›|ç£å ´|ç›¸å¯¾æ€§|å…‰é€Ÿ|æ™‚ç©º|æ™‚é–“|ã‚¿ã‚¤ãƒ ãƒã‚·ãƒ³|ã‚¿ã‚¤ãƒ ãƒˆãƒ©ãƒ™ãƒ«|ãƒ‘ãƒ©ãƒ¬ãƒ«ãƒ¯ãƒ¼ãƒ«ãƒ‰|ä¸–ç•Œç·š|åˆ†å²|ãƒ«ãƒ¼ãƒ—|ãƒ‘ãƒ©ãƒ‰ãƒƒã‚¯ã‚¹|çŸ›ç›¾|å› æœ|' +
              'ç”Ÿç‰©|ç”Ÿå‘½|éºä¼å­|DNA|ã‚²ãƒãƒ |ã‚¯ãƒ­ãƒ¼ãƒ³|åŸ¹é¤Š|é€²åŒ–|é€€åŒ–|çªç„¶å¤‰ç•°|ã‚¦ã‚¤ãƒ«ã‚¹|ç´°èŒ|æ„ŸæŸ“|ãƒ‘ãƒ³ãƒ‡ãƒŸãƒƒã‚¯|ãƒ¯ã‚¯ãƒãƒ³|ãƒŠãƒãƒã‚·ãƒ³|ãƒŠãƒãƒ†ã‚¯|ã‚µã‚¤ãƒœãƒ¼ã‚°|ç¾©ä½“|ç”Ÿä½“|è„³|æ„è­˜|è¨˜æ†¶|äººæ ¼|è»¢é€|' +
              'æ–‡æ˜|ç¤¾ä¼š|éƒ½å¸‚|ç®¡ç†|ç›£è¦–|çµ±æ²»|æ”¿åºœ|ä¼æ¥­|ãƒ‰ãƒ­ãƒ¼ãƒ³|è‡ªå‹•|è‡ªå¾‹|æš´èµ°|åˆ¶å¾¡|ã‚¨ãƒ©ãƒ¼|æ•…éšœ|ä¿®ç†|å»ƒæ£„|ãƒªã‚µã‚¤ã‚¯ãƒ«|ã‚·ãƒ³ã‚®ãƒ¥ãƒ©ãƒªãƒ†ã‚£|æŠ€è¡“çš„ç‰¹ç•°ç‚¹|ãƒ‡ã‚£ã‚¹ãƒˆãƒ”ã‚¢|ãƒ¦ãƒ¼ãƒˆãƒ”ã‚¢|çµ‚æœ«|å´©å£Š|' +
              'ä»®èª¬|è¨¼æ˜|è«–ç†|çŸ›ç›¾|æœªçŸ¥|æ—¢çŸ¥|å¯èƒ½æ€§|ç¢ºç‡|è¦³æ¸¬|äº‹è±¡|å­˜åœ¨|èªè­˜|å€«ç†|å“²å­¦|ç¥|å‰µé€ |äººé–“|äººé¡|æ–°äººé¡'
},
           sf_panic: {
    name: 'ãƒ‘ãƒ‹ãƒƒã‚¯',
    desc: 'å¤©ç½ãƒ»æ±šæŸ“ãƒ»å¤§äº‹æ•…ãƒ»ä¾µç•¥ç­‰ã®å±æ©Ÿçš„çŠ¶æ³ä¸‹ã‚’èˆå°ã¨ã—ãŸä½œå“ã€‚',
    targetLen: 45,
    minDialog: 35,
    weights: { vocab: 1.4, description: 1.6, dialogue: 1.4, sentiment: 1.4, ending: 1.4, viewpoint: 1.3, tempo: 1.5, redundancy: 1.2, connector: 1.3, keyword: 1.3 },
    keywords: 'ç½å®³|å±æ©Ÿ|ãƒ‘ãƒ‹ãƒƒã‚¯|å´©å£Š|ç ´å£Š|é€ƒèµ°|é¿é›£|ç”Ÿå­˜|æ­»|ææ€–|æ··ä¹±|çµ¶æœ›|å¸Œæœ›|ä¾µç•¥|æ±šæŸ“|' +
              'ãƒ‘ãƒ³ãƒ‡ãƒŸãƒƒã‚¯|ã‚¢ã‚¦ãƒˆãƒ–ãƒ¬ã‚¤ã‚¯|ã‚¦ã‚¤ãƒ«ã‚¹|æ„ŸæŸ“|ç™ºç—‡|æ½œä¼|éš”é›¢|å°é–|ãƒ­ãƒƒã‚¯ãƒ€ã‚¦ãƒ³|ãƒ¯ã‚¯ãƒãƒ³|ç‰¹åŠ¹è–¬|æŠ—ä½“|å…ç–«|ãƒã‚¹ã‚¯|é˜²è­·æœ|' +
              'ã‚¾ãƒ³ãƒ“|æ„ŸæŸ“è€…|ãƒªãƒ“ãƒ³ã‚°ãƒ‡ãƒƒãƒ‰|å™›ã¾ã‚Œã‚‹|è»¢åŒ–|å¢—æ®–|æš´å¾’|æ€ªç£|å·¨å¤§ç”Ÿç‰©|ã‚¨ã‚¤ãƒªã‚¢ãƒ³|UFO|ä¾µç•¥è€…|éš•çŸ³|è¡çª|å™´ç«|åœ°éœ‡|æ´¥æ³¢|æ´ªæ°´|ç•°å¸¸æ°—è±¡|æ°·æ²³æœŸ|' +
              'åœé›»|æ–­æ°´|ã‚¬ã‚¹|ã‚¤ãƒ³ãƒ•ãƒ©|ãƒ–ãƒ©ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ|é€šä¿¡|é®æ–­|åœå¤–|ãƒãƒƒãƒˆ|SNS|ãƒ‡ãƒ|å™‚|å ±é“|ãƒ‹ãƒ¥ãƒ¼ã‚¹|ç·Šæ€¥|é€Ÿå ±|è­¦å ±|ã‚µã‚¤ãƒ¬ãƒ³|æ”¾é€|Jã‚¢ãƒ©ãƒ¼ãƒˆ|' +
              'æš´å‹•|ç•¥å¥ª|å¼·ç›—|æ”¾ç«|æ®ºäºº|æ²»å®‰|æ‚ªåŒ–|ç„¡æ³•|ãƒ’ãƒ£ãƒƒãƒãƒ¼|è­¦å¯Ÿ|è‡ªè¡›éšŠ|è»|æ”¿åºœ|æ”¾æ£„|æ©Ÿèƒ½ä¸å…¨|æˆ’å³ä»¤|' +
              'è„±å‡º|ç§»å‹•|è»Š|æ¸‹æ»|äº‹æ•…|ç‚ä¸Š|çˆ†ç™º|ç«ç½|é»’ç…™|ç“¦ç¤«|å»ƒå¢Ÿ|ã‚´ãƒ¼ã‚¹ãƒˆã‚¿ã‚¦ãƒ³|éƒ½å¸‚|ãƒ“ãƒ«|åœ°ä¸‹é‰„|ãƒˆãƒ³ãƒãƒ«|' +
              'ã‚µãƒã‚¤ãƒãƒ«|ç± åŸ|ãƒãƒªã‚±ãƒ¼ãƒ‰|å‚™è“„|é£Ÿæ–™|æ°´|ç¼¶è©°|ä¿å­˜é£Ÿ|æ­¦å™¨|ãƒãƒ¼ãƒ«|ãƒŠã‚¤ãƒ•|éŠƒ|å¼¾è–¬|ãƒ©ã‚¤ãƒˆ|ãƒ©ã‚¸ã‚ª|ãƒãƒƒãƒ†ãƒªãƒ¼|ç™ºé›»æ©Ÿ|' +
              'ã‚¹ãƒ¼ãƒ‘ãƒ¼|ã‚³ãƒ³ãƒ“ãƒ‹|ãƒ›ãƒ¼ãƒ ã‚»ãƒ³ã‚¿ãƒ¼|è–¬å±€|ç—…é™¢|å­¦æ ¡|ä½“è‚²é¤¨|é¿é›£æ‰€|ã‚­ãƒ£ãƒ³ãƒ—|ã‚·ã‚§ãƒ«ã‚¿ãƒ¼|å®‰å…¨åœ°å¸¯|ã‚»ãƒ¼ãƒ•ãƒã‚¦ã‚¹|' +
              'å®¶æ—|æ‹äºº|å‹äºº|ä»–äºº|é›†å›£|ã‚°ãƒ«ãƒ¼ãƒ—|ãƒªãƒ¼ãƒ€ãƒ¼|ç‹¬è£|ä»²é–“|å”åŠ›|å†…è¼ªæ‰ã‚|ç–‘æƒ‘|ç–‘å¿ƒæš—é¬¼|è£åˆ‡ã‚Š|è¦‹æ®ºã—|çŠ ç‰²|å›®|äººæŸ±|' +
              'å«ã³|æ‚²é³´|æ³£ãå£°|æ€’å·|ç‹‚æ°—|æ­£æ°—|éŒ¯ä¹±|ãƒ’ã‚¹ãƒ†ãƒªãƒ¼|ç–²åŠ´|ç©ºè…¹|é£¢é¤“|æ¸‡ã|æ€ªæˆ‘|å‡ºè¡€|æ­»ä½“|éºä½“|å±±ç©ã¿|æ‚ªè‡­|è…è‡­|' +
              'ã‚¿ã‚¤ãƒ ãƒªãƒŸãƒƒãƒˆ|ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³|æ•‘åŠ©|æ•‘æ´|ãƒ˜ãƒª|èˆ¹|ãƒã‚¢ã®æ–¹èˆŸ|é¸åˆ¥|å„ªå…ˆ|è¦‹æ¨ã¦ã‚‹|ç”Ÿãæ®‹ã‚‹|ç”Ÿå­˜è€…'
},
           other_fairy: {
    name: 'ç«¥è©±',
    desc: 'å¹¼å¹´ã€å…ç«¥ã«å‘ã‘ãŸå†…å®¹ã®èª­ã¿ç‰©ã€‚',
    targetLen: 35,
    minDialog: 50,
    weights: { vocab: 1.2, description: 1.4, dialogue: 1.6, sentiment: 1.3, ending: 1.3, viewpoint: 1.1, tempo: 1.3, redundancy: 1.1, connector: 1.1, keyword: 1.2 },
    keywords: 'å„ªã—ã„|æ¥½ã—ã„|ä»²é–“|å†’é™º|é­”æ³•|ç‹å­|å§«|å‹•ç‰©|æ£®|ãŠåŸ|ãƒãƒƒãƒ”ãƒ¼ã‚¨ãƒ³ãƒ‰|æ•™è¨“|' +
              'ã‚€ã‹ã—ã‚€ã‹ã—|ã‚ã‚‹ã¨ã“ã‚ã«|ãŠã˜ã„ã•ã‚“|ãŠã°ã‚ã•ã‚“|ç”·ã®å­|å¥³ã®å­|å­ä¾›|èµ¤ã¡ã‚ƒã‚“|ãŠçˆ¶ã•ã‚“|ãŠæ¯ã•ã‚“|ç‹æ§˜|å¥³ç‹æ§˜|ç¥æ§˜|å¤©ä½¿|' +
              'ã†ã•ã|ãã¾|ã­ã“|ã„ã¬|ãã¤ã­|ãŸã¬ã|ãŠãŠã‹ã¿|ãƒ©ã‚¤ã‚ªãƒ³|ã­ãšã¿|ã¨ã‚Š|å°é³¥|é­š|è™«|è¶ã€…|' +
              'å¦–ç²¾|å°äºº|å·¨äºº|é­”å¥³|é­”æ³•ä½¿ã„|ãŠã°ã‘|æ€ªç‰©|ãƒ‰ãƒ©ã‚´ãƒ³|ç«œ|äººé­š|é¬¼|' +
              'ã‚ãã‚ã|ãƒ‰ã‚­ãƒ‰ã‚­|ã‚­ãƒ©ã‚­ãƒ©|ãµã‚ãµã‚|ãƒ‹ã‚³ãƒ‹ã‚³|ãƒ”ã‚«ãƒ”ã‚«|ã©ã‚“ã©ã‚“|ã¦ãã¦ã|ã´ã‚‡ã‚“ã´ã‚‡ã‚“|ãã™ã‚“|ã—ãã—ã|ãˆãƒ¼ã‚“|' +
              'å‹é”|ä»²è‰¯ã—|å–§å˜©|ä»²ç›´ã‚Š|ç´„æŸ|å˜˜|æœ¬å½“|æ­£ç›´|å‹‡æ°—|çŸ¥æµ|åŠ›æŒã¡|æ„åœ°æ‚ª|è¦ªåˆ‡|æ©è¿”ã—|' +
              'ãŠè“å­|ã‚±ãƒ¼ã‚­|ã‚­ãƒ£ãƒ³ãƒ‡ã‚£|ãƒ‘ãƒ³|ãƒªãƒ³ã‚´|ã”ã¡ãã†|å®ç‰©|é‡‘è²¨|åœ°å›³|æ‰‹ç´™|' +
              'ãŠå®¶|å°å±‹|æ´çªŸ|å¡”|å­¦æ ¡|å…¬åœ’|ç©º|æ˜Ÿ|ãŠæœˆæ§˜|å¤ªé™½|é›²|è™¹|èŠ±|æœ¨|å·|æµ·|å±±|' +
              'å¤¢|é¡˜ã„|ãŠç¥ˆã‚Š|èª•ç”Ÿæ—¥|ã‚¯ãƒªã‚¹ãƒã‚¹|ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ|æ­Œ|ãƒ€ãƒ³ã‚¹|ãŠç¥­ã‚Š|' +
              'è¿·å­|ãŠä½¿ã„|æ—…|å‡ºç™º|å¸°ã‚Šé“|ãŸã ã„ã¾|ãŠã‹ãˆã‚Š|ã”ã‚ã‚“ãªã•ã„|ã‚ã‚ŠãŒã¨ã†|' +
              'ã‚ã§ãŸã—ã‚ã§ãŸã—|å¹¸ã›|ç¬‘é¡”|å¹³å’Œ|ä¸æ€è­°|ç§˜å¯†|ç‰©èª|ãŠè©±'
},
            other_poem: {
    name: 'è©©',
    desc: 'è¨€è‘‰ã«ç¾ã¨éŸ¿ãã‚’ä¹—ã›ã¦æƒ³ã„ã‚’è¡¨ç¾ã—ã¦ã„ã‚‹ä½œå“ã€‚',
    targetLen: 25,
    minDialog: 10,
    weights: { vocab: 1.8, description: 1.6, dialogue: 0.8, sentiment: 1.6, ending: 1.5, viewpoint: 1.2, tempo: 1.4, redundancy: 1.4, connector: 1.0, keyword: 1.0 },
    keywords: 'å¿ƒ|é­‚|é¢¨|å…‰|å½±|å¤¢|ç©º|æµ·|èŠ±|æœˆ|æ˜Ÿ|æ„›|ç¾|éŸ¿ã|æƒ³ã„|' +
              'é›¨|é›ª|é›²|éœ§|éœ|é›·|è™¹|å¤ªé™½|é™½å°„ã—|æœ¨æ¼ã‚Œæ—¥|å¤•æš®ã‚Œ|é»„æ˜|å¤œæ˜ã‘|æœ|æ˜¼|å¤•|å¤œ|æ·±å¤œ|' +
              'æ˜¥|å¤|ç§‹|å†¬|å­£ç¯€|æ¡œ|å‘æ—¥è‘µ|ç´…è‘‰|æ¯è‘‰|æ¨¹æœ¨|æ£®|æ—|å·|æ°´|é›«|æ³¢|æ½®é¨’|' +
              'è‰²|ç™½|é»’|é’|èµ¤|ç¢§|è’¼|æœ±|é‡‘|éŠ€|é€æ˜|è‰²å½©|åŒ‚ã„|é¦™ã‚Š|éŸ³|å£°|æ­Œ|æ—‹å¾‹|ãƒªã‚ºãƒ |ãƒ¡ãƒ­ãƒ‡ã‚£|' +
              'æ°¸é |åˆ¹é‚£|ç¬é–“|æ™‚é–“|è¨˜æ†¶|éå»|æœªæ¥|ç¾åœ¨|é‹å‘½|å¥‡è·¡|å¹»|å¹»æƒ³|çœŸå®Ÿ|å˜˜|ç§˜å¯†|' +
              'æ‚²ã—ã¿|å–œã³|æ€’ã‚Š|å˜†ã|ç¥ˆã‚Š|é¡˜ã„|å¸Œæœ›|çµ¶æœ›|å­¤ç‹¬|é™å¯‚|æ²ˆé»™|å®‰ã‚‰ã|ç™’ã—|ç—›ã¿|å‚·|æ¶™|ç¬‘é¡”|' +
              'è¨€è‘‰|è¨€ã®è‘‰|è©©|æ­Œ|æ‰‹ç´™|ç‰©èª|ä¸–ç•Œ|å®‡å®™|å½¼æ–¹|ç¿¼|é£›ç¿”|è‡ªç”±|æŸç¸›|ç”Ÿ|æ­»|å‘½|é¼“å‹•'
},
            other_essay: {
    name: 'ã‚¨ãƒƒã‚»ã‚¤',
    desc: 'å€‹äººçš„è¦³ç‚¹ã«ã‚ˆã‚Šæ€æƒ³ã‚„ç‰©äº‹ã‚’è«–ã˜ã¦ã„ã‚‹ä½œå“ã€‚',
    targetLen: 60,
    minDialog: 15,
    weights: { vocab: 1.6, description: 1.4, dialogue: 1.0, sentiment: 1.2, ending: 1.3, viewpoint: 1.3, tempo: 1.2, redundancy: 1.5, connector: 1.5, keyword: 1.0 },
    keywords: 'æ€ã†|è€ƒãˆã‚‹|æ„Ÿã˜ã‚‹|ç§|çµŒé¨“|æ—¥å¸¸|ç”Ÿæ´»|ç¤¾ä¼š|äººç”Ÿ|è¦–ç‚¹|æ„è¦‹|è¦³å¯Ÿ|' +
              'è€ƒå¯Ÿ|åˆ†æ|çµè«–|ç†ç”±|åŸå› |çµæœ|ç–‘å•|ä»®èª¬|æ¤œè¨¼|ç´å¾—|ç†è§£|æŠŠæ¡|èªè­˜|æ„è­˜|ç„¡æ„è­˜|' +
              'ä¸»è¦³|å®¢è¦³|å€‹äººçš„|ä¸€èˆ¬çš„|å¸¸è­˜|åè¦‹|å…ˆå…¥è¦³|ä¾¡å€¤è¦³|æ­£ç¾©|æ‚ª|æ˜¯é|è³›å¦|æ‰¹åˆ¤|è‚¯å®š|å¦å®š|å…±æ„Ÿ|åæ„Ÿ|' +
              'åŸ·ç­†|å‰µä½œ|å°èª¬|ç‰©èª|æ–‡ç« |è¡¨ç¾|èª­è€…|ä½œè€…|ãƒ¦ãƒ¼ã‚¶ãƒ¼|PV|ãƒã‚¤ãƒ³ãƒˆ|è©•ä¾¡|æ„Ÿæƒ³|ãƒ¬ãƒ“ãƒ¥ãƒ¼|ãƒ©ãƒ³ã‚­ãƒ³ã‚°|æ›¸ç±åŒ–|ã‚³ãƒ³ãƒ†ã‚¹ãƒˆ|ã‚¹ãƒ©ãƒ³ãƒ—|ãƒ—ãƒ­ãƒƒãƒˆ|ãƒã‚¿|æ›´æ–°|' +
              'å®Ÿè©±|ãƒãƒ³ãƒ•ã‚£ã‚¯ã‚·ãƒ§ãƒ³|ä½“é¨“è«‡|å¤±æ•—è«‡|æˆåŠŸè«‡|æ€ã„å‡º|è¨˜æ†¶|éå»|ç¾åœ¨|æœªæ¥|ãã£ã‹ã‘|å‹•æ©Ÿ|æ•™è¨“|' +
              'ãƒ‹ãƒ¥ãƒ¼ã‚¹|æ™‚äº‹|è©±é¡Œ|æµè¡Œ|ãƒˆãƒ¬ãƒ³ãƒ‰|å•é¡Œ|è§£æ±º|ææ¡ˆ|ä¸»å¼µ|è¨€ã„ãŸã„|ä¼ãˆãŸã„|' +
              'è¶£å‘³|ä»•äº‹|å‹‰å¼·|å­¦æ ¡|ä¼šç¤¾|æ”¿æ²»|çµŒæ¸ˆ|æ–‡åŒ–|å®—æ•™|å“²å­¦|å¿ƒç†|äººé–“é–¢ä¿‚|ã‚¹ãƒˆãƒ¬ã‚¹|æ‚©ã¿|ç›¸è«‡|' +
              'ãƒ–ãƒ­ã‚°|æ—¥è¨˜|é›‘è¨˜|å‚™å¿˜éŒ²|ãƒ¡ãƒ¢|ç‹¬ã‚Šè¨€|èªã‚Š|ç´¹ä»‹|è§£èª¬|æ–¹æ³•|ãƒã‚¦ãƒã‚¦|ã‚³ãƒ„|ã‚¢ãƒ‰ãƒã‚¤ã‚¹'
},
            other_replay: {
    name: 'ãƒªãƒ—ãƒ¬ã‚¤',
    desc: 'TRPGã®ãƒ—ãƒ¬ã‚¤çµæœã‚’æ–‡ç« ã«ã¦è¨˜éŒ²ã—ãŸã‚‚ã®ã€‚',
    targetLen: 40,
    minDialog: 60,
    weights: { vocab: 1.2, description: 1.3, dialogue: 1.7, sentiment: 1.2, ending: 1.2, viewpoint: 1.1, tempo: 1.4, redundancy: 1.1, connector: 1.2, keyword: 1.3 },
    keywords: 'ãƒ€ã‚¤ã‚¹|åˆ¤å®š|æˆåŠŸ|å¤±æ•—|ã‚¹ã‚­ãƒ«|ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼|PC|GM|ã‚»ãƒƒã‚·ãƒ§ãƒ³|ã‚·ãƒŠãƒªã‚ª|ãƒ­ãƒ¼ãƒ«|' +
              'ã‚µã‚¤ã‚³ãƒ­|1D100|2D6|å‡ºç›®|ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«|ãƒ•ã‚¡ãƒ³ãƒ–ãƒ«|æ±ºå®šçš„æˆåŠŸ|è‡´å‘½çš„å¤±æ•—|æŒ¯ã‚Šç›´ã—|æŠ€èƒ½|ãƒã‚§ãƒƒã‚¯|æŠµæŠ—|å¯¾æŠ—|é›£æ˜“åº¦|ãƒœãƒ¼ãƒŠã‚¹|ãƒšãƒŠãƒ«ãƒ†ã‚£|æœŸå¾…å€¤|' +
              'KP|ã‚­ãƒ¼ãƒ‘ãƒ¼|DM|PL|ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼|ãƒãƒ³ãƒ‰ã‚¢ã‚¦ãƒˆ|HO|ç§˜åŒ¿|æ¢ç´¢è€…|å†’é™ºè€…|NPC|é»’å¹•|ãƒ©ã‚¹ãƒœã‚¹|ç«‹ã¡çµµ|' +
              'SAN|æ­£æ°—åº¦|ç™ºç‹‚|ç‹‚æ°—|ä¸å®š|HP|MP|STR|DEX|INT|POW|APP|SIZ|EDU|ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹|èƒ½åŠ›å€¤|ã‚­ãƒ£ãƒ©ã‚·|CS|è·æ¥­|ç‰¹å¾´|' +
              'ç›®æ˜Ÿ|èãè€³|å›³æ›¸é¤¨|å¿ƒç†å­¦|èª¬å¾—|è¨€ã„ãã‚‹ã‚|ã‚ªã‚«ãƒ«ãƒˆ|å›é¿|ã‚­ãƒƒã‚¯|ã“ã¶ã—|ãƒãƒ¼ã‚·ãƒ£ãƒ«ã‚¢ãƒ¼ãƒ„|å¿œæ€¥æ‰‹å½“|åŒ»å­¦|' +
              'æˆ¦é—˜|ã‚¤ãƒ‹ã‚·ã‚¢ãƒ†ã‚£ãƒ–|ãƒ©ã‚¦ãƒ³ãƒ‰|ã‚¿ãƒ¼ãƒ³|æ”»æ’ƒ|ãƒ€ãƒ¡ãƒ¼ã‚¸|è£…ç”²|æ­¦å™¨|ã‚¢ã‚¤ãƒ†ãƒ |å‘ªæ–‡|é­”æ³•|ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ|é­”å°æ›¸|ç¥è©±ç”Ÿç‰©|' +
              'å“|ã‚ªãƒ³ã‚»|ãƒ†ã‚­ã‚»|ãƒœã‚¤ã‚»|ãƒ­ã‚°|å‹•ç”»|ä»®æƒ³å“|èŒ¶ç•ª|ä¼‘æ†©|ç›¸è«‡|ææ¡ˆ|ãƒ¡ã‚¿|æå†™|å®£è¨€|æƒ…å ±|å…±æœ‰|é–‹ç¤º|' +
              'å°å…¥|æ¢ç´¢|ã‚¯ãƒ©ã‚¤ãƒãƒƒã‚¯ã‚¹|ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°|ãƒ­ã‚¹ãƒˆ|ç”Ÿé‚„|å…¨æ»…|ãƒˆã‚¥ãƒ«ãƒ¼|ãƒãƒƒãƒ‰|ãƒãƒƒãƒ”ãƒ¼|åˆ†å²|' +
              'ç¬‘|çˆ†ç¬‘|å›°æƒ‘|çµ¶æœ›|æ‚²é³´|åˆæŒ|ç¥ˆã‚Š|ãƒªã‚¢ãƒ«|ä¸­ã®äºº'
},
       other_misc: {
    name: 'ãã®ä»–',
    desc: 'ä¸Šè¨˜ã‚¸ãƒ£ãƒ³ãƒ«ã«è©²å½“ã—ãªã„ä½œå“ã€‚',
    targetLen: 50,
    minDialog: 35,
    weights: { vocab: 1.3, description: 1.3, dialogue: 1.3, sentiment: 1.2, ending: 1.2, viewpoint: 1.2, tempo: 1.2, redundancy: 1.2, connector: 1.2, keyword: 1.0 },
    keywords: 'ç‰©èª|å°èª¬|çŸ­ç·¨|æŒç·¨|ã‚·ãƒ§ãƒ¼ãƒˆã‚·ãƒ§ãƒ¼ãƒˆ|ã‚ªãƒ ãƒ‹ãƒã‚¹|é€£ä½œ|æ—¥å¸¸|ç”Ÿæ´»|é›‘å¤š|æœªåˆ†é¡|ãƒãƒ³ã‚¸ãƒ£ãƒ³ãƒ«|' +
              'è¶£å‘³|æ–™ç†|ã‚°ãƒ«ãƒ¡|é£Ÿäº‹|é…’|ãƒ¬ã‚·ãƒ”|æ—…è¡Œ|æ•£æ­©|å†™çœŸ|éŸ³æ¥½|æ¥½å™¨|ãƒãƒ³ãƒ‰|ç¾è¡“|èŠ¸è¡“|çµµç”»|æ˜ ç”»|æœ¬|èª­æ›¸|' +
              'ãƒšãƒƒãƒˆ|çŒ«|çŠ¬|å‹•ç‰©|æ¤ç‰©|èŠ±|è‡ªç„¶|åœ’èŠ¸|è¾²æ¥­|' +
              'å®Ÿé¨“|å‰è¡›|ã‚·ãƒ¥ãƒ¼ãƒ«|ä¸æ€è­°|è¬|è‡ªç”±|ã‚«ã‚ªã‚¹|å¤¢|å¹»æƒ³|' +
              'ä»•äº‹|ãƒ“ã‚¸ãƒã‚¹|å­¦æ ¡|å­¦ç”Ÿ|å¤§äºº|å­ä¾›|ç¾ä»£|æ—¥æœ¬|ä¸–ç•Œ|æµ·å¤–|æ–‡åŒ–|é¢¨ç¿’|' +
              'å‹æƒ…|å®¶æ—|é’æ˜¥|äººç”Ÿ|' +
              'å‰µä½œ|ãƒ•ã‚£ã‚¯ã‚·ãƒ§ãƒ³|ã‚¯ãƒ­ã‚¹ã‚ªãƒ¼ãƒãƒ¼|ã‚³ãƒ©ãƒœ|IF|ãƒ‘ãƒ©ãƒ¬ãƒ«'
}
        };

        const groupedGenres = {
            'æ‹æ„›': [
                { id: 'love_isekai', name: 'æ‹æ„›ï¼ˆç•°ä¸–ç•Œï¼‰' },
                { id: 'love_real', name: 'æ‹æ„›ï¼ˆç¾å®Ÿä¸–ç•Œï¼‰' }
            ],
            'ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼': [
                { id: 'fantasy_high', name: 'ãƒã‚¤ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼' },
                { id: 'fantasy_low', name: 'ãƒ­ãƒ¼ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼' }
            ],
            'æ–‡èŠ¸': [
                { id: 'literary_pure', name: 'ç´”æ–‡å­¦' },
                { id: 'literary_human', name: 'ãƒ’ãƒ¥ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ' },
                { id: 'literary_history', name: 'æ­´å²' },
                { id: 'literary_mystery', name: 'æ¨ç†' },
                { id: 'literary_horror', name: 'ãƒ›ãƒ©ãƒ¼' },
                { id: 'literary_action', name: 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³' },
                { id: 'literary_comedy', name: 'ã‚³ãƒ¡ãƒ‡ã‚£ãƒ¼' }
            ],
            'SF': [
                { id: 'sf_vr', name: 'VRã‚²ãƒ¼ãƒ ' },
                { id: 'sf_space', name: 'å®‡å®™' },
                { id: 'sf_science', name: 'ç©ºæƒ³ç§‘å­¦' },
                { id: 'sf_panic', name: 'ãƒ‘ãƒ‹ãƒƒã‚¯' }
            ],
            'ãã®ä»–': [
                { id: 'other_fairy', name: 'ç«¥è©±' },
                { id: 'other_poem', name: 'è©©' },
                { id: 'other_essay', name: 'ã‚¨ãƒƒã‚»ã‚¤' },
                { id: 'other_replay', name: 'ãƒªãƒ—ãƒ¬ã‚¤' },
                { id: 'other_misc', name: 'ãã®ä»–' }
            ]
        };

        const currentScoringProfile = computed(() => scoringProfiles[selectedGenre.value]);

        const rankColorClass = computed(() => {
            if (!stats.value) return '';
            const r = stats.value.rank;
            if (r === 'SS' || r === 'S') return 'bg-gradient-to-b from-yellow-400 to-orange-500';
            if (r === 'A') return 'bg-gradient-to-b from-green-400 to-emerald-600';
            if (r === 'B') return 'bg-gradient-to-b from-blue-400 to-blue-600';
            if (r === 'C') return 'bg-gradient-to-b from-gray-400 to-gray-600';
            return 'bg-gradient-to-b from-red-400 to-red-600';
        });

        const rankGradient = computed(() => {
            if (!stats.value) return '';
            const r = stats.value.rank;
            if (r === 'SS' || r === 'S') return 'from-yellow-400 to-orange-500';
            if (r === 'A') return 'from-green-400 to-emerald-600';
            if (r === 'B') return 'from-blue-400 to-blue-600';
            if (r === 'C') return 'from-gray-400 to-gray-600';
            return 'from-red-400 to-red-600';
        });

        const showToast = (msg, type = 'alert-info', icon = 'ph-fill ph-info') => {
            toastMessage.value = msg;
            toastType.value = type;
            toastIcon.value = icon;
            setTimeout(() => { toastMessage.value = ''; }, 3000);
        };

        const shareResult = () => {
            if (!stats.value) return;
            const text = `Narou Analyzer Ultra3.2\nã‚¸ãƒ£ãƒ³ãƒ«: ${currentScoringProfile.value.name}\nãƒ©ãƒ³ã‚¯: ${stats.value.rank} (${stats.value.totalScore.toFixed(1)}ç‚¹)\n#ãªã‚ã†ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼`;
            if (navigator.share) {
                navigator.share({ title: 'ãªã‚ã†ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼çµæœ', text });
            } else {
                navigator.clipboard.writeText(text);
                showToast('çµæœã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼', 'alert-success', 'ph-fill ph-check-circle');
            }
        };

        // ã‚«ãƒ¼ãƒ‰ç”»åƒã‚’ç”Ÿæˆã™ã‚‹å†…éƒ¨é–¢æ•°
        const generateCardImage = async () => {
            if (!stats.value) return null;
            
            // ã‚«ãƒ¼ãƒ‰ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š
            document.getElementById('cardGenre').textContent = currentScoringProfile.value.name;
            document.getElementById('cardRank').textContent = stats.value.rank;
            document.getElementById('cardScore').innerHTML = `${stats.value.totalScore.toFixed(1)}<span style="font-size: 18px;">/100</span>`;
            
            // AIã‚³ãƒ¡ãƒ³ãƒˆã®è¡¨ç¤º/éè¡¨ç¤º
            const aiCommentSection = document.getElementById('cardAICommentSection');
            if (isAIMode.value && aiComment.value && !isAIProcessing.value) {
                aiCommentSection.style.display = 'block';
                document.getElementById('cardAIComment').textContent = `ã€Œ${aiComment.value}ã€`;
            } else {
                aiCommentSection.style.display = 'none';
            }
            
            // æ—¢å­˜ã®ãƒãƒ£ãƒ¼ãƒˆãŒã‚ã‚Œã°ç ´æ£„
            const existingChart = Chart.getChart('cardRadarChart');
            if (existingChart) {
                existingChart.destroy();
            }
            
            // ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã‚’æç”»
            const cardCanvas = document.getElementById('cardRadarChart');
            const cardCtx = cardCanvas.getContext('2d');
            
            new Chart(cardCtx, {
                type: 'radar',
                data: {
                    labels: stats.value.radarData.map(d => d.label),
                    datasets: [{
                        label: 'ã‚¹ã‚³ã‚¢',
                        data: stats.value.radarData.map(d => d.score),
                        backgroundColor: 'rgba(102, 126, 234, 0.25)',
                        borderColor: '#667eea',
                        borderWidth: 3,
                        pointBackgroundColor: '#667eea',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            min: 0,
                            max: 100,
                            ticks: {
                                stepSize: 25,
                                font: { size: 14 },
                                color: '#64748b'
                            },
                            pointLabels: {
                                font: { size: 15, weight: 'bold' },
                                color: '#334155'
                            },
                            grid: { color: '#cbd5e1' }
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            });
            
            // å°‘ã—å¾…ã£ã¦ã‹ã‚‰ã‚­ãƒ£ãƒ—ãƒãƒ£
            await new Promise(resolve => setTimeout(resolve, 500));
            
            try {
                const canvas = await html2canvas(document.getElementById('shareCard'), {
                    backgroundColor: null,
                    scale: 2,
                    logging: false
                });
                
                return canvas;
            } catch (error) {
                console.error('Card generation error:', error);
                return null;
            }
        };

        // ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼
        const copyResultText = () => {
            if (!stats.value) return;
            const text = `ç§ã®å°èª¬æˆ¦é—˜åŠ›ã¯${stats.value.rank}ãƒ©ãƒ³ã‚¯ï¼ï¼ˆ${stats.value.totalScore.toFixed(1)}ç‚¹ï¼‰\nã‚¸ãƒ£ãƒ³ãƒ«: ${currentScoringProfile.value.name}\n\n#ãªã‚ã†ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼\nhttps://limehato74.github.io/NarouAnalyzer/`;
            navigator.clipboard.writeText(text);
            showToast('ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼', 'alert-success', 'ph-fill ph-check-circle');
        };

        // ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        const downloadCard = async () => {
            showToast('ç”»åƒã‚’ç”Ÿæˆä¸­...', 'alert-info', 'ph-fill ph-image');
            
            const canvas = await generateCardImage();
            if (!canvas) {
                showToast('ç”»åƒç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ', 'alert-error', 'ph-fill ph-x-circle');
                return;
            }
            
            canvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `narou-analyzer-${stats.value.rank}-${Date.now()}.png`;
                a.click();
                URL.revokeObjectURL(url);
                
                showToast('ã‚«ãƒ¼ãƒ‰ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸï¼', 'alert-success', 'ph-fill ph-check-circle');
            });
        };

        // LINEã§å…±æœ‰
        const shareToLine = () => {
            if (!stats.value) return;
            const text = `ç§ã®å°èª¬æˆ¦é—˜åŠ›ã¯${stats.value.rank}ãƒ©ãƒ³ã‚¯ï¼ï¼ˆ${stats.value.totalScore.toFixed(1)}ç‚¹ï¼‰\nã‚¸ãƒ£ãƒ³ãƒ«: ${currentScoringProfile.value.name}\n\n#ãªã‚ã†ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼\nhttps://limehato74.github.io/NarouAnalyzer/`;
            const url = `https://line.me/R/msg/text/?${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        };

        // Xã«ç›´æ¥æŠ•ç¨¿ï¼ˆãƒ†ã‚­ã‚¹ãƒˆã®ã¿ï¼‰
        const shareToXDirect = () => {
            if (!stats.value) return;
            const text = `ç§ã®å°èª¬æˆ¦é—˜åŠ›ã¯${stats.value.rank}ãƒ©ãƒ³ã‚¯ï¼ï¼ˆ${stats.value.totalScore.toFixed(1)}ç‚¹ï¼‰\nã‚¸ãƒ£ãƒ³ãƒ«: ${currentScoringProfile.value.name}\n\n#ãªã‚ã†ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼\nhttps://limehato74.github.io/NarouAnalyzer/`;
            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        };

        watch(isDarkMode, (val) => {
            document.documentElement.setAttribute('data-theme', val ? 'night' : 'winter');
            if (stats.value) {
                nextTick(() => renderCharts(stats.value));
            }
        });

        // AIãƒ¢ãƒ¼ãƒ‰ã®åˆ‡ã‚Šæ›¿ãˆã‚’ç›£è¦–
        watch(isAIMode, (newVal, oldVal) => {
            // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãŒã‚ªãƒ³ã«ãªã‚ã†ã¨ã—ã¦ã„ã‚‹ && ã¾ã è¦ç´„ã«åŒæ„ã—ã¦ã„ãªã„
            if (newVal === true && !hasAgreedToAITerms.value) {
                // ã™ãã«ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã™
                isAIMode.value = false;
                // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
                showAITermsModal.value = true;
            }
        });

        // è¦ç´„ã«åŒæ„
        const acceptAITerms = () => {
            hasAgreedToAITerms.value = true;
            showAITermsModal.value = false;
            isAIMode.value = true;
            
            // localStorageã«ä¿å­˜ï¼ˆæ¬¡å›ä»¥é™ã¯è¡¨ç¤ºã—ãªã„ï¼‰
            try {
                localStorage.setItem('aiTermsAgreed', 'true');
            } catch (e) {
                console.warn('localStorage not available');
            }
            
            showToast('AIãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–ã—ã¾ã—ãŸ', 'alert-success', 'ph-fill ph-check-circle');
        };

        // è¦ç´„ã«åŒæ„ã—ãªã„
        const declineAITerms = () => {
            showAITermsModal.value = false;
            isAIMode.value = false;
            showToast('AIãƒ¢ãƒ¼ãƒ‰ã¯ç„¡åŠ¹ã®ã¾ã¾ã§ã™', 'alert-info', 'ph-fill ph-info');
        };

        const analyzeText = () => {
            const text = inputText.value.trim();
            if (text.length < 100) {
                showToast('100æ–‡å­—ä»¥ä¸Šã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'alert-warning', 'ph-fill ph-warning');
                return;
            }

            isProcessing.value = true;
            setTimeout(() => {
                const result = performAnalysis(text);
                stats.value = result;
                generateAdvice(result.contentMetrics, currentScoringProfile.value);
                nextTick(() => {
                    renderCharts(result);
                    document.getElementById('results-area')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    
                    // AIãƒ¢ãƒ¼ãƒ‰ãŒã‚ªãƒ³ã®å ´åˆã¯AIåˆ†æã‚‚å®Ÿè¡Œ
                    if (isAIMode.value) {
                        analyzeWithAI();
                    }
                });
                isProcessing.value = false;
            }, 300);
        };

        const onGenreChange = () => {
            // ã™ã§ã«åˆ†æçµæœãŒå­˜åœ¨ã—ã€ãƒ†ã‚­ã‚¹ãƒˆãŒ100æ–‡å­—ä»¥ä¸Šã®å ´åˆã®ã¿è‡ªå‹•å†æ¡ç‚¹
            if (stats.value && inputText.value.trim().length >= 100) {
                showToast(`${currentScoringProfile.value.name}ã§å†æ¡ç‚¹ä¸­...`, 'alert-info', 'ph-fill ph-arrows-clockwise');
                analyzeText();
            }
        };

const analyzeWithAI = async () => {
            if (!stats.value) {
                showToast('å…ˆã«åŸºæœ¬åˆ†æã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„', 'alert-warning', 'ph-fill ph-warning');
                return;
            }

            isAIProcessing.value = true;
            aiComment.value = 'AIãŒæœ¬æ–‡ã‚’ç²¾èª­ã—ã¦æ¡ç‚¹ä¸­...ï¼ˆ20ã€œ30ç§’ã‹ã‹ã‚Šã¾ã™ï¼‰';

            try {
                const profile = currentScoringProfile.value;
                
                // AIæ¡ç‚¹ç”¨ã®è©³ç´°ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆæ¡ç‚¹éƒ¨åˆ†ï¼‰
                const scoringPrompt = `ã‚ãªãŸã¯ãƒ—ãƒ­ã®å°èª¬ç·¨é›†è€…ã§ã™ã€‚ä»¥ä¸‹ã®${profile.name}ã®æœ¬æ–‡ã‚’ç²¾èª­ã—ã€å„é …ç›®ã‚’100ç‚¹æº€ç‚¹ã§æ¡ç‚¹ã—ã¦ãã ã•ã„ã€‚

ã€æœ¬æ–‡ã€‘
${inputText.value.substring(0, 2000)}

ã€æ¡ç‚¹é …ç›®ã€‘â€»${profile.name}ã®åŸºæº–ã§è©•ä¾¡
1. æå†™åŠ›ï¼ˆäº”æ„Ÿãƒ»å¿ƒç†æå†™ã®è±Šã‹ã•ï¼‰: 0-100ç‚¹
2. ä¼šè©±ã®è‡ªç„¶ã•ï¼ˆ${profile.minDialog}%å‰å¾ŒãŒç†æƒ³ï¼‰: 0-100ç‚¹
3. æ„Ÿæƒ…è¡¨ç¾ï¼ˆãƒã‚¸ãƒ†ã‚£ãƒ–/ãƒã‚¬ãƒ†ã‚£ãƒ–ã®ãƒãƒ©ãƒ³ã‚¹ï¼‰: 0-100ç‚¹
4. æ–‡æœ«ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³: 0-100ç‚¹
5. è¦–ç‚¹ã®ä¸€è²«æ€§: 0-100ç‚¹
6. æ–‡ç« ã®ãƒªã‚ºãƒ ï¼ˆé•·çŸ­ã®å¤‰åŒ–ï¼‰: 0-100ç‚¹
7. å†—é•·æ€§ã®å°‘ãªã•: 0-100ç‚¹
8. æ¥ç¶šè©ã®é©åˆ‡ã•: 0-100ç‚¹
9. ã‚¸ãƒ£ãƒ³ãƒ«é©åˆåº¦ï¼ˆ${profile.name}ã‚‰ã—ã•ï¼‰: 0-100ç‚¹
10. èªå½™ã®è±Šã‹ã•: 0-100ç‚¹

ã€å‡ºåŠ›å½¢å¼ã€‘å¿…ãšä»¥ä¸‹ã®JSONå½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
{
  "scores": {
    "description": 85,
    "dialogue": 78,
    "sentiment": 82,
    "ending": 75,
    "viewpoint": 90,
    "tempo": 80,
    "redundancy": 88,
    "connector": 76,
    "keyword": 84,
    "vocabulary": 79
  },
  "totalScore": 81.7,
  "rank": "B+"
}

â€»ãƒ©ãƒ³ã‚¯ã¯ S(95-100), A+(90-94), A(85-89), B+(80-84), B(75-79), C+(70-74), C(65-69), D(0-64)`;

                // æ„Ÿæƒ³ç”Ÿæˆç”¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆåˆ¥é€”ï¼‰
                const impressionPrompt = `ã‚ãªãŸã¯${profile.name}ãŒå¥½ããªä¸€èˆ¬èª­è€…ã§ã™ã€‚ä»¥ä¸‹ã®å°èª¬ã‚’èª­ã‚“ã§ã€ç´”ç²‹ãªèª­å¾Œæ„Ÿæƒ³ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚

ã€æœ¬æ–‡ã€‘
${inputText.value.substring(0, 2000)}

ã€æ„Ÿæƒ³ã®æ›¸ãæ–¹ã€‘
- æ–‡ç« ã®æŠ€è¡“ã‚„æ§‹æˆã«ã¯ä¸€åˆ‡è§¦ã‚Œãªã„ã§ãã ã•ã„
- ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã€ã‚·ãƒ¼ãƒ³ã€é›°å›²æ°—ã€æ„Ÿæƒ…ãªã©ã€Œå†…å®¹ã€ã«ã¤ã„ã¦ã®ã¿èªã£ã¦ãã ã•ã„
- ã€Œã€œãŒå°è±¡çš„ã ã£ãŸã€ã€Œã€œã®ã‚·ãƒ¼ãƒ³ã§èƒ¸ãŒç†±ããªã£ãŸã€ã€Œã€œã®å¿ƒæƒ…ãŒä¼ã‚ã£ã¦ããŸã€ã®ã‚ˆã†ã«å…·ä½“çš„ã«
- 200æ–‡å­—ç¨‹åº¦ã§ã€èª­è€…ã¨ã—ã¦ç´ ç›´ã«æ„Ÿã˜ãŸã“ã¨ã‚’æ›¸ã„ã¦ãã ã•ã„

æ‚ªã„ä¾‹ï¼šã€Œæ–‡ç« ã®ãƒªã‚ºãƒ ãŒè‰¯ãã€æå†™ãŒä¸å¯§ã§èª­ã¿ã‚„ã™ã‹ã£ãŸã§ã™ã€
è‰¯ã„ä¾‹ï¼šã€Œä¸»äººå…¬ãŒéå»ã¨å‘ãåˆã†ã‚·ãƒ¼ãƒ³ãŒåˆ‡ãªãã€æ¶™ãŒå‡ºãã†ã«ãªã‚Šã¾ã—ãŸã€‚ä»²é–“ã¨ã®çµ†ã®æå†™ã‚‚æ¸©ã‹ãã¦ã€ç¶šããŒæ°—ã«ãªã‚Šã¾ã™ã€`;

                // ã¾ãšæ¡ç‚¹ã‚’å®Ÿè¡Œ
                const scoringResponse = await fetch('https://falling-brook-e720.boleft704.workers.dev/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: scoringPrompt })
                });

                const scoringData = await scoringResponse.json();

                if (!scoringResponse.ok) {
                    throw new Error(scoringData.error || `é€šä¿¡ã‚¨ãƒ©ãƒ¼: ${scoringResponse.status}`);
                }

                // æ¡ç‚¹çµæœã‚’ãƒ‘ãƒ¼ã‚¹
                let aiResult;
                try {
                    const jsonMatch = scoringData.result.match(/\{[\s\S]*\}/);
                    if (jsonMatch) {
                        aiResult = JSON.parse(jsonMatch[0]);
                        
                        // AIã®æ¡ç‚¹çµæœã§statsã‚’æ›´æ–°
                        if (aiResult.scores && aiResult.totalScore) {
                            stats.value.totalScore = aiResult.totalScore;
                            stats.value.rank = aiResult.rank || getRank(aiResult.totalScore);
                            
                            // ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°
                            stats.value.radarData = [
                                { label: 'æå†™åŠ›', score: aiResult.scores.description || 50 },
                                { label: 'ä¼šè©±', score: aiResult.scores.dialogue || 50 },
                                { label: 'æ„Ÿæƒ…è¡¨ç¾', score: aiResult.scores.sentiment || 50 },
                                { label: 'æ–‡æœ«', score: aiResult.scores.ending || 50 },
                                { label: 'è¦–ç‚¹', score: aiResult.scores.viewpoint || 50 },
                                { label: 'ãƒªã‚ºãƒ ', score: aiResult.scores.tempo || 50 },
                                { label: 'å†—é•·æ€§', score: aiResult.scores.redundancy || 50 },
                                { label: 'æ¥ç¶šè©', score: aiResult.scores.connector || 50 },
                                { label: 'ã‚¸ãƒ£ãƒ³ãƒ«', score: aiResult.scores.keyword || 50 },
                                { label: 'èªå½™', score: aiResult.scores.vocabulary || 50 }
                            ];
                            
                            // ãƒãƒ£ãƒ¼ãƒˆã‚’å†æç”»
                            nextTick(() => {
                                renderCharts(stats.value);
                            });
                        }
                    }
                } catch (parseError) {
                    console.warn('JSON Parse Error:', parseError);
                }

                // æ¬¡ã«æ„Ÿæƒ³ã‚’ç”Ÿæˆ
                aiComment.value = 'AIãŒèª­å¾Œæ„Ÿæƒ³ã‚’æ›¸ã„ã¦ã„ã¾ã™...';
                
                const impressionResponse = await fetch('https://falling-brook-e720.boleft704.workers.dev/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: impressionPrompt })
                });

                const impressionData = await impressionResponse.json();

                if (!impressionResponse.ok) {
                    throw new Error(impressionData.error || `é€šä¿¡ã‚¨ãƒ©ãƒ¼: ${impressionResponse.status}`);
                }

                // æ„Ÿæƒ³ã‚’è¡¨ç¤º
                aiComment.value = impressionData.result;
                showToast('AIã«ã‚ˆã‚‹æ¡ç‚¹ã¨æ„Ÿæƒ³ãŒå®Œäº†ã—ã¾ã—ãŸï¼', 'alert-success', 'ph-fill ph-check-circle');

            } catch (error) {
                console.error('AI Processing Error:', error);
                showToast(error.message, 'alert-error', 'ph-fill ph-x-circle');
                aiComment.value = 'åˆ†æã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚';
            } finally {
                isAIProcessing.value = false;
            }
        };
        
        // ãƒ©ãƒ³ã‚¯åˆ¤å®šé–¢æ•°
        const getRank = (score) => {
            if (score >= 95) return 'S';
            if (score >= 90) return 'A+';
            if (score >= 85) return 'A';
            if (score >= 80) return 'B+';
            if (score >= 75) return 'B';
            if (score >= 70) return 'C+';
            if (score >= 65) return 'C';
            return 'D';
        };
        const performAnalysis = (text) => {
            const profile = currentScoringProfile.value;
            
            const sentences = text.split(/[ã€‚ï¼ï¼Ÿ\n]/).filter(s => s.trim().length > 0);
            const totalChars = text.replace(/\s/g, '').length;
            const avgLen = totalChars / sentences.length;
            
            const sentenceLengths = sentences.map(s => s.replace(/\s/g, '').length);
            const variance = sentenceLengths.reduce((sum, len) => sum + Math.pow(len - avgLen, 2), 0) / sentences.length;
            const stdDev = Math.sqrt(variance);
            const tempoVariance = stdDev / avgLen;
            
            const dialogLines = text.match(/ã€Œ[^ã€]*ã€|ã€[^ã€]*ã€|"[^"]*"|'[^']*'/g) || [];
            const dialogChars = dialogLines.join('').length;
            const dialogRatio = (dialogChars / totalChars) * 100;
            
          const endingPatterns = {
    // -------------------------
    // ã€åŸºæœ¬ãƒ»æ–­å®šã€‘ (Basic Assertion)
    // -------------------------
    'ã€œã‚‹ï¼ˆè¾æ›¸å½¢ï¼‰': /[ã‚‹ã†ããã™ã¤ã¬ã‚€ã¶ã·][ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã ï¼ˆæ–­å®šãƒ»å¸¸ä½“ï¼‰': /ã [ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã§ã‚ã‚‹ï¼ˆå½¢å¼ã°ã£ãŸæ–­å®šï¼‰': /ã§ã‚ã‚‹[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã®ï¼ˆæ–­å®šçœç•¥ãƒ»å¥³æ€§/å­ä¾›ï¼‰': /(?:ã‚‹|ãŸ|ãªã„|ã„ã‚‹|ã‚ã‚‹)ã®[ã€‚ï¼ï¼Ÿã€ã€]/g,

    // -------------------------
    // ã€ä¸å¯§ãƒ»æ•¬èªã€‘ (Polite)
    // -------------------------
    'ã€œã¾ã™ï¼ˆä¸å¯§ãƒ»ç¾åœ¨ï¼‰': /ã¾ã™[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã§ã™ï¼ˆä¸å¯§ãƒ»æ–­å®šï¼‰': /ã§ã™[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã§ã”ã–ã„ã¾ã™ï¼ˆä¸å¯§ãƒ»ä¸é‡ï¼‰': /ã§ã”ã–ã„ã¾ã™[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã”ã–ã„ã¾ã™ï¼ˆä¸å¯§ãƒ»å­˜åœ¨ï¼‰': /ã”ã–ã„ã¾ã™[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œè‡´ã—ã¾ã™ï¼ˆè¬™è­²ï¼‰': /è‡´ã—ã¾ã™[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œå‚ã‚Šã¾ã™ï¼ˆè¬™è­²ï¼‰': /å‚ã‚Šã¾ã™[ã€‚ï¼ï¼Ÿã€ã€]/g,

    // -------------------------
    // ã€éå»ãƒ»å®Œäº†ã€‘ (Past / Perfect)
    // -------------------------
    'ã€œãŸ/ã ï¼ˆéå»ãƒ»å¸¸ä½“ï¼‰': /[ãŸã ][ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã¾ã—ãŸï¼ˆéå»ãƒ»ä¸å¯§ï¼‰': /ã¾ã—ãŸ[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã§ã—ãŸï¼ˆéå»ãƒ»ä¸å¯§æ–­å®šï¼‰': /ã§ã—ãŸ[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã¦ã—ã¾ã£ãŸ/ã¡ã‚ƒã£ãŸï¼ˆå®Œäº†ãƒ»éºæ†¾ï¼‰': /(?:ã¦ã—ã¾ã£ãŸ|ã¡ã‚ƒã£ãŸ|ã˜ã‚ƒã£ãŸ)[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã¦ã„ãŸï¼ˆéå»é€²è¡Œï¼‰': /ã¦ã„ãŸ[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã¦ã‚ã£ãŸï¼ˆçŠ¶æ…‹ä¿æŒï¼‰': /ã¦ã‚ã£ãŸ[ã€‚ï¼ï¼Ÿã€ã€]/g,

    // -------------------------
    // ã€å¦å®šã€‘ (Negative)
    // -------------------------
    'ã€œãªã„ï¼ˆå¦å®šãƒ»å¸¸ä½“ï¼‰': /ãªã„[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã‚“ï¼ˆå¦å®šãƒ»å£èª/æ–¹è¨€ï¼‰': /ã‚“[ã€‚ï¼ï¼Ÿã€ã€]/g, // "ã‚ã‹ã‚‰ã‚“"ãªã©
    'ã€œã¾ã›ã‚“ï¼ˆå¦å®šãƒ»ä¸å¯§ï¼‰': /ã¾ã›ã‚“[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œãªã„ã§ã™ï¼ˆå¦å®šãƒ»ä¸å¯§å£èªï¼‰': /ãªã„ã§ã™[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œãšï¼ˆæ‰“ã¡æ¶ˆã—ãƒ»å¤é¢¨/æ›¸ãè¨€è‘‰ï¼‰': /ãš[ã€‚ï¼ï¼Ÿã€ã€]/g,

    // -------------------------
    // ã€æ¨é‡ãƒ»æ§˜æ…‹ãƒ»ä¼èã€‘ (Conjecture / Hearsay)
    // -------------------------
    'ã€œã ã‚ã†ï¼ˆæ¨é‡ãƒ»å¸¸ä½“ï¼‰': /ã ã‚ã†[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã§ã—ã‚‡ã†ï¼ˆæ¨é‡ãƒ»ä¸å¯§ï¼‰': /ã§ã—ã‚‡ã†[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã‚‰ã—ã„ï¼ˆä¼èãƒ»æ¨å®šï¼‰': /ã‚‰ã—ã„[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œãã†ã ï¼ˆæ§˜æ…‹ãƒ»ä¼èï¼‰': /ãã†ã [ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã‚ˆã†ã ï¼ˆæ¯”æ³ãƒ»æ¨å®šï¼‰': /ã‚ˆã†ã [ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã¿ãŸã„ã ï¼ˆæ¯”æ³ãƒ»å£èªï¼‰': /ã¿ãŸã„[ã ã§ã™]?[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã‹ã‚‚ã—ã‚Œãªã„ï¼ˆå¯èƒ½æ€§ï¼‰': /ã‹ã‚‚ã—ã‚Œãªã„[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã¯ãšã ï¼ˆç¢ºä¿¡ï¼‰': /ã¯ãš[ã ã§ã™]?[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã«é•ã„ãªã„ï¼ˆå¼·ã„ç¢ºä¿¡ï¼‰': /ã«é•ã„ãªã„[ã€‚ï¼ï¼Ÿã€ã€]/g,

    // -------------------------
    // ã€æ„å¿—ãƒ»é¡˜æœ›ãƒ»å‹§èª˜ã€‘ (Volitional / Desire)
    // -------------------------
    'ã€œãŸã„ï¼ˆé¡˜æœ›ï¼‰': /ãŸã„[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œãŸã„ã§ã™ï¼ˆé¡˜æœ›ãƒ»ä¸å¯§ï¼‰': /ãŸã„ã§ã™[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã‚ˆã†/ãŠã†ï¼ˆæ„å¿—ãƒ»å‹§èª˜ï¼‰': /(?:ã‚ˆã†|ãŠã†)[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã¾ã—ã‚‡ã†ï¼ˆå‹§èª˜ãƒ»ä¸å¯§ï¼‰': /ã¾ã—ã‚‡ã†[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã»ã—ãŒã‚‹ï¼ˆç¬¬ä¸‰è€…ã®é¡˜æœ›ï¼‰': /ã»ã—ãŒã‚‹[ã€‚ï¼ï¼Ÿã€ã€]/g,

    // -------------------------
    // ã€ç¾©å‹™ãƒ»å½“ç„¶ãƒ»ä¸å¯é¿ã€‘ (Obligation / Necessity)
    // -------------------------
    'ã€œã¹ãã ï¼ˆç¾©å‹™ï¼‰': /ã¹ã(?:ã |ã§ã™|ã§ã‚ã‚‹)[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œãªã‘ã‚Œã°ãªã‚‰ãªã„ï¼ˆç¾©å‹™ï¼‰': /(?:ãªã‘ã‚Œã°|ãªãã‚ƒ)(?:ãªã‚‰ãªã„|ã„ã‘ãªã„|ãªã‚“ãªã„)[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã–ã‚‹ã‚’å¾—ãªã„ï¼ˆä¸å¯é¿ï¼‰': /ã–ã‚‹ã‚’å¾—ãªã„[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã“ã¨ã ï¼ˆå¿ å‘Šï¼‰': /ã“ã¨[ã ã§ã™][ã€‚ï¼ï¼Ÿã€ã€]/g,

    // -------------------------
    // ã€å¼·èª¿ãƒ»èª¬æ˜ãƒ»å½¢å¼åè©ã€‘ (Emphasis / Explanation)
    // -------------------------
    'ã€œã®ã /ã‚“ã ï¼ˆå¼·èª¿ãƒ»èª¬æ˜ï¼‰': /[ã®ã‚“][ã ã§ã™][ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã‚ã‘ã ï¼ˆç´å¾—ãƒ»çµè«–ï¼‰': /ã‚ã‘[ã ã§ã™][ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã‚‚ã®ã ï¼ˆè© å˜†ãƒ»ä¸€èˆ¬è«–ï¼‰': /ã‚‚ã®[ã ã§ã™][ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã“ã¨ï¼ˆæ›¸ãè¨€è‘‰ãƒ»å‘½ä»¤ï¼‰': /ã“ã¨[ã€‚ï¼ï¼Ÿã€ã€]/g, // "ï½ã™ã‚‹ã“ã¨ã€‚"

    // -------------------------
    // ã€ç–‘å•ãƒ»åèªã€‘ (Question)
    // -------------------------
    'ã€œã‹ï¼ˆç–‘å•ï¼‰': /ã‹[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã‹ã„/ã ã„ï¼ˆç–‘å•ãƒ»è¦ªæ„›ï¼‰': /[ã‹ã ]ã„[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã®ï¼ˆç–‘å•ãƒ»ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼‰': /ã®[ï¼Ÿ][ã€‚ï¼ï¼Ÿã€ã€]?/g, // æ–‡æœ«ãŒã€Œã®ï¼Ÿã€ã®å ´åˆ
    'ã€œã‹ã—ã‚‰/ã‹ãªï¼ˆç–‘å•ãƒ»è‡ªå•ï¼‰': /(?:ã‹ã—ã‚‰|ã‹ãª)[ã€‚ï¼ï¼Ÿã€ã€]/g,

    // -------------------------
    // ã€çµ‚åŠ©è©ï¼ˆæ„Ÿæƒ…ãƒ»ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ï¼‰ã€‘ (Sentence-final particles)
    // -------------------------
    'ã€œã­/ã­ãˆï¼ˆåŒæ„ãƒ»ç¢ºèªï¼‰': /ã­ã‡?[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã‚ˆï¼ˆä¸»å¼µãƒ»é€šçŸ¥ï¼‰': /ã‚ˆ[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œãª/ãªãï¼ˆè© å˜†ãƒ»ç¦æ­¢ï¼‰': /ãªã?[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã‚ï¼ˆå¥³æ€§çš„/å¼·èª¿ï¼‰': /ã‚[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã/ãœï¼ˆå¼·æ„ãƒ»ç”·æ€§çš„ï¼‰': /[ããœ][ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã•ï¼ˆè»½åº¦ãªæ–­å®šï¼‰': /ã•[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã‚‚ã‚“ï¼ˆè¨€ã„è¨³ãƒ»ç”˜ãˆï¼‰': /ã‚‚ã‚“[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã‚¸ãƒ£ãƒ³ï¼ˆå£èªãƒ»åŒæ„ï¼‰': /(?:ã˜ã‚ƒã‚“|ã‚¸ãƒ£ãƒ³)[ã€‚ï¼ï¼Ÿã€ã€]/g,

    // -------------------------
    // ã€å‘½ä»¤ãƒ»ä¾é ¼ãƒ»æ¥ç¶šã€‘ (Imperative / Request)
    // -------------------------
    'ã€œã¦/ã§ï¼ˆè»½ã„ä¾é ¼ãƒ»è¨€ã„ã•ã—ï¼‰': /[ã¦ã§][ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œã‚/ã‚ˆï¼ˆå‘½ä»¤ï¼‰': /[ã‚ã‚ˆ][!ï¼][ã€‚ï¼ï¼Ÿã€ã€]?/g, // æ„Ÿå˜†ç¬¦ä»˜ãã‚’å„ªå…ˆ
    'ã€œãªã•ã„ï¼ˆå‘½ä»¤ãƒ»ä¸å¯§ï¼‰': /ãªã•ã„[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œãã ã•ã„ï¼ˆä¾é ¼ãƒ»ä¸å¯§ï¼‰': /ãã ã•ã„[ã€‚ï¼ï¼Ÿã€ã€]/g,
    'ã€œãŸã¾ãˆï¼ˆå‘½ä»¤ãƒ»å°Šå¤§ï¼‰': /ãŸã¾ãˆ[ã€‚ï¼ï¼Ÿã€ã€]/g,

    // -------------------------
    // ã€ãã®ä»–ãƒ»ä½“è¨€æ­¢ã‚ãƒ»å€’ç½®ã€‘ (Others)
    // -------------------------
    'ä½“è¨€æ­¢ã‚ï¼ˆåè©çµ‚äº†ï¼‰': /(?:[ã-ã‚“ã‚¡-ãƒ¶]|[ä¸€-é¾ ã€…])[ã€‚ï¼ï¼Ÿã€ã€]/g, // å°‘ã—å³å¯†åŒ–ï¼šæ¼¢å­—orã‚«ãƒŠï¼‹å¥èª­ç‚¹
    // â€»ä½“è¨€æ­¢ã‚ã¯ä»–ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãƒãƒƒãƒã—ãªã‹ã£ãŸå ´åˆã®ã€Œãã®ä»–ã€ã¨ã—ã¦æ‰±ã†ã®ãŒå®‰å…¨ã§ã™
};
            
            const endingCounts = {};
            let totalEndings = 0;
            
            for (let [pattern, regex] of Object.entries(endingPatterns)) {
                const matches = text.match(regex) || [];
                endingCounts[pattern] = matches.length;
                totalEndings += matches.length;
            }
            
            const endingDistribution = [];
            for (let [pattern, count] of Object.entries(endingCounts)) {
                if (count > 0) {
                    endingDistribution.push({
                        pattern,
                        count,
                        percentage: (count / totalEndings) * 100
                    });
                }
            }
            endingDistribution.sort((a, b) => b.count - a.count);
            
            let entropy = 0;
            for (let item of endingDistribution) {
                const p = item.percentage / 100;
                if (p > 0) entropy -= p * Math.log2(p);
            }
            const maxEntropy = Math.log2(Object.keys(endingPatterns).length);
            const endingVariety = (entropy / maxEntropy) * 100;
            
            const firstPersonMarkers = text.match(/ç§|åƒ•|ä¿º|ã‚ãŸã—|ã¼ã|ãŠã‚Œ|è‡ªåˆ†|ã†ã¡/g) || [];
            const thirdPersonMarkers = text.match(/å½¼|å½¼å¥³|[ä¸€-é¾¯]{1,3}ã¯|[ä¸€-é¾¯]{1,3}ãŒ/g) || [];
            
            const fpRatio = firstPersonMarkers.length / sentences.length;
            const tpRatio = thirdPersonMarkers.length / sentences.length;
            
            let viewpointConsistency = 'consistent';
            if (fpRatio > 0.3 && tpRatio > 0.3) {
                viewpointConsistency = 'mixed';
            } else if (fpRatio > 0.1 && tpRatio > 0.1) {
                viewpointConsistency = 'slightly_mixed';
            }
            
            const redundantPatterns = [
                /ã™ã‚‹ã“ã¨ãŒã§ãã‚‹/g,
                /ã™ã‚‹ã“ã¨ãŒå¯èƒ½/g,
                /ã¨ã„ã†ã‚‚ã®/g,
                /ã¨ã„ã†ã‚ã‘/g,
                /ã¨ã„ã†ã“ã¨/g,
                /ã€œã—ãŸã‚Šã™ã‚‹/g,
                /éå¸¸ã«|ã¨ã¦ã‚‚|ã™ã”ã|ã‹ãªã‚Š|çµæ§‹/g,
                /åŸºæœ¬çš„ã«|ä¸€èˆ¬çš„ã«|è¦ã™ã‚‹ã«/g,
                /ã€œã®ã‚ˆã†ãªæ°—ãŒã™ã‚‹/g,
                /ã€œã¨æ€ã‚ã‚Œã‚‹/g
            ];
            
            let redundancyCount = 0;
            for (let pattern of redundantPatterns) {
                const matches = text.match(pattern) || [];
                redundancyCount += matches.length;
            }
            
            const redundancyScore = Math.max(0, 100 - (redundancyCount / sentences.length) * 20);
            const redundancyLabel = redundancyCount < 3 ? 'minimal' : redundancyCount < 8 ? 'moderate' : 'excessive';
            
          // å°èª¬å‘ã‘ï¼šæ–‡è„ˆã‚’ã¤ãªãè‰¯è³ªãªæ¥ç¶šè©ãƒ»æ¥ç¶šèªå¥ï¼ˆãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³å¢—å¼·ç‰ˆï¼‰
// ç‰©èªã®é€²è¡Œã€æ™‚é–“çµŒéã€æ„Ÿæƒ…ã®æ©Ÿå¾®ã€å ´é¢è»¢æ›ã‚’å«ã‚€
const goodConnectorsPattern = [
    // 0. åŸºæœ¬çš„ãªæ¥ç¶šè©ï¼ˆå°èª¬ã§é »å‡ºï¼‰
    "ãã—ã¦", "ã§ã‚‚", "ã ã‹ã‚‰", "ãã‚Œã§", "ã¾ãŸ", "ãã“ã§",
    
    // 1. é€†æ¥ãƒ»è‘›è—¤ï¼ˆãƒ‰ãƒ©ãƒã‚’ç”Ÿã‚€ï¼‰
    "ã—ã‹ã—", "ã ãŒ", "ã‘ã‚Œã©", "ã‘ã‚Œã©ã‚‚", "ã ã‘ã©", "ã¨ã“ã‚ãŒ",
    "ãã‚Œã§ã‚‚", "ãªã®ã«", "ã‚‚ã£ã¨ã‚‚", "ã¨ã¯ã„ãˆ", "ã ã¨ã—ã¦ã‚‚",
    "ã«ã‚‚ã‹ã‹ã‚ã‚‰ãš", "ãã†ã¯è¨€ã£ã¦ã‚‚", "ã¨ã¯ã„ã†ã‚‚ã®ã®", "ãŸã ", "å¦",

    // 2. æ™‚é–“çµŒéãƒ»å ´é¢å±•é–‹ï¼ˆç‰©èªã‚’é€²ã‚ã‚‹ï¼‰
    "ã‚„ãŒã¦", "ã™ã‚‹ã¨", "ãã®æ™‚", "ãã®ã¨ã", "ã»ã©ãªã", "ã¾ã‚‚ãªã",
    "ã„ã¤ã—ã‹", "ã¨ã¤ãœã‚“", "çªç„¶", "ä¸æ„ã«", "ãµã¨", "ã‚ãã‚‹æ—¥", "ç¿Œæ—¥",
    "æ•°æ—¥å¾Œ", "ã—ã°ã‚‰ãã—ã¦", "æ°—ä»˜ã‘ã°", "æ¬¡ã®ç¬é–“", "ã¨åŒæ™‚ã«", "ç›´å¾Œ",
    "ä»¥å‰", "ã‹ã¤ã¦", "ã„ã¾ã‚„", "ä»Šåº¦ã¯", "ã‹ãã—ã¦", "ã“ã†ã—ã¦",

    // 3. æ·»åŠ ãƒ»å¼·èª¿ï¼ˆæƒ…å ±ã‚’ç•³ã¿æ›ã‘ã‚‹ï¼‰
    "ãã®ã†ãˆ", "ã—ã‹ã‚‚", "ãã‚Œã«", "ã•ã‚‰ã«", "ãŠã¾ã‘ã«", "ã‚ã¾ã¤ã•ãˆ",
    "ãã‚Œã°ã‹ã‚Šã‹", "ãã‚Œã©ã“ã‚ã‹", "åŠ ãˆã¦", "ã®ã¿ãªã‚‰ãš",

    // 4. åŸå› ãƒ»ç†ç”±ãƒ»å¿ƒæƒ…ï¼ˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®å‹•æ©Ÿï¼‰
    "ãªãœãªã‚‰", "ã ã£ã¦", "ã©ã†ã—ã¦ã‹ã¨ã„ã†ã¨", "ãªã«ã—ã‚", "ãªã‚“ã¨ãªã‚Œã°",
    "ã¨ã„ã†ã®ã‚‚", "ã‚†ãˆã«", "ãã‚Œã‚†ãˆ", "ã—ãŸãŒã£ã¦", "ã ã‹ã‚‰ã“ã",

    // 5. è»¢æ›ãƒ»è£œè¶³ï¼ˆè¦–ç‚¹ã‚’å¤‰ãˆã‚‹ï¼‰
    "ã•ã¦", "ã¨ã“ã‚ã§", "ãã‚Œã¯ãã†ã¨", "ä¸€æ–¹", "ä»–æ–¹", "ç¿»ã£ã¦",
    "ã¡ãªã¿ã«", "ãªãŠ", "ã‚‚ã£ã¨ã‚‚", "ãŸã ã—", "è¦ã™ã‚‹ã«", "ã¤ã¾ã‚Š", "ã„ã‚ã°"
].join("|");

const goodConnectors = text.match(new RegExp(goodConnectorsPattern, "g")) || [];


// å°èª¬å‘ã‘ï¼šé¿ã‘ã‚‹ã¹ãæ‚ªè³ªãªæ¥ç¶šãƒ»å†—é•·è¡¨ç¾
// å˜èª¿ãªãƒªã‚ºãƒ ã€ç¨šæ‹™ã«è¦‹ãˆã‚‹ç¹°ã‚Šè¿”ã—ã€éå‰°ãªèª¬æ˜å£èª¿
const poorConnectorsPattern = [
    // å˜èª¿ãªç¹°ã‚Šè¿”ã—ï¼ˆé ­ã®æ‚ªã„ãƒªã‚ºãƒ ã«ãªã‚‹ï¼‰
    "ãã—ã¦ã€ãã—ã¦", "ãã‚Œã§ã€ãã‚Œã§", "ã§ã‚‚ã€ã§ã‚‚", "ã ã‹ã‚‰ã€ã ã‹ã‚‰",
    "ã¾ãŸã€ã¾ãŸ", "æ¬¡ã«ã€æ¬¡ã«",

    // å°èª¬ã§ã¯å¥½ã¾ã‚Œãªã„éå‰°ãªå£èªãƒ»ãƒãƒƒãƒˆã‚¹ãƒ©ãƒ³ã‚°çš„æ¥ç¶šï¼ˆæ–‡é ­é™å®šï¼‰
    "^ã¦ã„ã†ã‹ã€", "^ã¦ã‚†ãƒ¼ã‹ã€", "^ãªã®ã§ã€",

    // æ„å‘³ã®è–„ã„ç¹‹ãè¨€è‘‰ã®é€£ç™º
    "ãã†ã—ã¦ã€ãã†ã—ã¦", "ãã†ã‚„ã£ã¦ã€ãã†ã‚„ã£ã¦"
].join("|");

const poorConnectors = text.match(new RegExp(poorConnectorsPattern, "g")) || [];

// æ¥ç¶šè©ã‚¹ã‚³ã‚¢ã®æ”¹å–„ç‰ˆï¼ˆã‚ˆã‚Šç¾å®Ÿçš„ãªè©•ä¾¡ï¼‰
// åŸºæœ¬ã‚¹ã‚³ã‚¢: è‰¯è³ªãªæ¥ç¶šè©ã®ä½¿ç”¨ç‡ã‚’åŸºæº–ã¨ã™ã‚‹
const goodConnectorRatio = sentences.length > 0 ? (goodConnectors.length / sentences.length) : 0;

console.log(`æ¥ç¶šè©ãƒ‡ãƒãƒƒã‚°: è‰¯è³ª=${goodConnectors.length}, ä¸é©åˆ‡=${poorConnectors.length}, æ–‡æ•°=${sentences.length}, æ¯”ç‡=${goodConnectorRatio.toFixed(3)}`);

// ç¾å®Ÿçš„ãªã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
// - 10æ–‡ã«1å€‹ï¼ˆ10%ï¼‰ã®æ¥ç¶šè©ã§50ç‚¹
// - 5æ–‡ã«1å€‹ï¼ˆ20%ï¼‰ã®æ¥ç¶šè©ã§80ç‚¹
// - 3æ–‡ã«1å€‹ï¼ˆ33%ï¼‰ä»¥ä¸Šã§æº€ç‚¹
let baseConnectorScore = 0;
if (goodConnectorRatio >= 0.33) {
    baseConnectorScore = 100;
} else if (goodConnectorRatio >= 0.20) {
    // 20%ã€œ33%ã®ç¯„å›²: 80ã€œ100ç‚¹
    baseConnectorScore = 80 + ((goodConnectorRatio - 0.20) / 0.13) * 20;
} else if (goodConnectorRatio >= 0.10) {
    // 10%ã€œ20%ã®ç¯„å›²: 50ã€œ80ç‚¹
    baseConnectorScore = 50 + ((goodConnectorRatio - 0.10) / 0.10) * 30;
} else if (goodConnectorRatio > 0) {
    // 0%ã€œ10%ã®ç¯„å›²: 20ã€œ50ç‚¹ï¼ˆæœ€ä½20ç‚¹ä¿è¨¼ï¼‰
    baseConnectorScore = 20 + (goodConnectorRatio / 0.10) * 30;
} else {
    // æ¥ç¶šè©ãŒå…¨ããªã„å ´åˆ: 30ç‚¹ï¼ˆåŸºæœ¬ç‚¹ï¼‰
    baseConnectorScore = 30;
}

// ä¸é©åˆ‡ãªæ¥ç¶šè©ã«å¯¾ã™ã‚‹ãƒšãƒŠãƒ«ãƒ†ã‚£
const poorPenalty = poorConnectors.length * 5;

// æœ€çµ‚ã‚¹ã‚³ã‚¢ï¼ˆæœ€ä½20ç‚¹ã€æœ€é«˜100ç‚¹ï¼‰
const connectorScore = Math.max(20, Math.min(100, baseConnectorScore - poorPenalty));
            
            // ã¾ãšã€ã‚ˆãä½¿ã‚ã‚Œã‚‹è²§å¼±ãªè¡¨ç¾ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
            const poorVocab = {
                'ã™ã”ã„': (text.match(/ã™ã”ã„/g) || []).length,
                'ã„ã„æ„Ÿã˜': (text.match(/ã„ã„æ„Ÿã˜|è‰¯ã„æ„Ÿã˜/g) || []).length,
                'ã‚ã£ã¡ã‚ƒ': (text.match(/ã‚ã£ã¡ã‚ƒ|ã‚ã¡ã‚ƒ/g) || []).length,
                'ã‚„ã°ã„': (text.match(/ã‚„ã°ã„|ãƒ¤ãƒã„/g) || []).length,
                'ãªã‚“ã‹': (text.match(/ãªã‚“ã‹|ä½•ã‹/g) || []).length,
                'ã¿ãŸã„ãª': (text.match(/ã¿ãŸã„ãª/g) || []).length,
                'ã£ã¦æ„Ÿã˜': (text.match(/ã£ã¦æ„Ÿã˜|ã£ã½ã„æ„Ÿã˜/g) || []).length,
                'ã¾ã‚ã¾ã‚': (text.match(/ã¾ã‚ã¾ã‚/g) || []).length,
                'ã¡ã‚‡ã£ã¨': (text.match(/ã¡ã‚‡ã£ã¨/g) || []).length,
            };
            
            // ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰2æ–‡å­—ä»¥ä¸Šã®å˜èªã‚’æŠ½å‡ºï¼ˆã‚ˆã‚Šç´°ã‹ãï¼‰
            const allWords = text.match(/[ã-ã‚“ã‚¡-ãƒ¶ãƒ¼ä¸€-é¾ ã€…]+/g) || [];
            const functionalWords = /^(ã¯|ãŒ|ã‚’|ã«|ã¸|ã¨|ã§|ã‹ã‚‰|ã¾ã§|ã‚ˆã‚Š|ã®|ã‚„|ã‹|ã‚‚|ã“ã|ã•ãˆ|ã ã‘|ã°ã‹ã‚Š|ãªã©|ã—|ãŸ|ã¦|ã |ã§ã™|ã¾ã™|ã‚ã‚‹|ã„ã‚‹|ã™ã‚‹|ãªã‚‹|ã‚Œã‚‹|ã‚‰ã‚Œã‚‹|ã›ã‚‹|ã•ã›ã‚‹|ãªã„|ã¬|ã‚“|ã“ã‚Œ|ãã‚Œ|ã‚ã‚Œ|ã“ã®|ãã®|ã‚ã®|ã“ã“|ãã“|ã‚ãã“|ã“ã†|ãã†|ã‚ã‚)$/;
            const contentWords = allWords.filter(w => w.length >= 2 && !functionalWords.test(w));
            const uniqueWords = new Set(contentWords);
            
            const wordFreq = {};
            contentWords.forEach(w => {
                wordFreq[w] = (wordFreq[w] || 0) + 1;
            });
            
            // é »å‡ºèªã®ãƒªã‚¹ãƒˆï¼ˆã‚³ãƒ¡ãƒ³ãƒˆè¡¨ç¤ºç”¨ï¼‰
            const repeatedWords = Object.entries(wordFreq).filter(([w, c]) => c > 2).sort((a, b) => b[1] - a[1]);
            
            // è²§å¼±ãªèªå½™ã®ä½¿ç”¨å›æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
            let poorVocabCount = 0;
            Object.entries(poorVocab).forEach(([word, count]) => {
                if (count > 0) {
                    poorVocabCount += count;
                }
            });
            
            // è²§å¼±ãªèªå½™ã®æ¯”ç‡ã‚’è¨ˆç®—ï¼ˆæ–‡ç« ã®é•·ã•ã«å¯¾ã™ã‚‹å‰²åˆï¼‰
            const poorVocabRatio = contentWords.length > 0 ? (poorVocabCount / contentWords.length) : 0;
            
            // ç¹°ã‚Šè¿”ã—ã®å¤šã„å˜èªã®æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
            let highRepeatCount = 0;
            Object.entries(wordFreq).forEach(([word, count]) => {
                if (count >= 5) {
                    highRepeatCount += (count - 4);
                } else if (count >= 3) {
                    highRepeatCount += (count - 2) * 0.5;
                }
            });
            
            // ç¹°ã‚Šè¿”ã—ã®æ¯”ç‡ã‚’è¨ˆç®—
            const repetitionRatio = contentWords.length > 0 ? (highRepeatCount / contentWords.length) : 0;
            
            // èªå½™ã®å¤šæ§˜æ€§ã‚’è¨ˆç®—
            const diversityRatio = contentWords.length > 0 ? (uniqueWords.size / contentWords.length) : 0;
            
            // åŸºæœ¬ã‚¹ã‚³ã‚¢ã¯å¤šæ§˜æ€§æ¯”ç‡ã«åŸºã¥ã
            let baseScore = 0;
            if (diversityRatio >= 0.8) {
                baseScore = 100;
            } else if (diversityRatio >= 0.5) {
                baseScore = ((diversityRatio - 0.5) / 0.3) * 100;
            } else {
                baseScore = diversityRatio * 100;
            }
            
            // æ¯”ç‡ãƒ™ãƒ¼ã‚¹ã§ãƒšãƒŠãƒ«ãƒ†ã‚£ã‚’é©ç”¨ï¼ˆæœ€å¤§æ¸›ç‚¹ã¯50ç‚¹ï¼‰
            const poorVocabPenalty = Math.min(30, poorVocabRatio * 100);
            const repetitionPenalty = Math.min(20, repetitionRatio * 100);
            const totalPenalty = poorVocabPenalty + repetitionPenalty;
            const vocabularyRichness = Math.max(0, baseScore - totalPenalty);
            
// ==========================================
// 1. äº”æ„Ÿãƒ»æ„Ÿè¦šè¡¨ç¾ (Sensory)
// ==========================================
// è¦–è¦šã€è´è¦šã€å—…è¦šã€å‘³è¦šã€è§¦è¦šã€æ¸©åº¦ã€èº«ä½“æ„Ÿè¦šãªã©
const sensoryList = [
    // è¦–è¦š
    'è¦‹', 'è¦³', 'çœº', 'è¦–ç•Œ', 'å…‰æ™¯', 'çœ¼', 'ç³', 'ç›®', 'çœ©', 'é®®ã‚„ã‹', 'è‰²', 'å½©', 
    'è–„æš—', 'é—‡', 'å½±', 'è¼ªéƒ­', 'ã¼ã‚“ã‚„ã‚Š', 'éœ', 'é€æ˜', 'ç…Œ', 'è¼', 'æ˜ ',
    // è´è¦š
    'éŸ³', 'å£°', 'éŸ¿', 'è', 'è´', 'è€³', 'å›', 'å«', 'å–š', 'æ‚²é³´', 'è½ŸéŸ³', 'é™å¯‚', 
    'ã–ã‚ã‚ã', 'å–§é¨’', 'ãƒã‚¤ã‚º', 'è¶³éŸ³', 'ç‰©éŸ³', 'æ²ˆé»™',
    // å—…è¦š
    'é¦™', 'åŒ‚', 'è‡­', 'é¼»', 'èŠ³', 'è–«', 'å—…', 'æ‚ªè‡­', 'ç•°è‡­', 'æ®‹ã‚Šé¦™', 'é¼»ã‚’ã¤ã',
    // å‘³è¦š
    'å‘³', 'ç”˜', 'è¾›', 'è‹¦', 'é…¸', 'æ¸‹', 'æ—¨', 'èˆŒ', 'å™›', 'å–‰è¶Š', 'ä¸å‘³', 'ç¾å‘³',
    // è§¦è¦šãƒ»æ¸©åº¦ãƒ»èº«ä½“æ„Ÿè¦š
    'è§¦', 'æ’«', 'æ„Ÿè§¦', 'æ‰‹è§¦', 'è‚Œ', 'çš®è†š', 'æŒ‡å…ˆ', 'å†·', 'æ¸©', 'ç†±', 'å¯’', 'æš‘', 'ã¬ãã‚‚ã‚Š',
    'ç—›', 'æ¿€ç—›', 'éˆç—›', 'ç—’', 'ç—º', 'éœ‡', 'é³¥è‚Œ', 'æŸ”ã‚‰', 'ç¡¬', 'é‡', 'è»½', 'æ¹¿', 'ä¹¾',
    'ã–ã‚‰ã–ã‚‰', 'ã¤ã‚‹ã¤ã‚‹', 'ãµã‚ãµã‚', 'ãƒ™ã‚¿ãƒ™ã‚¿', 'ã²ã‚“ã‚„ã‚Š'
];

// ==========================================
// 2. å¿ƒç†ãƒ»å†…é¢æå†™ (Psychological)
// ==========================================
// æ€è€ƒã€æ„Ÿæƒ…ã€è‘›è—¤ã€æ¨æ¸¬ã€å›æƒ³ãªã©
const psychList = [
    // æ€è€ƒãƒ»æ„è­˜ï¼ˆå¤§å¹…å¼·åŒ–ï¼‰
    'æ€', 'è€ƒ', 'æ„Ÿ', 'æ°—', 'å¿ƒ', 'èƒ¸', 'è„³è£', 'æ„è­˜', 'è¨˜æ†¶', 'å›æƒ³', 'æƒ³åƒ', 'å¦„æƒ³', 
    'æ¨æ¸¬', 'äºˆæ„Ÿ', 'ç†è§£', 'ç´å¾—', 'æŠŠæ¡', 'èªè­˜', 'è‡ªè¦š', 'è¿·', 'æ‚©', 'ç–‘', 'æ±ºæ„',
    'åˆ¤æ–­', 'äºˆæƒ³', 'ç›´æ„Ÿ', 'ã‚¤ãƒ¡ãƒ¼ã‚¸', 'ç¢ºä¿¡', 'ä¿¡ã˜',
    'æ°—ã¥', 'æ‚Ÿ', 'å¯Ÿã—', 'è¦‹æŠœ', 'å¯ŸçŸ¥', 'èª­ã¿å–',
    'æ€ã„å‡º', 'å¿˜ã‚Œ', 'æŒ¯ã‚Šè¿”', 'æ‡ã‹ã—',
    'ã‚ã‹', 'äº†è§£', 'é£²ã¿è¾¼', 'è…‘ã«è½ã¡', 'åˆç‚¹', 'ãƒ”ãƒ³ã¨æ¥',
    
    // æ„Ÿæƒ…ã®å‹•ã
    'ä¸å®‰', 'ææ€–', 'å–œ', 'æ‚²', 'æ€’', 'é©š', 'å“€', 'æ†‚', 'æ†¤', 'æ†', 'æ„›', 'æ‹', 'æƒ…',
    'æœŸå¾…', 'é¡˜', 'æœ›', 'æ¬²', 'ç„¦', 'æ‚”', 'å«‰å¦¬', 'ç¾¨', 'å®‰å µ', 'çµ¶æœ›', 'å­¤ç‹¬', 'è™šç„¡',
    'å¬‰ã—', 'æ¥½ã—', 'å¹¸ã›', 'æº€è¶³', 'å®‰å¿ƒ', 'æ„Ÿå‹•', 'èˆˆå¥®',
    'æ‚²ã—', 'å“€ã—', 'è¾›', 'è‹¦ã—', 'åˆ‡ãª', 'å¯‚ã—', 'è™šã—',
    'è…¹ç«‹', 'ã‚¤ãƒ©', 'ãƒ ã‚«', 'ä¸å¿«', 'æ¨',
    'æ€–', 'å¿ƒé…', 'ç·Šå¼µ', 'å›°æƒ‘', 'æ…Œã¦', 'å‹•æº',
    'ã³ã£ãã‚Š', 'ä»°å¤©', 'å‘†ç„¶', 'å”–ç„¶', 'æ„•ç„¶',
    'æ¥ãšã‹ã—', 'ç…§ã‚Œ', 'æ°—ã¾ãš', 'å¾Œã‚ã‚ãŸ', 'ç½ªæ‚ªæ„Ÿ',
    
    // å†…é¢ã®å£°ãƒ»çŠ¶æ…‹
    'è¡å‹•', 'æœ¬èƒ½', 'ç†æ€§', 'è‘›è—¤', 'å‹•æº', 'æ··ä¹±', 'æ”¾å¿ƒ', 'å‘†ç„¶', 'æ„åœ°', 'ãƒ—ãƒ©ã‚¤ãƒ‰',
    'å†·é™', 'è½ã¡ç€', 'å¹³é™', 'é›†ä¸­',
    
    // æ¨æ¸¬ãƒ»åˆ¤æ–­ã®åŠ©è©ï¼ˆé‡è¦ï¼ï¼‰
    'ã ã‚ã†', 'ã®ã‹', 'ã®ã ', 'ã‚“ã ', 'ã ã£ãŸ', 'ã‹ã‚‚ã—ã‚Œ', 'ã«é•ã„ãª',
    'ã‚ˆã†ã ', 'ã¿ãŸã„', 'ã‚‰ã—ã„', 'ã£ã½ã„', 'ã¯ãš', 'ã¹ã', 'ã ã‘'
];

// ==========================================
// 3. å‹•ä½œãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ (Action)
// ==========================================
// ä½“ã®å‹•ãã€ç§»å‹•ã€æˆ¦é—˜ã€æ—¥å¸¸å‹•ä½œãªã©
const actionList = [
    // ç§»å‹•ãƒ»è¶³
    'æ­©', 'èµ°', 'é§†', 'è·³', 'é£›', 'é€ƒ', 'è¿½', 'é€²', 'é€€', 'æˆ»', 'è¡Œ', 'æ¥', 'ç«‹', 'åº§', 
    'é€™', 'è»¢', 'å€’', 'ç€åœ°', 'å¾˜å¾Š', 'å½·å¾¨', 'ãƒ€ãƒƒã‚·ãƒ¥',
    // æ‰‹ãƒ»è…•ãƒ»æ“ä½œ
    'æ¡', 'æ´', 'æŒ', 'å–', 'æŠ•', 'æ‰“', 'æ®´', 'å©', 'æ’«', 'æŠ¼', 'å¼•', 'é–‹', 'é–‰', 
    'æŒ¯', 'æŒ‡å·®', 'è§¦', 'æ‹¾', 'æ¨ã¦', 'æŠ±', 'èƒŒè² ',
    // å£ãƒ»é¡”ãƒ»è¡¨æƒ…å‹•ä½œ
    'è¨€', 'è©±', 'èª', 'å«', 'å‘¼', 'ç¬‘', 'æ³£', 'é£Ÿ', 'é£²', 'å', 'å™›', 'èˆ', 'ç¨', 
    'é ·', 'é¦–ã‚’æŒ¯', 'è¦‹å›', 'ç¬ã', 'å‡è¦–',
    // æˆ¦é—˜ãƒ»æ¿€ã—ã„å‹•ä½œ
    'è¹´', 'æ–¬', 'åˆº', 'æ’ƒ', 'å°„', 'é˜²', 'é¿', 'æ®º', 'å£Š', 'ç •', 'è£‚', 'çˆ†ç™º', 'è¡çª'
];

// ==========================================
// 4. æƒ…æ™¯ãƒ»ä¸–ç•Œè¦³ (Scene)
// ==========================================
// è‡ªç„¶ã€å¤©å€™ã€å ´æ‰€ã€æ™‚é–“ã€å…‰ã¨å½±ãªã©
const sceneList = [
    // å¤©ä½“ãƒ»å¤©å€™
    'ç©º', 'é›²', 'å¤ªé™½', 'æœˆ', 'æ˜Ÿ', 'é¢¨', 'é›¨', 'é›ª', 'é›·', 'åµ', 'éœ§', 'éœ', 'è™¹', 
    'æ™´', 'æ›‡', 'æ°—å€™', 'æ°—æ¸©', 'å­£ç¯€', 'é™½å°„ã—', 'å¤•æš®', 'æœ', 'æ˜¼', 'å¤œ', 'æ·±å¤œ',
    // è‡ªç„¶ãƒ»åœ°å½¢
    'æœ¨', 'æ—', 'æ£®', 'èŠ±', 'è‰', 'è‘‰', 'å±±', 'æµ·', 'å·', 'æ¹–', 'æ°´', 'åœŸ', 'ç ‚', 'å²©', 
    'å´–', 'åœ°å¹³ç·š', 'æ°´å¹³ç·š', 'æ´çªŸ', 'è’é‡',
    // äººå·¥ç‰©ãƒ»å ´æ‰€
    'è¡—', 'éƒ½å¸‚', 'å»ºç‰©', 'éƒ¨å±‹', 'çª“', 'å£', 'åºŠ', 'å¤©äº•', 'æ‰‰', 'ãƒ‰ã‚¢', 'é“', 'è·¯åœ°', 
    'åºƒå ´', 'å®¶', 'åº—', 'åŸ', 'å»ƒå¢Ÿ', 'ã‚¬ãƒ©ã‚¹', 'ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆ',
    // é›°å›²æ°—ãƒ»çŠ¶æ…‹
    'å…‰', 'å½±', 'è‰²', 'é™å¯‚', 'å–§é¨’', 'é›°å›²æ°—', 'ç©ºæ°—æ„Ÿ', 'åŒ‚ã„', 'æ™¯è‰²', 'é¢¨æ™¯'
];

// ==========================================
// è©•ä¾¡å®Ÿè¡Œé–¢æ•°ï¼ˆä¿®æ­£ç‰ˆï¼‰
// ==========================================
// ãƒªã‚¹ãƒˆã‚’ã€Œ|ã€ã§çµåˆã—ã¦æ­£è¦è¡¨ç¾ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
const createRegex = (list) => new RegExp(list.join('|'), 'g');

const sensoryRegex = createRegex(sensoryList);
const psychRegex = createRegex(psychList);
const actionRegex = createRegex(actionList);
const sceneRegex = createRegex(sceneList);

// ãƒãƒƒãƒãƒ³ã‚°æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆï¼ˆnullå¯¾ç­–ã§ || [] ã‚’ä½¿ç”¨ï¼‰
const sensoryCount = (text.match(sensoryRegex) || []).length;
const psychCount = (text.match(psychRegex) || []).length;
const actionCount = (text.match(actionRegex) || []).length;
const sceneCount = (text.match(sceneRegex) || []).length;

// æ–‡ã®æ•°ï¼ˆsentences.lengthï¼‰ãŒ0ã®å ´åˆã®ã‚¼ãƒ­é™¤ç®—å¯¾ç­–ã‚’å«ã‚ã‚‹
const sentenceCount = sentences.length > 0 ? sentences.length : 1;

// å¯†åº¦è¨ˆç®—ï¼ˆ%ï¼‰
const sensoryDensity = (sensoryCount / sentenceCount) * 100;
const psychDensity = (psychCount / sentenceCount) * 100;
const actionDensity = (actionCount / sentenceCount) * 100;
const sceneDensity = (sceneCount / sentenceCount) * 100;

// çµæœç¢ºèªç”¨ãƒ­ã‚°
console.log(`äº”æ„Ÿåº¦: ${sensoryDensity.toFixed(1)}%`);
console.log(`å¿ƒç†åº¦: ${psychDensity.toFixed(1)}%`);
console.log(`ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åº¦: ${actionDensity.toFixed(1)}%`);
console.log(`æƒ…æ™¯åº¦: ${sceneDensity.toFixed(1)}%`);

            // ========== å“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆç•°å¸¸ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºï¼‰ ==========
            let qualityPenalty = 0;
            const qualityIssues = [];
            
            // 1. èª­ç‚¹ã®éå‰°ä½¿ç”¨ãƒã‚§ãƒƒã‚¯ï¼ˆ1æ–‡ã‚ãŸã‚Šå¹³å‡5å€‹ä»¥ä¸Šã§è­¦å‘Šï¼‰
            const commaCount = (text.match(/ã€/g) || []).length;
            const commaPerSentence = commaCount / sentenceCount;
            if (commaPerSentence > 5) {
                const penalty = Math.min(60, (commaPerSentence - 5) * 12);
                qualityPenalty += penalty;
                qualityIssues.push(`èª­ç‚¹éå¤šï¼ˆ1æ–‡å¹³å‡${commaPerSentence.toFixed(1)}å€‹ï¼‰`);
            }
            
            // 2. ãƒ«ãƒ“ï¼ˆæ‹¬å¼§ï¼‰ã®ä¹±ç”¨ãƒã‚§ãƒƒã‚¯
            const rubyCount = (text.match(/ï¼ˆ[^ï¼‰]+ï¼‰/g) || []).length;
            const rubyPerSentence = rubyCount / sentenceCount;
            if (rubyPerSentence > 1.5) {
                const penalty = Math.min(40, (rubyPerSentence - 1.5) * 20);
                qualityPenalty += penalty;
                qualityIssues.push(`ãƒ«ãƒ“éå¤šï¼ˆ1æ–‡å¹³å‡${rubyPerSentence.toFixed(1)}å€‹ï¼‰`);
            }
            
            // 3. åŒã˜å˜èªã®éåº¦ãªç¹°ã‚Šè¿”ã—ãƒã‚§ãƒƒã‚¯ï¼ˆã€Œä¿ºã€ãªã©ï¼‰
            const words = text.match(/[ä¸€-é¾¯ã-ã‚“ã‚¡-ãƒ´ãƒ¼]+/g) || [];
            const wordRepeatFreq = {};
            words.forEach(w => {
                if (w.length >= 2) {
                    wordRepeatFreq[w] = (wordRepeatFreq[w] || 0) + 1;
                }
            });
            const maxRepeat = Math.max(0, ...Object.values(wordRepeatFreq));
            const totalWords = words.length;
            if (totalWords > 0 && maxRepeat / totalWords > 0.12) {
                qualityPenalty += 35;
                const mostCommon = Object.keys(wordRepeatFreq).find(k => wordRepeatFreq[k] === maxRepeat);
                qualityIssues.push(`å˜èªã®éåº¦ãªç¹°ã‚Šè¿”ã—ï¼ˆã€Œ${mostCommon}ã€ãŒ${maxRepeat}å›ï¼‰`);
            }
            
            // 4. ç•°å¸¸ãªå¥èª­ç‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆã€Œã€ã¨ã€ã€ã€Œã€ã®ã€ã€ãªã©ï¼‰
            const weirdCommaPattern = (text.match(/ã€[ã¨ã®ãŒã‚’ã«ã¸ã§ã‚„]ã€/g) || []).length;
            if (weirdCommaPattern > sentenceCount * 0.25) {
                qualityPenalty += 50;
                qualityIssues.push('ä¸è‡ªç„¶ãªèª­ç‚¹ã®é…ç½®');
            }
            
            // 5. æ„Ÿå˜†ç¬¦ãƒ»ç–‘å•ç¬¦ã®éå‰°ä½¿ç”¨
            const exclamationCount = (text.match(/ï¼{3,}/g) || []).length;
            if (exclamationCount > sentenceCount * 0.4) {
                qualityPenalty += 25;
                qualityIssues.push('æ„Ÿå˜†ç¬¦ã®éå‰°ä½¿ç”¨');
            }
            
            // 6. ä¸‰ç‚¹ãƒªãƒ¼ãƒ€ãƒ¼ãƒ»çœç•¥è¨˜å·ã®ç•°å¸¸ä½¿ç”¨
            const dotsPattern = (text.match(/\.{3,}|ã€‚{2,}/g) || []).length;
            if (dotsPattern > sentenceCount * 0.5) {
                qualityPenalty += 20;
                qualityIssues.push('çœç•¥è¨˜å·ã®å¤šç”¨');
            }
            
            console.log(`å“è³ªãƒšãƒŠãƒ«ãƒ†ã‚£: -${qualityPenalty.toFixed(1)}ç‚¹`, qualityIssues);
            
            // å„å¯†åº¦ã‚’0-30ç‚¹ã«æ­£è¦åŒ–ã—ã¦ã‹ã‚‰åˆè¨ˆï¼ˆæœ€å¤§120ç‚¹â†’100ç‚¹ã«ã‚¯ãƒªãƒƒãƒ—ï¼‰
            // ä¿‚æ•°ã‚’ä¸Šã’ã¦ã‚¹ã‚³ã‚¢ãŒå‡ºã‚„ã™ãã™ã‚‹
            const normalizedSensory = Math.min(30, sensoryDensity * 1.2);      // äº”æ„Ÿæå†™
            const normalizedPsych = Math.min(30, psychDensity * 1.2);          // å¿ƒç†æå†™
            const normalizedAction = Math.min(30, actionDensity * 1.2);        // å‹•ä½œæå†™
            const normalizedScene = Math.min(30, sceneDensity * 1.2);          // æƒ…æ™¯æå†™
            
            const rawDescDensity = normalizedSensory + normalizedPsych + normalizedAction + normalizedScene;
            
            // å“è³ªãƒšãƒŠãƒ«ãƒ†ã‚£ã‚’é©ç”¨ï¼ˆæœ€ä½0ç‚¹ï¼‰
            const totalDescDensity = Math.max(0, Math.min(100, rawDescDensity - qualityPenalty));
            
            const kanjiCount = (text.match(/[ä¸€-é¾¯]/g) || []).length;
            const hiraganaCount = (text.match(/[ã-ã‚“]/g) || []).length;
            const katakanaCount = (text.match(/[ã‚¡-ãƒ´]/g) || []).length;
            
            const kanjiRatio = (kanjiCount / totalChars) * 100;
            const hiraganaRatio = (hiraganaCount / totalChars) * 100;
            const katakanaRatio = (katakanaCount / totalChars) * 100;
            
            const keywordRegex = new RegExp(profile.keywords, 'gi');
            const keywordMatches = text.match(keywordRegex) || [];
            
            // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¯†åº¦ã®æ”¹å–„ç‰ˆ
            // 1æ–‡ã‚ãŸã‚Šã®å¹³å‡ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ•°ã‚’è¨ˆç®—
            const keywordsPerSentence = sentences.length > 0 ? (keywordMatches.length / sentences.length) : 0;
            
            // ç·æ–‡å­—æ•°ã«å¯¾ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®æ¯”ç‡ã‚‚è€ƒæ…®
            const keywordCharRatio = totalChars > 0 ? (keywordMatches.join('').length / totalChars) : 0;
            
            // ä¸¡æ–¹ã®æŒ‡æ¨™ã‚’çµ„ã¿åˆã‚ã›ã¦æœ€çµ‚çš„ãªå¯†åº¦ã‚’è¨ˆç®—
            const keywordDensity = (keywordsPerSentence * 0.7) + (keywordCharRatio * 100 * 0.3);
            
            console.log(`ã‚¸ãƒ£ãƒ³ãƒ«ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: ãƒãƒƒãƒæ•°=${keywordMatches.length}, æ–‡æ•°=${sentences.length}, æ–‡ã‚ãŸã‚Š=${keywordsPerSentence.toFixed(2)}, å¯†åº¦=${keywordDensity.toFixed(2)}`);
        // ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ¯ãƒ¼ãƒ‰ï¼ˆå–œã³ã€æ„›ã€å¸Œæœ›ã€å‹åˆ©ã€å®‰ã‚‰ãã€ç§°è³›ï¼‰
/**
 * é«˜ç²¾åº¦ç‰ˆï¼šæ„Ÿæƒ…åˆ†æç”¨å˜èªãƒªã‚¹ãƒˆï¼†ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ç”Ÿæˆã‚³ãƒ¼ãƒ‰
 * * æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆï¼š
 * - èªå½™æ•°ã‚’å¤§å¹…ã«å¢—åŠ ï¼ˆæ—¥å¸¸ä¼šè©±ã€ãƒ“ã‚¸ãƒã‚¹ã€ç†Ÿèªã€æ„Ÿæƒ…è¡¨ç¾ã‚’ç¶²ç¾…ï¼‰
 * - é…åˆ—ç®¡ç†ã«ã‚ˆã‚‹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã®å‘ä¸Š
 */

// ==========================================
// ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ¯ãƒ¼ãƒ‰å®šç¾©ï¼ˆé…åˆ—ã§ç®¡ç†ï¼‰
// ==========================================
// ==========================================
// ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ¯ãƒ¼ãƒ‰å®šç¾©ï¼ˆé…åˆ—ã§ç®¡ç†ï¼‰
// ==========================================
const positiveList = [
    // --- å–œã³ãƒ»å¹¸ç¦ãƒ»å¿«æ¥½ãƒ»ç¬‘ã„ ---
    'å¬‰ã—', 'æ¥½ã—', 'å¹¸ã›', 'å¹¸', 'å–œ', 'ç¬‘', 'ãƒãƒƒãƒ”ãƒ¼', 'å¿«å“‰', 'æ„‰å¿«', 'æ­“å–œ',
    'æ‚¦', 'æº€å–«', 'å ªèƒ½', 'å¿ƒåœ°ã‚ˆ', 'å¿ƒåœ°è‰¯', 'å¿«æ„Ÿ', 'å¿«æ¥½', 'ã‚¦ã‚­ã‚¦ã‚­', 'ãƒ¯ã‚¯ãƒ¯ã‚¯',
    'ãƒ«ãƒ³ãƒ«ãƒ³', 'ä¸Šæ©Ÿå«Œ', 'ã”æ©Ÿå«Œ', 'ç¬‘é¡”', 'å¾®ç¬‘', 'çˆ†ç¬‘', 'å¤§ç¬‘', 'è«‡ç¬‘', 'å“„ç¬‘',
    'ç ´é¡”', 'é ¬ãŒç·©', 'å£å…ƒãŒç·©', 'æœ—ã‚‰', 'é™½æ°—', 'æµ®ã‹ã‚Œ', 'æœ‰é ‚å¤©', 'èˆã„ä¸ŠãŒ',
    'è‡³ç¦', 'å†¥åˆ©', 'é†é†å‘³', 'æº€æ‚¦', 'æ¬£å–œ', 'é›€èº', 'å–œè‰²', 'ä¼šå¿ƒ', 'é¢ç™½',
    'ãŠã‹ã—ã„', 'æ»‘ç¨½', 'ãƒ¦ãƒ¼ãƒ¢ã‚¢', 'æ„›å¬Œ', 'å’Œã‚„ã‹', 'å’Œæ°—', 'ã¯ã—ã‚ƒ', 'ç‹‚å–œ',

    // --- æ„›ãƒ»ä¿¡é ¼ãƒ»çµ†ãƒ»å„ªã—ã• ---
    'å¥½', 'æ„›', 'æ‹', 'æƒš', 'çµ†', 'ä¿¡é ¼', 'ä¿¡ç”¨', 'è¦ªæ„›', 'ç†±æ„›', 'æººæ„›', 'æœ€æ„›',
    'æ…•', 'æ‡', 'ä»²è‰¯', 'ä»²é–“', 'ç›¸æ£’', 'è¦ªå‹', 'ç›Ÿå‹', 'å›£çµ', 'çµæŸ', 'å”åŠ›',
    'å”èª¿', 'å’Œè§£', 'èå’Œ', 'åŒ…å®¹', 'å„ªã—', 'æ¸©ã‹', 'æ€ã„ã‚„ã‚Š', 'æ…ˆ', 'ä»',
    'æ…ˆæ„›', 'æ©ç¾©', 'æ©', 'ç¾©ç†', 'äººæƒ…', 'å‹æƒ…', 'åˆæ‹', 'ç´”æ„›', 'æ±‚æ„›', 'ç›¸æ€ç›¸æ„›',
    'å¯„ã‚Šæ·»', 'æ”¯ãˆ', 'åŠ©ã‘', 'å®ˆã‚‹', 'åº‡ã†', 'æŠ±æ“', 'ãƒã‚°', 'ã‚­ã‚¹', 'å£ä»˜',
    'åŒæƒ…', 'å…±æ„Ÿ', 'å…±é³´', 'è¦ªåˆ‡', 'ä¸å¯§', 'åšæ„', 'å¥½æ„', 'æ‡‡æ„', 'æ˜µæ‡‡',

    // --- ç§°è³›ãƒ»å°Šæ•¬ãƒ»è©•ä¾¡ãƒ»é­…åŠ› ---
    'ç´ æ™´ã‚‰', 'ç´ æ•µ', 'è¦‹äº‹', 'ç«‹æ´¾', 'æµçŸ³', 'ã•ã™ãŒ', 'ç§°è³›', 'è³è³›', 'çµ¶è³›',
    'å°Šæ•¬', 'æ•¬æ„', 'æ†§ã‚Œ', 'èª‡', 'åèª‰', 'æ „å…‰', 'æœ‰èƒ½', 'å¤©æ‰', 'ç§€æ‰', 'è‹±çŸ¥',
    'è³¢', 'è¡æ˜', 'é‹­', 'å·§', 'ä¸Šæ‰‹', 'ãƒ—ãƒ­', 'ç†Ÿç·´', 'é”äºº', 'å‚‘ä½œ', 'åä½œ',
    'è‰¯', 'å–„', 'å¥½æ„Ÿ', 'é­…äº†', 'é­…åŠ›', 'ã‚«ãƒªã‚¹ãƒ', 'ã‚¤ã‚±ãƒ¡ãƒ³', 'ç¾äºº', 'å¯æ†',
    'ç¾è²Œ', 'ç”·å‰', 'ãƒãƒ³ã‚µãƒ ', 'éº—ã—', 'å‡›ã€…', 'æ¸…æ¥š', 'å¦–è‰¶', 'ã‚ã©ã‘ãª', 'å¥æ°—',
    'æ®Šå‹', 'å‹‡æ•¢', 'å‹‡è€…', 'è‹±é›„', 'é«˜æ½”', 'æ°—é«˜ã„', 'å´‡é«˜', 'ç¥ã€…', 'å°Š',
    'ç§°ãˆ', 'è¤’ã‚', 'æ„Ÿæœ', 'æ„Ÿå¿ƒ', 'å¿ƒé…”', 'ä¸€ç›®ç½®', 'æœ€é«˜', 'æ¥µä¸Š', 'è‡³é«˜',

    // --- æˆåŠŸãƒ»å‹åˆ©ãƒ»é”æˆãƒ»é€²æ­© ---
    'æˆåŠŸ', 'æˆã—é‚', 'é”æˆ', 'å‹åˆ©', 'å‹', 'å„ªå‹', 'åˆ¶è¦‡', 'çªç ´', 'å…‹æœ', 'è§£æ±º',
    'å®Œé‚', 'å®Œäº†', 'æˆå°±', 'å®Ÿç¾', 'é–‹èŠ±', 'å®Ÿã‚Š', 'åç©«', 'ç²å¾—', 'ã‚²ãƒƒãƒˆ',
    'å½“ãŸã‚Š', 'å½“é¸', 'åˆæ ¼', 'æ¡ç”¨', 'å†…å®š', 'æ˜‡é€²', 'æ˜‡æ ¼', 'æ „è»¢', 'èºé€²',
    'ç™ºå±•', 'é€²åŒ–', 'æˆé•·', 'å‘ä¸Š', 'æ”¹å–„', 'å¥½è»¢', 'å›å¾©', 'å¾©å¸°', 'å†èµ·',
    'å‡±æ—‹', 'é‡‘å­—å¡”', 'æ „å† ', 'ãƒˆãƒ­ãƒ•ã‚£ãƒ¼', 'å‹²ç« ', 'æ‰‹æŸ„', 'åŠŸç¸¾', 'è²¢çŒ®',
    'ã†ã¾ãã„', 'é †èª¿', 'æ—ã‚‹', 'é€²æ—', 'å‰é€²', 'é£›èº', 'åˆ·æ–°', 'æ´—ç·´',

    // --- å¸Œæœ›ãƒ»é‹ãƒ»æœªæ¥ãƒ»å…‰ ---
    'å¸Œæœ›', 'å¤¢', 'æœŸå¾…', 'å¾…æœ›', 'äºˆæ„Ÿ', 'å¯èƒ½æ€§', 'å±•æœ›', 'å…‰æ˜', 'å…‰', 'è¼',
    'é‹', 'ãƒ„ã‚­', 'ãƒ©ãƒƒã‚­ãƒ¼', 'å¹¸é‹', 'å¥‡è·¡', 'ç¥', 'å¤©å›½', 'æ¥µæ¥½', 'å‰', 'ç¦',
    'ãƒãƒ£ãƒ³ã‚¹', 'å¥½æ©Ÿ', 'æœ‰åˆ©', 'æœ‰æœ›', 'å®‰æ³°', 'å‰é€”', 'å¤œæ˜ã‘', 'æ›™', 'æœæ—¥',
    'çœ©ã—', 'ç…Œ', 'ç‡¦ç„¶', 'ç¥ç¦', 'ç¥ˆã‚Š', 'é¡˜', 'æ•‘æ¸ˆ', 'æ•‘ã„', 'åŠ©ã‹', 'ç”Ÿãå»¶',
    'ç„¡é™', 'æ°¸é ', 'ä¸æ»…', 'å®‰å¯§', 'æ¯å¹', 'äºˆå…†', 'å‰å ±', 'æœ—å ±',

    // --- å®‰å¿ƒãƒ»ç™’ã‚„ã—ãƒ»ç¾ãƒ»é›°å›²æ°— ---
    'å®‰å¿ƒ', 'å®‰ã‚‰', 'ç™’', 'ãƒªãƒ©ãƒƒã‚¯ã‚¹', 'ã®ã‚“ã³ã‚Š', 'ã¾ã£ãŸã‚Š', 'ã»ã£ã“ã‚Š', 'å¹³ç©',
    'å¹³å’Œ', 'ç„¡äº‹', 'å®‰å…¨', 'å¥å…¨', 'å¥åº·', 'å…ƒæ°—', 'æ´»ç™º', 'çˆ½å¿«', 'æ¸…ã€…', 'æ¸…ã‚‰ã‹',
    'ç¶ºéº—', 'ç¾ã—', 'éº—', 'è¯ã‚„ã‹', 'é›…', 'ç¾å‘³', 'ã†ã¾', 'æ—¨', 'çµ¶å“',
    'é™å¯‚', 'é™è¬', 'è½ã¡ç€', 'ç·©å’Œ', 'ä¼‘æ¯', 'ä¼‘æ†©', 'çœ ã‚Š', 'å¿«çœ ', 'ç†Ÿç¡',
    'å£®å¤§', 'é›„å¤§', 'å¹»æƒ³', 'ç¥ç§˜', 'æƒ…ç·’', 'é¢¨æµ', 'è¶£', 'ç²‹', 'ä¹™',
    'è±Šã‹', 'èŠ³é†‡', 'æ¿ƒåš', 'æ–°é®®', 'ç‘ã€…', 'æ½¤', 'é€æ˜', 'æ¾„', 'æµ„åŒ–'
];

// ==========================================
// ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒ¯ãƒ¼ãƒ‰å®šç¾©ï¼ˆé…åˆ—ã§ç®¡ç†ï¼‰
// ==========================================
const negativeList = [
    // --- æ‚²ã—ã¿ãƒ»è‹¦ç—›ãƒ»å­¤ç‹¬ãƒ»å–ªå¤± ---
    'æ‚²ã—', 'è¾›', 'è‹¦ã—', 'ç—›', 'æ³£', 'æ¶™', 'å·æ³£', 'å˜†', 'å“€', 'å‚·', 'å­¤ç‹¬',
    'å¯‚', 'å­¤ç«‹', 'ç–å¤–', 'åˆ¥ã‚Œ', 'å¤±æ‹', 'å–ªå¤±', 'å¤±', 'äº¡', 'æ­»', 'éºä½“', 'è‘¬',
    'ä¸å¹¸', 'è–„å¹¸', 'æƒ¨', 'æ®‹é…·', 'ç„¡å¿µ', 'æ®‹å¿µ', 'æ°—ã®æ¯’', 'å“€ã‚Œ', 'æ†',
    'å—šå’½', 'æ…Ÿå“­', 'æ„', 'æ†‚', 'é¬±', 'æ²ˆ', 'æš—', 'é™°', 'è™š', 'ç©ºè™š', 'è™šç„¡',
    'çµ¶æœ›', 'è½èƒ†', 'ãŒã£ã‹ã‚Š', 'å¤±æœ›', 'å¹»æ»…', 'æœªç·´', 'è¿½æ‚¼', 'ä¾›é¤Š', 'å¢“',
    'åˆ‡ãª', 'ã‚„ã‚‹ã›ãª', 'æ‚¶ãˆ', 'æ‡Šæ‚©', 'å¿ƒç—›', 'æ–­è…¸', 'æ‚²åŠ‡', 'æƒ¨åŠ‡', 'ç½',

    // --- æ€’ã‚Šãƒ»æ†æ‚ªãƒ»æ•µæ„ãƒ»æš´åŠ› ---
    'æ€’', 'è…¹ç«‹', 'ãƒ ã‚«', 'ã‚¤ãƒ©', 'æ†¤', 'æ¿€æ€’', 'æ†', 'å«Œ', 'ä»‡', 'æ•µ', 'æ¨',
    'å¦¬', 'å«‰å¦¬', 'æ®ºæ„', 'æ®ºå®³', 'å®³', 'è™', 'ç½µ', 'æš´è¨€', 'æš´åŠ›', 'æš´è¡Œ', 'å–§å˜©',
    'äº‰', 'å¯¾ç«‹', 'æŠ—äº‰', 'ç´›äº‰', 'æ‰ã‚', 'éé›£', 'æ‰¹åˆ¤', 'ä¸­å‚·', 'èª¹è¬—', 'ç‚ä¸Š',
    'ã‚¯ã‚º', 'ã‚´ãƒŸ', 'ã‚«ã‚¹', 'æ­»ã­', 'ã‚¦ã‚¶', 'ã‚­ãƒ¢', 'åœ°ç„', 'æ‚ªå¤¢',
    'æ®ºä¼', 'æ•µæ„', 'å®³æ„', 'æ‚ªæ„', 'é‚ªæ‚ª', 'é­”', 'å‘ª', 'ç¥Ÿ', 'æ€¨', 'é€†é±—',
    'å¨åš‡', 'è„…', 'ç¨', 'èˆŒæ‰“ã¡', 'é‡è›®', 'åˆ¶è£', 'ç²›æ¸…', 'å¼¾åœ§', 'æ‹·å•',
    'ãƒªãƒ³ãƒ', 'æŠ¹æ®º', 'æ’é™¤', 'è¿½æ”¾', 'è¢‹å©ã', 'ãƒ•ãƒ«ãƒœãƒƒã‚³', 'æœ€æ‚ª', 'æœ€ä½',
    'ä¾®è”‘', 'è»½è”‘', 'è¦‹ä¸‹', 'å˜²ç¬‘', 'å†·ç¬‘', 'æ„šå¼„', 'ãƒã‚«', 'ã‚¢ãƒ›', 'é–“æŠœã‘',

    // --- ææ€–ãƒ»ä¸å®‰ãƒ»å±æ©Ÿ ---
    'æ€–', 'æ', 'æ€¯', 'éœ‡', 'ãƒ“ãƒ“', 'ä¸å®‰', 'å¿ƒé…', 'æ‡¸å¿µ', 'å±æƒ§', 'ç„¦', 'ãƒ‘ãƒ‹ãƒƒã‚¯',
    'è„…å¨', 'å±æ©Ÿ', 'ãƒ”ãƒ³ãƒ', 'å±é™º', 'ãƒªã‚¹ã‚¯', 'ä¸å‰', 'æ‚ªå¯’', 'æˆ¦æ…„', 'ç•æ€–',
    'å‹•æº', 'ç‹¼ç‹½', 'æ··ä¹±', 'éŒ¯ä¹±', 'ç™ºç‹‚', 'ç‹‚æ°—', 'æ°—å‘³æ‚ª', 'ä¸æ°—å‘³', 'æ€ªå¥‡',
    'ãƒ›ãƒ©ãƒ¼', 'å¦–æ€ª', 'å¹½éœŠ', 'æ€ªç‰©', 'åŒ–ã‘ç‰©', 'ãƒˆãƒ©ã‚¦ãƒ', 'å¼·è¿«', 'åˆ‡è¿«',
    'ç„¦ç‡¥', 'å†·ã‚„æ±—', 'è„‚æ±—', 'é³¥è‚Œ', 'è’¼ç™½', 'é¡”é¢è’¼ç™½', 'ã‚¬ã‚¯ãƒ–ãƒ«', 'èºŠèº‡', 'é€¡å·¡',
    'é€ƒäº¡', 'æ•—èµ°', 'é€€å´', 'é­é›£', 'æ‹‰è‡´', 'ç›£ç¦', 'æ‹˜æŸ', 'æŸç¸›',

    // --- å¤±æ•—ãƒ»æå¤±ãƒ»å¾Œæ‚”ãƒ»ç„¡åŠ› ---
    'å¤±æ•—', 'æ•—åŒ—', 'è² ã‘', 'æ•—æˆ¦', 'è„±è½', 'è½é¸', 'ä¸åˆæ ¼', 'è½ã¡', 'ãƒŸã‚¹',
    'éã¡', 'èª¤', 'æ', 'èµ¤å­—', 'å€Ÿé‡‘', 'è²§å›°', 'æ¬ é™¥', 'ä¸è‰¯', 'æ•…éšœ', 'ãƒã‚°',
    'ã‚¨ãƒ©ãƒ¼', 'ä¸å…·åˆ', 'é‚ªé­”', 'å¦¨å®³', 'é…å»¶', 'åœæ»', 'å¾Œæ‚”', 'æ‚”', 'åçœ',
    'æ‡ºæ‚”', 'ç½ª', 'ç½°', 'è¬ç½ª', 'è©«', 'è‡ªè²¬', 'ç½ªæ‚ªæ„Ÿ', 'å¼•ã‘ç›®',
    'è«¦', 'æ–­å¿µ', 'ç„¡ç†', 'é§„ç›®', 'é™ç•Œ', 'æ‰‹é…ã‚Œ', 'çµ‚', 'ã‚ªãƒ¯ã‚³ãƒ³',
    'æŒ«æŠ˜', 'å±ˆè¾±', 'å±ˆæœ', 'é™å‚', 'ç™½æ——', 'åœŸä¸‹åº§', 'ç ´æ»…', 'ç ´ç”£', 'å€’ç”£',
    'æ²¡è½', 'å´©å£Š', 'å…¨æ»…', 'å£Šæ»…', 'å¤§ç ´', 'ç²‰ç •', 'ç²‰ã€…', 'ãƒœãƒ­ãƒœãƒ­',
    'ç„¡åŠ›', 'ç„¡èƒ½', 'å½¹ç«‹ãŸãš', 'è¶³æ‰‹ã¾ã¨ã„', 'å¾’åŠ´', 'ç„¡é§„', 'æ°´ã®æ³¡',

    // --- ä¸å¿«ãƒ»å«Œæ‚ªãƒ»ç–²åŠ´ãƒ»ç—… ---
    'ä¸å¿«', 'ä¸æº€', 'ä¸å¹³', 'æ–‡å¥', 'æ„šç—´', 'åŠ£æ‚ª', 'æ±š', 'è‡­',
    'è…', 'é†œ', 'å‘æ€¯', 'å‘åŠ£', 'ç‹¡çŒ¾', 'æ‚ª', 'é‚ª', 'å½', 'å˜˜', 'è©æ¬º', 'é¨™',
    'è£åˆ‡', 'ç–²', 'å€¦æ€ ', 'éåŠ´', 'ãƒãƒ†', 'ãƒ€ãƒ«', 'é¢å€’', 'é€€å±ˆ', 'é£½',
    'æ†‚é¬±', 'é™°æ¹¿', 'é•å’Œæ„Ÿ', 'åãæ°—', 'æ°—çµ¶', 'å€’',
    'ç—…', 'æ‚£', 'ç—›', 'æ¿€ç—›', 'è‹¦æ‚¶', 'å‘»', 'åè¡€', 'æ€ªæˆ‘', 'è² å‚·', 'é‡å‚·',
    'è‡´å‘½å‚·', 'è¡°å¼±', 'è€è¡°', 'ã‚„ã¤ã‚Œ', 'æ†”æ‚´', 'ç–²å¼Š', 'æ¶ˆè€—', 'æ³¥æ²¼',
    'è¾Ÿæ˜“', 'ã†ã‚“ã–ã‚Š', 'å¹»æ»…', 'å«Œæ°—', 'ãƒ‰ãƒ³å¼•', 'ç”Ÿç†çš„', 'é¼»ã«ã¤ã', 'è€³éšœã‚Š'
];

// é…åˆ—ã‚’æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³æ–‡å­—åˆ—ã«çµåˆ ('|'ã§ç¹‹ã)
const positivePattern = positiveList.join('|');
const negativePattern = negativeList.join('|');

// æ­£è¦è¡¨ç¾ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿæˆ
const posRegex = new RegExp(positivePattern, 'g');
const negRegex = new RegExp(negativePattern, 'g');

// ==========================================
// è§£æãƒ­ã‚¸ãƒƒã‚¯å®Ÿè¡Œéƒ¨
// ==========================================

// textå¤‰æ•°ã¯å¤–éƒ¨ã‹ã‚‰ä¸ãˆã‚‰ã‚Œã‚‹æƒ³å®š
// const text = "ã“ã“ã«è§£æã—ãŸã„æ–‡ç« ãŒå…¥ã‚Šã¾ã™..."; 

// å…¨ä½“ã®ãƒãƒƒãƒãƒ³ã‚°ï¼ˆå˜èªãƒªã‚¹ãƒˆå–å¾—ç”¨ï¼‰
const positiveWords = text.match(posRegex) || [];
const negativeWords = text.match(negRegex) || [];

// ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®ç”Ÿæˆ
const sentimentTimeline = [];
// ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚ºã‚’å‹•çš„ã«èª¿æ•´ï¼ˆæœ€ä½ã§ã‚‚1æ–‡å­—ä»¥ä¸Šã€åŸºæœ¬ã¯é•·ã•ã®1/20ï¼‰
const chunkSize = Math.max(1, Math.ceil(text.length / 20)); 

// åˆ†å‰²æ•°ã¯ãƒ†ã‚­ã‚¹ãƒˆé•·ã«å¿œã˜ã¦æœ€å¤§20ã€çŸ­ã„å ´åˆã¯ãã‚Œä»¥ä¸‹ã«ãªã‚‹ã‚ˆã†èª¿æ•´
const steps = Math.ceil(text.length / chunkSize);

for (let i = 0; i < steps; i++) {
    const chunk = text.slice(i * chunkSize, (i + 1) * chunkSize);
    
    // æ‹¡å¼µã•ã‚ŒãŸæ­£è¦è¡¨ç¾ã‚’ä½¿ã£ã¦ã‚«ã‚¦ãƒ³ãƒˆ
    const pos = (chunk.match(posRegex) || []).length;
    const neg = (chunk.match(negRegex) || []).length;
    
    // ã‚¹ã‚³ã‚¢è¨ˆç®—
    // å˜ç´”ãªå¼•ãç®—ã«åŠ ãˆã€å…¨ä½“æ•°ã«å¯¾ã™ã‚‹æ¯”ç‡ãªã©ã‚‚è€ƒæ…®å¯èƒ½ã ãŒã€
    // ã“ã“ã§ã¯è¦–èªæ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã‚·ãƒ³ãƒ—ãƒ«ã«å¼·èª¿ï¼ˆ* 2ï¼‰
    const score = (pos - neg) * 2;
    sentimentTimeline.push(score); 
}

// çµæœã®å‡ºåŠ›ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
console.log("Positive Count:", positiveWords.length);
console.log("Negative Count:", negativeWords.length);
console.log("Score Timeline:", sentimentTimeline);
console.log("Sample Words:", positiveWords.slice(0, 5), negativeWords.slice(0, 5));
            const overallSentiment = positiveWords.length - negativeWords.length;
            
            const w = profile.weights;
            
            // èªå½™åŠ›ã‚¹ã‚³ã‚¢ï¼ˆé‡ã¿ã‚’2å€ã«å¼·åŒ–ï¼‰
            const vocabScore = vocabularyRichness * (w.vocab || 1) * 2.0;
            
            // ä»–ã®ã‚¹ã‚³ã‚¢ï¼ˆåº•ä¸Šã’ãƒœãƒ¼ãƒŠã‚¹ã‚’å‰Šæ¸›ï¼‰
            const descScore = Math.min(100, totalDescDensity * 1.2) * (w.description || 1);  // ãƒœãƒ¼ãƒŠã‚¹å‰Šé™¤
            const dialogScore = (Math.max(0, 100 - Math.abs(dialogRatio - profile.minDialog) * 1.0) + 5) * (w.dialogue || 1);
            const sentimentScore = (Math.min(100, (positiveWords.length + negativeWords.length) * 5) + 5) * (w.sentiment || 1);
            const endingScore = (endingVariety + 10) * (w.ending || 1);
            const viewpointScore = (viewpointConsistency === 'consistent' ? 100 : viewpointConsistency === 'slightly_mixed' ? 85 : 60) * (w.viewpoint || 1);
            const idealVariance = 0.3;
            const tempoScore = (Math.max(0, 100 - Math.abs(tempoVariance - idealVariance) * 100) + 5) * (w.tempo || 1);
            const redundScore = (redundancyScore + 5) * (w.redundancy || 1);
            const connectorFinalScore = (Math.max(0, connectorScore) + 5) * (w.connector || 1);
            
            // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚¹ã‚³ã‚¢ã®æ”¹å–„ç‰ˆ
            // ã‚ˆã‚Šå¯›å®¹ãªè©•ä¾¡åŸºæº–:
            // - å¯†åº¦0.5ä»¥ä¸Šã§80ç‚¹
            // - å¯†åº¦1.0ä»¥ä¸Šã§100ç‚¹
            let baseKeywordScore = 0;
            if (keywordDensity >= 1.0) {
                baseKeywordScore = 100;
            } else if (keywordDensity >= 0.5) {
                // 0.5ã€œ1.0ã®ç¯„å›²: 80ã€œ100ç‚¹
                baseKeywordScore = 80 + ((keywordDensity - 0.5) / 0.5) * 20;
            } else if (keywordDensity >= 0.2) {
                // 0.2ã€œ0.5ã®ç¯„å›²: 50ã€œ80ç‚¹
                baseKeywordScore = 50 + ((keywordDensity - 0.2) / 0.3) * 30;
            } else if (keywordDensity > 0) {
                // 0ã€œ0.2ã®ç¯„å›²: 30ã€œ50ç‚¹
                baseKeywordScore = 30 + (keywordDensity / 0.2) * 20;
            } else {
                // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå…¨ããªã„å ´åˆ: 20ç‚¹
                baseKeywordScore = 20;
            }
            
            const keywordScore = (baseKeywordScore + 10) * (w.keyword || 1);
            
            // é‡ã¿ã®åˆè¨ˆã‚’è¨ˆç®—ï¼ˆèªå½™åŠ›ã®é‡ã¿ã¯2å€ã•ã‚Œã¦ã„ã‚‹ã®ã§ãã‚Œã‚’åæ˜ ï¼‰
            const totalWeight = (w.vocab * 2.0) + Object.entries(w).filter(([k]) => k !== 'vocab').reduce((sum, [, val]) => sum + val, 0);
            let totalScore = ((vocabScore + descScore + dialogScore + sentimentScore + endingScore + 
                              viewpointScore + tempoScore + redundScore + connectorFinalScore + keywordScore) / totalWeight) + 2;  // +2ãƒœãƒ¼ãƒŠã‚¹
            
            // èªå½™åŠ›ãŒæ¥µç«¯ã«ä½ã„å ´åˆã€ç·åˆç‚¹ã«ã•ã‚‰ã«ãƒšãƒŠãƒ«ãƒ†ã‚£
            if (vocabularyRichness < 20) {
                totalScore = totalScore * 0.7;  // 30%æ¸›ç‚¹
            } else if (vocabularyRichness < 40) {
                totalScore = totalScore * 0.85;  // 15%æ¸›ç‚¹
            }
            
            // æå†™å¯†åº¦ãŒæ¥µç«¯ã«ä½ã„å ´åˆã‚‚ç·åˆç‚¹ã«ãƒšãƒŠãƒ«ãƒ†ã‚£ï¼ˆé–¾å€¤ã‚’ä¸‹ã’ã¦ç·©å’Œï¼‰
            if (totalDescDensity < 5) {
                totalScore = totalScore * 0.7;  // 30%æ¸›ç‚¹ï¼ˆè‡´å‘½çš„ï¼‰
            } else if (totalDescDensity < 15) {
                totalScore = totalScore * 0.85;  // 15%æ¸›ç‚¹
            } else if (totalDescDensity < 30) {
                totalScore = totalScore * 0.95;  // 5%æ¸›ç‚¹
            }
            
            // æ–‡æœ«ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãŒä½ã„å ´åˆã‚‚ç·åˆç‚¹ã«ãƒšãƒŠãƒ«ãƒ†ã‚£
            if (endingVariety < 30) {
                totalScore = totalScore * 0.75;  // 25%æ¸›ç‚¹ï¼ˆã‹ãªã‚Šå˜èª¿ï¼‰
            } else if (endingVariety < 50) {
                totalScore = totalScore * 0.88;  // 12%æ¸›ç‚¹ï¼ˆã‚„ã‚„å˜èª¿ï¼‰
            } else if (endingVariety < 65) {
                totalScore = totalScore * 0.95;  // 5%æ¸›ç‚¹ï¼ˆå°‘ã—å˜èª¿ï¼‰
            }
            
            let rank = 'D';
            if (totalScore >= 90) rank = 'SS';
            else if (totalScore >= 80) rank = 'S';
            else if (totalScore >= 70) rank = 'A';
            else if (totalScore >= 60) rank = 'B';
            else if (totalScore >= 50) rank = 'C';
            
            const comment = generateComment(rank, totalScore, profile, {
                dialogRatio, avgLen, endingVariety, viewpointConsistency, 
                redundancyLabel, vocabularyRichness, totalDescDensity
            });
            
            const tags = generateTags(totalScore, dialogRatio, avgLen, keywordDensity, endingVariety);
            
            return {
                rank,
                totalScore,
                comment,
                tags,
                mainMetrics: [
                    { label: 'æ®µè½æ•°', value: sentences.length, sub: `å¹³å‡${avgLen.toFixed(1)}æ–‡å­—/æ–‡` },
                    { label: 'ä¼šè©±æ¯”ç‡', value: dialogRatio.toFixed(1) + '%', sub: `${dialogLines.length}å€‹ã®ä¼šè©±` },
                    { label: 'èªå½™è±Šå¯Œåº¦', value: vocabularyRichness.toFixed(1) + '%', sub: `${uniqueWords.size}ç¨®ã®èªå½™` },
                    { label: 'æå†™å¯†åº¦', value: totalDescDensity.toFixed(1), sub: 'æ„Ÿè¦š+å¿ƒç†+å‹•ä½œ+æƒ…æ™¯' }
                ],
                radarData: [
                    { label: 'èªå½™åŠ›', score: Math.round(vocabularyRichness) },
                    { label: 'æå†™åŠ›', score: Math.min(100, totalDescDensity * 1.2) },
                    { label: 'ä¼šè©±', score: Math.max(0, 100 - Math.abs(dialogRatio - profile.minDialog) * 1.0) },
                    { label: 'æ„Ÿæƒ…è¡¨ç¾', score: Math.min(100, (positiveWords.length + negativeWords.length) * 5) },
                    { label: 'æ–‡æœ«å¤‰åŒ–', score: endingVariety },
                    { label: 'ãƒ†ãƒ³ãƒ', score: Math.max(0, 100 - Math.abs(tempoVariance - 0.3) * 100) }
                ],
                qualityMetrics: [
                    { label: 'èªå½™ã®è±Šã‹ã•', score: Math.round(vocabularyRichness), 
                      comment: repeatedWords.length > 0 ? `ã€Œ${repeatedWords[0][0]}ã€(${repeatedWords[0][1]}å›)ãªã©ç¹°ã‚Šè¿”ã—ã‚ã‚Š` : 'å¤šæ§˜ãªèªå½™ã‚’ä½¿ç”¨' },
                    { label: 'æå†™ã®å¤šå±¤æ€§', score: Math.round(Math.min(100, totalDescDensity * 1.2)), 
                      comment: `æ„Ÿè¦š${sensoryDensity.toFixed(0)}% å¿ƒç†${psychDensity.toFixed(0)}% å‹•ä½œ${actionDensity.toFixed(0)}%` },
                    { label: 'ä¼šè©±ã®è‡ªç„¶ã•', score: Math.round(Math.max(0, 100 - Math.abs(dialogRatio - profile.minDialog) * 1.0)), 
                      comment: dialogRatio > profile.minDialog + 20 ? 'ä¼šè©±ãŒã‚„ã‚„å¤šã‚' : dialogRatio < profile.minDialog - 20 ? 'ä¼šè©±ãŒå°‘ãªã‚' : 'ãƒãƒ©ãƒ³ã‚¹è‰¯å¥½' },
                    { label: 'æ–‡æœ«ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³', score: Math.round(endingVariety), 
                      comment: endingVariety > 70 ? 'è±Šå¯Œãªæ–‡æœ«è¡¨ç¾' : endingVariety > 50 ? 'ã‚„ã‚„å˜èª¿' : 'æ–‡æœ«ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒé™å®šçš„' },
                    { label: 'è¦–ç‚¹ã®ä¸€è²«æ€§', score: viewpointConsistency === 'consistent' ? 100 : viewpointConsistency === 'slightly_mixed' ? 70 : 40, 
                      comment: viewpointConsistency === 'consistent' ? 'è¦–ç‚¹ãŒçµ±ä¸€ã•ã‚Œã¦ã„ã‚‹' : 'ä¸€äººç§°ãƒ»ä¸‰äººç§°ã®æ··åœ¨ã‚ã‚Š' },
                    { label: 'æ–‡ç« ã®ç°¡æ½”æ€§', score: Math.round(redundancyScore), 
                      comment: redundancyLabel === 'minimal' ? 'ç°¡æ½”ã§èª­ã¿ã‚„ã™ã„' : 'å†—é•·è¡¨ç¾ã‚’å‰Šæ¸›ã™ã‚‹ã¨è‰¯ã„' },
                    { label: 'ãƒ†ãƒ³ãƒã®è‰¯ã•', score: Math.round(Math.max(0, 100 - Math.abs(tempoVariance - 0.3) * 100)), 
                      comment: tempoVariance > 0.5 ? 'æ–‡é•·ã®å·®ãŒå¤§ãã„' : tempoVariance < 0.2 ? 'æ–‡é•·ãŒå˜èª¿' : 'ãƒªã‚ºãƒ ãŒè‰¯å¥½' },
                    { label: 'æ¥ç¶šè©ã®é©åˆ‡æ€§', score: Math.round(Math.max(0, connectorScore)), 
                      comment: connectorScore > 70 ? 'è«–ç†å±•é–‹ãŒæ˜ç¢º' : 'æ¥ç¶šè©ã‚’åŠ¹æœçš„ã«ä½¿ã†ã¨èª­ã¿ã‚„ã™ããªã‚‹' },
                    { label: 'ã‚¸ãƒ£ãƒ³ãƒ«é©åˆåº¦', score: Math.round(baseKeywordScore), 
                      comment: keywordDensity >= 0.5 ? `${profile.name}ã‚‰ã—ã•ãŒå‡ºã¦ã„ã‚‹` : keywordDensity >= 0.2 ? `${profile.name}ã®è¦ç´ ã‚ã‚Š` : 'ã‚¸ãƒ£ãƒ³ãƒ«è¦ç´ ã‚’å¢—ã‚„ã™ã¨è‰¯ã„' },
                    { label: 'æ¼¢å­—ãƒãƒ©ãƒ³ã‚¹', score: Math.round(Math.max(0, 100 - Math.abs(kanjiRatio - 27) * 3)), 
                      comment: kanjiRatio > 40 ? 'æ¼¢å­—ãŒå¤šãç¡¬ã„' : kanjiRatio < 18 ? 'ã²ã‚‰ãŒãªãŒå¤šã‚' : 'é©åˆ‡ãªãƒãƒ©ãƒ³ã‚¹' }
                ],
                contentMetrics: {
                    avgLen,
                    dialogRatio,
                    kanjiRatio,
                    hiraganaRatio,
                    katakanaRatio,
                    viewpointConsistency,
                    redundancyLabel,
                    keywordDensity,
                    endingPatterns: endingDistribution.slice(0, 5),
                    endingVariety,
                    sentimentTimeline,
                    sensoryDensity,
                    psychDensity,
                    actionDensity,
                    sceneDensity,
                    vocabularyRichness,
                    tempoVariance,
                    repeatedWords: repeatedWords.slice(0, 3)
                }
            };
        };

        const generateComment = (rank, score, profile, metrics) => {
            const comments = {
                SS: [
                    `${profile.name}ã¨ã—ã¦æ¥µã‚ã¦é«˜ã„å®Œæˆåº¦ã§ã™ã€‚èªå½™ã®é¸æŠã€æå†™ã®å¯†åº¦ã€æ–‡ç« ã®ãƒªã‚ºãƒ ã™ã¹ã¦ãŒç§€é€¸ã§ã€èª­è€…ã‚’å¼•ãè¾¼ã‚€åŠ›ãŒã‚ã‚Šã¾ã™ã€‚`,
                    `ãƒ—ãƒ­ä½œå®¶ãƒ¬ãƒ™ãƒ«ã®æ–‡ç« åŠ›ã§ã™ã€‚${profile.name}ã®ç‰¹å¾´ã‚’å®Œç’§ã«æ‰ãˆã€ç‹¬è‡ªã®æ–‡ä½“ã‚’ç¢ºç«‹ã—ã¦ã„ã¾ã™ã€‚ã“ã®ã‚¯ã‚ªãƒªãƒ†ã‚£ãªã‚‰å•†æ¥­å‡ºç‰ˆã‚‚ååˆ†è¦–é‡ã«å…¥ã‚Šã¾ã™ã€‚`
                ],
                S: [
                    `${profile.name}ã¨ã—ã¦éå¸¸ã«é«˜ã„æ°´æº–ã§ã™ã€‚æ–‡æœ«è¡¨ç¾ã®è±Šã‹ã•ã€æå†™ã®å¤šå±¤æ€§ãŒéš›ç«‹ã£ã¦ãŠã‚Šã€èª­è€…ã‚’é£½ãã•ã›ãªã„å·¥å¤«ãŒéšæ‰€ã«è¦‹ã‚‰ã‚Œã¾ã™ã€‚`,
                    `å„ªã‚ŒãŸæ–‡ç« ã§ã™ã€‚${profile.name}ã‚‰ã—ã•ã‚’ä¿ã¡ãªãŒã‚‰ã€ç‹¬è‡ªã®å€‹æ€§ã‚‚å…‰ã£ã¦ã„ã¾ã™ã€‚ã•ã‚‰ã«ç£¨ã‘ã°å‚‘ä½œã«ãªã‚‹å¯èƒ½æ€§ã‚’ç§˜ã‚ã¦ã„ã¾ã™ã€‚`
                ],
                A: [
                    `${profile.name}ã¨ã—ã¦è‰¯è³ªãªæ–‡ç« ã§ã™ã€‚åŸºæœ¬çš„ãªæŠ€è¡“ã¯ç¢ºç«‹ã•ã‚Œã¦ãŠã‚Šã€èª­ã¿ã‚„ã™ãé­…åŠ›çš„ã§ã™ã€‚ç´°éƒ¨ã‚’ç£¨ãã“ã¨ã§ã•ã‚‰ã«å‘ä¸Šã—ã¾ã™ã€‚`,
                    `ã—ã£ã‹ã‚Šã¨ã—ãŸæ–‡ç« åŠ›ãŒã‚ã‚Šã¾ã™ã€‚${profile.name}ã®è¦ç´ ã‚’é©åˆ‡ã«å–ã‚Šå…¥ã‚Œã¦ãŠã‚Šã€èª­è€…ã®æœŸå¾…ã«å¿œãˆã‚‹å†…å®¹ã«ãªã£ã¦ã„ã¾ã™ã€‚`
                ],
                B: [
                    `${profile.name}ã¨ã—ã¦ã®åŸºç¤ã¯ã§ãã¦ã„ã¾ã™ã€‚ã„ãã¤ã‹ã®æ”¹å–„ç‚¹ï¼ˆ${getMainIssue(metrics)}ãªã©ï¼‰ã«å–ã‚Šçµ„ã‚€ã“ã¨ã§ã€ã‚ˆã‚Šé­…åŠ›çš„ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚`,
                    `ã¾ãšã¾ãšã®å‡ºæ¥ã§ã™ã€‚${profile.name}ã‚‰ã—ã•ã¯æ„Ÿã˜ã‚‰ã‚Œã¾ã™ãŒã€æ–‡ç« ã®ãƒ¡ãƒªãƒãƒªã‚„è¡¨ç¾ã®å·¥å¤«ã§ã•ã‚‰ã«è‰¯ããªã‚Šã¾ã™ã€‚`
                ],
                C: [
                    `${profile.name}ã®åŸºæœ¬è¦ç´ ã¯å«ã¾ã‚Œã¦ã„ã¾ã™ãŒã€ã¾ã ä¼¸ã³ã—ã‚ãŒå¤§ãã„ã§ã™ã€‚ç‰¹ã«${getMainIssue(metrics)}ã®æ”¹å–„ã«æ³¨åŠ›ã—ã¾ã—ã‚‡ã†ã€‚`,
                    `åŸºç¤çš„ãªæ–‡ç« ã¯æ›¸ã‘ã¦ã„ã¾ã™ãŒã€${profile.name}ã¨ã—ã¦ã®ç‰¹å¾´ãŒè–„ã‚ã§ã™ã€‚æå†™ã‚„ä¼šè©±ã®å·¥å¤«ã§å€‹æ€§ã‚’å‡ºã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚`
                ],
                D: [
                    `${profile.name}ã¨ã—ã¦ã¯ã¾ã ç™ºå±•é€”ä¸Šã§ã™ã€‚${getMainIssue(metrics)}ãªã©ã®åŸºæœ¬ã‹ã‚‰è¦‹ç›´ã—ã€ä¸€æ­©ãšã¤æ”¹å–„ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚`,
                    `æ”¹å–„ã®ä½™åœ°ãŒå¤šãã‚ã‚Šã¾ã™ã€‚ç„¦ã‚‰ãšã€æ–‡ç« ã®åŸºæœ¬ï¼ˆæ–‡æœ«è¡¨ç¾ã€è¦–ç‚¹ã€æå†™ï¼‰ã‹ã‚‰ä¸å¯§ã«ç£¨ã„ã¦ã„ãã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚`
                ]
            };
            
            const rankComments = comments[rank] || comments.D;
            return rankComments[Math.floor(Math.random() * rankComments.length)];
        };

        const getMainIssue = (m) => {
            const issues = [];
            if (m.endingVariety < 30) issues.push('æ–‡æœ«ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å˜èª¿ã•');
            if (m.viewpointConsistency === 'mixed') issues.push('è¦–ç‚¹ã®æ··åœ¨');
            if (m.redundancyLabel === 'excessive') issues.push('å†—é•·è¡¨ç¾');
            if (m.vocabularyRichness < 30) issues.push('èªå½™ã®ä¹ã—ã•');
            if (m.totalDescDensity < 40) issues.push('æå†™ã®è–„ã•');
            return issues[0] || 'å…¨ä½“çš„ãªãƒãƒ©ãƒ³ã‚¹';
        };

        const generateTags = (score, dialogRatio, avgLen, keywordDensity, endingVariety) => {
            const tags = [];
            if (score >= 80) tags.push('é«˜å“è³ª');
            if (dialogRatio > 45) tags.push('ä¼šè©±å¤šã‚');
            if (dialogRatio < 25) tags.push('åœ°ã®æ–‡ä¸­å¿ƒ');
            if (avgLen > 60) tags.push('é•·æ–‡å‹');
            if (avgLen < 35) tags.push('çŸ­æ–‡å‹');
            if (keywordDensity > 0.6) tags.push('ã‚¸ãƒ£ãƒ³ãƒ«è‰²æ¿ƒåš');
            if (endingVariety > 70) tags.push('æ–‡æœ«å¤šå½©');
            if (endingVariety < 50) tags.push('æ–‡æœ«æ”¹å–„æ¨å¥¨');
            return tags.slice(0, 5);
        };

        const getScoreColor = (score) => {
            if (score >= 80) return 'bg-gradient-to-r from-green-500 to-emerald-600';
            if (score >= 60) return 'bg-gradient-to-r from-blue-500 to-cyan-600';
            if (score >= 40) return 'bg-gradient-to-r from-yellow-500 to-orange-500';
            return 'bg-gradient-to-r from-red-500 to-pink-600';
        };

        const getScoreBg = (score) => {
            if (score >= 80) return 'badge-success';
            if (score >= 60) return 'badge-info';
            if (score >= 40) return 'badge-warning';
            return 'badge-error';
        };

        const generateAdvice = (m, p) => {
            const list = [];
            
            if (Math.abs(m.avgLen - p.targetLen) > 30) {
                list.push({ 
                    label: 'å¹³å‡æ–‡é•·', 
                    value: Math.round(m.avgLen) + 'æ–‡å­—', 
                    target: `${p.targetLen}æ–‡å­—å‰å¾Œ`, 
                    statusBadge: 'badge-warning', 
                    msg: m.avgLen > p.targetLen ? 'æ–‡ãŒé•·ã‚ã§ã™ã€‚èª­ã¿ã‚„ã™ã•é‡è¦–ãªã‚‰çŸ­ç¸®ã‚’æ¤œè¨ã€‚' : 'æ–‡ãŒçŸ­ã‚ã§ã™ã€‚æå†™ã‚’å¢—ã‚„ã™ã¨æ·±ã¿ãŒå‡ºã¾ã™ã€‚'
                });
            }
            
            if (m.kanjiRatio > 50 || m.kanjiRatio < 12) {
                list.push({ 
                    label: 'æ¼¢å­—ç‡', 
                    value: Math.round(m.kanjiRatio) + '%', 
                    target: '20-35%', 
                    statusBadge: 'badge-warning', 
                    msg: m.kanjiRatio > 40 ? 'æ¼¢å­—ãŒå¤šãç¡¬ã„å°è±¡ã€‚ã²ã‚‰ãŒãªã‚’å¢—ã‚„ã™ã¨æŸ”ã‚‰ã‹ããªã‚Šã¾ã™ã€‚' : 'ã‚„ã‚„å¹³ä»®åãŒå¤šã‚ã€‚æ¼¢å­—ã‚’å¢—ã‚„ã™ã¨ç· ã¾ã‚Šã¾ã™ã€‚'
                });
            }
            
            if (m.viewpointConsistency !== 'consistent') {
                list.push({ 
                    label: 'è¦–ç‚¹ä¸€è²«æ€§', 
                    value: m.viewpointConsistency === 'mixed' ? 'æ··åœ¨ã‚ã‚Š' : 'ã‚„ã‚„æ··åœ¨', 
                    target: 'ä¸€è²«', 
                    statusBadge: 'badge-error', 
                    msg: 'ä¸€äººç§°ãƒ»ä¸‰äººç§°ã®æ··åœ¨ãŒè¦‹ã‚‰ã‚Œã¾ã™ã€‚è¦–ç‚¹ã‚’çµ±ä¸€ã™ã‚‹ã¨èª­ã¿ã‚„ã™ããªã‚Šã¾ã™ã€‚'
                });
            }
            
            if (m.redundancyLabel !== 'minimal') {
                list.push({ 
                    label: 'å†—é•·è¡¨ç¾', 
                    value: m.redundancyLabel === 'excessive' ? 'å¤šã„' : 'ã‚„ã‚„å¤šã„', 
                    target: 'æœ€å°é™', 
                    statusBadge: 'badge-warning', 
                    msg: 'ã€Œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€ã€Œã¨ã„ã†ã‚‚ã®ã€ç­‰ã®å†—é•·è¡¨ç¾ãŒç›®ç«‹ã¡ã¾ã™ã€‚ç°¡æ½”ã«æ›¸ãç›´ã—ã¾ã—ã‚‡ã†ã€‚'
                });
            }
            
            if (m.endingVariety < 40) {
                list.push({ 
                    label: 'æ–‡æœ«ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³', 
                    value: Math.round(m.endingVariety) + 'ç‚¹', 
                    target: '50ç‚¹ä»¥ä¸Š', 
                    statusBadge: 'badge-warning', 
                    msg: 'æ–‡æœ«ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå˜èª¿ã§ã™ã€‚ã€Œã€œãŸã€ä»¥å¤–ã®è¡¨ç¾ï¼ˆä½“è¨€æ­¢ã‚ã€ç–‘å•å½¢ãªã©ï¼‰ã‚’å¢—ã‚„ã—ã¾ã—ã‚‡ã†ã€‚'
                });
            }
            
            if (m.vocabularyRichness < 50) {
                let vocabularyMsg = '';
                let vocabularyTarget = '';
                let vocabularyBadge = 'badge-warning';
                
                if (m.vocabularyRichness < 30) {
                    vocabularyMsg = `èªå½™ã®å¤šæ§˜æ€§ãŒè‘—ã—ãä¸è¶³ã—ã¦ã„ã¾ã™ã€‚${m.repeatedWords.length > 0 ? `ã€Œ${m.repeatedWords.slice(0, 3).map(w => w[0]).join('ã€ã€Œ')}ã€ãªã©ã®` : ''}åŒã˜èªã®ç¹°ã‚Šè¿”ã—ãŒç›®ç«‹ã¡ã¾ã™ã€‚é¡èªè¾å…¸ã‚’æ´»ç”¨ã—ã€è¡¨ç¾ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¢—ã‚„ã—ã¾ã—ã‚‡ã†ã€‚`;
                    vocabularyTarget = '50%ä»¥ä¸Šæ¨å¥¨';
                    vocabularyBadge = 'badge-error';
                } else if (m.vocabularyRichness < 40) {
                    vocabularyMsg = `èªå½™ã®ç¹°ã‚Šè¿”ã—ãŒã‚„ã‚„å¤šãè¦‹ã‚‰ã‚Œã¾ã™ã€‚${m.repeatedWords.length > 0 ? `ç‰¹ã«ã€Œ${m.repeatedWords.slice(0, 2).map(w => w[0]).join('ã€ã€Œ')}ã€ãªã©ã€‚` : ''}ã‚‚ã†å°‘ã—å¤šæ§˜ãªè¡¨ç¾ã‚’å¿ƒãŒã‘ã‚‹ã¨ã€æ–‡ç« ã«æ·±ã¿ãŒå‡ºã¾ã™ã€‚`;
                    vocabularyTarget = '50%ä»¥ä¸Šæ¨å¥¨';
                    vocabularyBadge = 'badge-warning';
                } else {
                    vocabularyMsg = `èªå½™ã¯ã¾ãšã¾ãšã§ã™ãŒã€${m.repeatedWords.length > 0 ? `ã€Œ${m.repeatedWords[0][0]}ã€ãªã©ã®` : ''}ä¸€éƒ¨ã®èªã®ç¹°ã‚Šè¿”ã—ãŒè¦‹ã‚‰ã‚Œã¾ã™ã€‚é¡èªã‚’ä½¿ã†ã¨ã•ã‚‰ã«æ´—ç·´ã•ã‚ŒãŸæ–‡ç« ã«ãªã‚Šã¾ã™ã€‚`;
                    vocabularyTarget = '50%ä»¥ä¸Šæ¨å¥¨';
                    vocabularyBadge = 'badge-info';
                }
                
                list.push({ 
                    label: 'èªå½™ã®è±Šã‹ã•', 
                    value: Math.round(m.vocabularyRichness) + '%', 
                    target: vocabularyTarget, 
                    statusBadge: vocabularyBadge, 
                    msg: vocabularyMsg
                });
            }
            
            if (m.tempoVariance < 0.10) {
                list.push({ 
                    label: 'æ–‡ç« ã®ãƒªã‚ºãƒ ', 
                    value: 'å˜èª¿', 
                    target: 'é©åº¦ãªå¤‰åŒ–', 
                    statusBadge: 'badge-info', 
                    msg: 'æ–‡é•·ãŒã»ã¼åŒã˜ã§å˜èª¿ã§ã™ã€‚é•·çŸ­ã‚’ç¹”ã‚Šäº¤ãœã‚‹ã¨ãƒªã‚ºãƒ ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚'
                });
            }
            
            if (m.tempoVariance > 0.7) {
                list.push({ 
                    label: 'æ–‡ç« ã®ãƒªã‚ºãƒ ', 
                    value: 'ã°ã‚‰ã¤ãå¤§', 
                    target: 'é©åº¦ãªå¤‰åŒ–', 
                    statusBadge: 'badge-warning', 
                    msg: 'æ–‡é•·ã®å·®ãŒå¤§ãã™ãã¾ã™ã€‚ã‚‚ã†å°‘ã—å‡ä¸€ã«ã™ã‚‹ã¨èª­ã¿ã‚„ã™ããªã‚Šã¾ã™ã€‚'
                });
            }
            
            if (m.keywordDensity < 0.2) {
                list.push({ 
                    label: 'ã‚¸ãƒ£ãƒ³ãƒ«è¦ç´ ', 
                    value: m.keywordDensity.toFixed(2), 
                    target: '0.5ä»¥ä¸Šæ¨å¥¨', 
                    statusBadge: 'badge-info', 
                    msg: `${p.name}ã‚‰ã—ã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å¢—ã‚„ã™ã¨ã€ã‚¸ãƒ£ãƒ³ãƒ«ã®é›°å›²æ°—ãŒã‚ˆã‚Šå¼·ã¾ã‚Šã¾ã™ã€‚`
                });
            }
            
            if (m.sensoryDensity < 15 && p.name.includes('ç´”æ–‡å­¦')) {
                list.push({ 
                    label: 'æ„Ÿè¦šæå†™', 
                    value: Math.round(m.sensoryDensity) + '%', 
                    target: '20%ä»¥ä¸Š', 
                    statusBadge: 'badge-info', 
                    msg: 'è¦–è¦šãƒ»è´è¦šãƒ»è§¦è¦šãªã©ã®äº”æ„Ÿæå†™ã‚’å¢—ã‚„ã™ã¨ã€è‡¨å ´æ„ŸãŒé«˜ã¾ã‚Šã¾ã™ã€‚'
                });
            }
            
            adviceList.value = list.slice(0, 8);
        };

        const renderCharts = (data) => {
            const ctxRadar = document.getElementById('radarChart');
            const ctxSentiment = document.getElementById('sentimentChart');
            if (radarChart) radarChart.destroy();
            if (sentimentChart) sentimentChart.destroy();

            const gridColor = isDarkMode.value ? '#334155' : '#e2e8f0';
            const textColor = isDarkMode.value ? '#cbd5e1' : '#475569';
            
            radarChart = new Chart(ctxRadar, {
                type: 'radar',
                data: {
                    labels: data.radarData.map(d => d.label),
                    datasets: [{ 
                        label: 'ã‚¹ã‚³ã‚¢', 
                        data: data.radarData.map(d => d.score), 
                        backgroundColor: 'rgba(56, 189, 248, 0.25)', 
                        borderColor: '#38bdf8', 
                        borderWidth: 3,
                        pointBackgroundColor: '#38bdf8',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 5
                    }]
                },
                options: { 
                    maintainAspectRatio: false, 
                    scales: { 
                        r: { 
                            min: 0, 
                            max: 100, 
                            grid: { color: gridColor }, 
                            ticks: { 
                                display: true,
                                stepSize: 25,
                                color: textColor,
                                backdropColor: 'transparent'
                            },
                            pointLabels: {
                                color: textColor,
                                font: { size: 12, weight: 'bold' }
                            }
                        } 
                    }, 
                    plugins: { legend: { display: false } } 
                }
            });

            sentimentChart = new Chart(ctxSentiment, {
                type: 'line',
                data: {
                    labels: data.contentMetrics.sentimentTimeline.map((_, i) => i),
                    datasets: [{ 
                        data: data.contentMetrics.sentimentTimeline, 
                        borderColor: '#f472b6', 
                        backgroundColor: 'rgba(244, 114, 182, 0.15)', 
                        fill: true, 
                        tension: 0.4, 
                        pointRadius: 2,
                        pointHoverRadius: 6,
                        borderWidth: 3
                    }]
                },
                options: { 
                    maintainAspectRatio: false, 
                    scales: { 
                        x: { display: false }, 
                        y: { 
                            display: true,
                            min: -10, 
                            max: 10,
                            grid: { color: gridColor },
                            ticks: { color: textColor }
                        } 
                    }, 
                    plugins: { 
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const value = context.parsed.y;
                                    return value > 0 ? `ãƒã‚¸ãƒ†ã‚£ãƒ–: ${value.toFixed(1)}` : `ãƒã‚¬ãƒ†ã‚£ãƒ–: ${value.toFixed(1)}`;
                                }
                            }
                        }
                    } 
                }
            });
        };

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«localStorageã‹ã‚‰åŒæ„çŠ¶æ…‹ã‚’èª­ã¿è¾¼ã‚€
        onMounted(() => {
            try {
                const agreed = localStorage.getItem('aiTermsAgreed');
                if (agreed === 'true') {
                    hasAgreedToAITerms.value = true;
                }
            } catch (e) {
                console.warn('localStorage not available');
            }
            
            // ãƒ†ãƒ¼ãƒã®èª­ã¿è¾¼ã¿
            try {
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'night') {
                    isDarkMode.value = true;
                }
            } catch (e) {
                console.warn('localStorage not available');
            }
        });

        return { 
            inputText, selectedGenre, groupedGenres, isProcessing, stats, adviceList, 
            isDarkMode, toastMessage, toastType, toastIcon, currentScoringProfile, 
            isAIMode, aiComment, isAIProcessing, showAITermsModal, hasAgreedToAITerms,
            analyzeText, analyzeWithAI, getScoreColor, getScoreBg, rankColorClass, rankGradient, shareResult,
            acceptAITerms, declineAITerms, onGenreChange, shareToXDirect, copyResultText, downloadCard, shareToLine
        };
    }
}).mount('#app');
</script>
</body>
</html>
